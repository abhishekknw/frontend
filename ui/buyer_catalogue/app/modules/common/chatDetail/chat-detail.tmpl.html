<link rel="stylesheet" href="modules/common/chatDetail/chat-detail.tmpl.css">
<div class="phone-chat" ng-if="showChatModule">
  <div class="screen-phone">
    <div class="green-fixed nav-phone navbar-fixed">
      <div>
        <div ng-if="userChatData.whatsapp_name!=''" class="green-fixed-inner">
          <div class="icon-back">
            <svg viewBox="0 0 57.653 64.11" width="25" height="25" xmlns="http://www.w3.org/2000/svg"
              ng-click="getActiveUser(pagination.current)">

              <path fill="#fff"
                d="M 31.75 0 L 0 31.956 L 30.961 63.124 L 36.412 57.26 L 15.768 36.41 L 56.313 35.997 L 56.107 28.366 L 15.484 28.572 L 37.35 6.086 L 31.75 0 Z" />
            </svg>
          </div>
          <!--Send Template Button-->
          <div>
            <i class='fas fa-location-arrow' style="font-size:24px;color: #fff;;" data-toggle="modal"
              data-target="#TemplateModal" ng-click="getTemplateData()"></i>
          </div>
          <div>
            <i class='fas fa-phone-alt' style="font-size:24px;color: #fff;" data-toggle="modal"
              data-target="#CallTemplate" ng-click="CallTemplate(userChatData)"></i>
          </div>
          <!--end Template Buttont-->

          <div>
            <button ng-click="getLeadsTabSuspenseLeads(userChatData.phone_number)" data-toggle="modal"
              data-target="#SuspenseLeadsModel">Suspense Sheet</button>
          </div>
          <div ng-click="userProfileIcon(userChatData.phone_number)">
            <span class="username profile-heading">{{userChatData.whatsapp_name| limitTo: 15 }}
              {{userChatData.whatsapp_name.length > 15 ? '...' :
              ''}}({{userChatData.user_name}})</span><br />
            <span
              class="tel-number profile-heading">({{userChatData.country_code}}{{userChatData.phone_number}}){{userChatPayload.area}},{{userChatPayload.city}},<br>{{userChatPayload.society_name}},{{userChatPayload.pincode}},{{userChatPayload.type_of_entity}},{{userChatPayload.designation}}</span>
          </div>
          <div>
            <button
              ng-click="opsVerified(userChatData.phone_number,userChatPayload.supplier_id,userChatPayload.type_of_entity)"
              data-toggle="modal" data-target="#RequirementModel"
              ng-disabled="userChatPayload.type_of_entity==undefined"
              title={{userChatPayload.type_of_entity==undefined?supplierTypeUndefined:""}}>Ops
              Verified</button>
          </div>

          <div>
            <i class='fas fa-map-marker-alt' style='font-size:24px;color:red'
              ng-click="visitmap(userChatData.gmapLink)"></i>
          </div>

          <div class="profile-image-chat">
            <span>
              {{userChatData.whatsapp_name |firstlater}}
            </span>
          </div>
        </div>

        <div ng-if="userChatData.whatsapp_name ==''">
          <center>
            <span class="tel-number profile-heading-1">{{userChatData.country_code}}{{userChatData.phone_number}}</span>
          </center>
          <div class="profile-image-chat-1">
            <span ng-if="userChatData.whatsapp_name==''">#</span>
          </div>
        </div>

      </div>
    </div>
    <div class="chat">

      <div ng-repeat="chat in userChatData.payload track by $index">
        <!-- <div > {{chat.timestamp | date : format : timezone}}</div> -->
        <div style="width: 100%; float:right;">
          <div class="message-1 " ng-if="chat.sender=='user'">
            <span class="chat-text" ng-if='chat.content.text'>{{chat.content.text}}</span>
            <span ng-if="chat.content.types[0] == 'image'"><img src="{{chat.content.url}}" alt="Girl in a jacket"
                width="200" height="auto"></span>
            <span ng-if="chat.content.types[0] == 'video'">
              <video width="200" height="auto" controls>
                <source ng-src="{{chat.content.url}}" type="video/mp4">
              </video>
            </span>
            <span ng-if="chat.type == 'file'">
              <i class="fa fa-file-pdf-o"></i>&nbsp;{{chat.content.name}}
              <a href="{{chat.content.url}}">Download</a>
            </span>
            <span ng-if="chat.content.types[0] == 'audio'">
              <audio width="200" height="auto" controls>
                <source ng-src="{{chat.content.url}}" type="audio/ogg; codecs=opus">
              </audio>
            </span>
            <span ng-if="chat.type == 'contact'">
              <div class="contact-info">
                <div class="card">
                  <center><i class="icon fas fa-user">
                      <h5>{{chat.content.contacts[0].name.first_name}}</h5>
                    </i></center>
                  <div class="card-content">
                    <span>{{chat.content.contacts[0].phones[0].phone}}</span>
                    <h3>{{chat.content.contacts[0].name.first_name}}</h3>
                  </div>
                </div>
              </div>
            </span>
            <br>
            <span class="chat-time">{{chat.timestamp | date :'medium'}}</span>
          </div>
        </div>
        <div style="width: 100%; float:left;">
          <div class="message-2 white-space-pre-line" ng-if="chat.sender=='bot'">
            <span class="chat-text" ng-if='chat.content.text'>{{chat.content.text}}</span>
            <span ng-if="chat.content.types[0] == 'image'"><img src="{{chat.content.url}}" alt="Girl in a jacket"
                width="200" height="200"></span>
            <span ng-if="chat.content.types[0] == 'video'">
              <video width="200" height="250" controls>
                <source ng-src="{{chat.content.url}}" type="video/mp4">
              </video>
            </span>
            <span ng-if="chat.type == 'file'"><i class="fa fa-file-pdf-o"></i>&nbsp;{{chat.content.name}}
              <a href="{{chat.content.url}}">Download</a>
            </span>
            <span ng-if="chat.content.types[0] == 'audio'">
              <audio width="200" height="auto" controls>
                <source ng-src="{{chat.content.url}}" type="audio/ogg; codecs=opus">
              </audio>
            </span>
            <span ng-if="chat.type == 'contact'">
              <div class="contact-info">
                <div class="card">
                  <center><i class="icon fas fa-user">
                      <h5>{{chat.content.contacts[0].name.firstName}}</h5>
                    </i></center>
                  <div class="card-content">
                    <span>{{chat.content.contacts[0].phones[0].phone}}</span>
                    <h3>{{chat.content.contacts[0].name.firstName}}</h3>
                  </div>
                </div>
              </div>
            </span>
            <span class="chat-time">{{chat.timestamp | date : 'medium'}}, <b
                style="text-transform: capitalize;">{{chat.status['type']}}</b></span>
          </div>
        </div>
      </div>

    </div>
    <button ng-disabled="pageCount == 1" type="button" class="btn btn-outline-primary"
      ng-click="prvPageChat(userChatData.phone_number)"
      style="background-color: rgb(70, 70, 70);  float:left;  margin-bottom: 5px; border-radius:50%; border: 1px solid white; margin-top: -20px; position: relative; z-index: 10;">
      <i class="fa fa-angle-double-down" aria-hidden="true"></i>
    </button>
    <button ng-disabled="!disableNextPagebutton" type="button" class="btn btn-primary"
      ng-click="nextPageChat(userChatData.phone_number)"
      style="background-color: rgb(70, 70, 70);float:right; margin-bottom: 5px; border-radius:50%; border: 1px solid white;  margin-top: -20px; position: relative; z-index: 10;">
      <i class="fa fa-angle-double-up" aria-hidden="true"></i>
    </button>

    <div ng-if="messageBox" class="msg-box">
      <div class="input-wrapper input ">
        <div class="wrapper">
          <div class="file-upload">
            <input type="file" />
            <i class="fa fa-arrow-up"></i>
          </div>
          <div class="file-upload">
            <input type="file" />
            <i class="fa fa-arrow-up"></i>
          </div>
        </div>
      </div>
    </div>
    <div class="aisensy-intervene-btn" ng-click="writeMessage(userChatData,'active')" ng-if="!messageBox"
      style="margin-top:5px">
      <button type="button" class="btn btn-primary" style="margin-top:30px">
        Intervene
      </button>
    </div>
  </div>
</div>
<!-- Start Send Template Modal -->
<div id="TemplateModal" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header p-0">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"
          style="opacity: 1; font-weight:bolder;"> &times;</button>

        <h4 class="modal-title  theme-color" ng-if="!submitLeadType" style=" font-size: 21px;">
          Select Template you want to share</h4>
        <hr>

        <div class="input-wrapper search-input-wrapper"
          style=" margin: 10px; background-color: #575758;top:21px;z-index: 10;">
          <i class="fa fa-search" aria-hidden="true" style="margin-left: 10px;"></i>
          <input placeholder="Search here" ng-change="getTemplateData(getTemplateDataParams)"
            ng-model="getTemplateDataParams.search" id="tab1search" name="searchcontact" type="text"
            style="background-color: #ababab;margin: 5px; " />
        </div>

        <div class="modal-body">
          <table class="table table-bordered table-hover">
            <tbody ng-repeat="list in TemplateList.rows | limitTo:10">
              <td>
                <div class="friend-drawer templte-box-list friend-drawer--onhover">
                  <div class="custom-control custom-checkbox" ng-click="getselectedTemplate(list)">
                    <span class="text" style="float: left;">
                      <h6 class="msg-title">{{list.alias_name}}</h6>
                      <p class="text-muted">
                        {{TemplateCollapseRow===list.id?list.data:list.data.substring(0,110)+'...'}}
                      </p>
                    </span>
                  </div>
                </div>
                <div ng-if='TemplateCollapseRow===list.id' class="input-params">
                  <label>Parameters:</label>
                  <div class="param-div">
                    <p class="param-list">{{list.param.toString()}}</p>
                  </div>
                  <form name="parameters" ng-submit="setSendTemplateParams(sendTemplateParams,list)">
                    <input type="text" ng-model="sendTemplateParams" name="sendTemplateParams" required />
                    <button class="btn btn-primary" type="submit">Send</button>
                  </form>
                  <p><span style="font-weight: 600;">Note: </span> Enter Param With (,) Separated</p>
                </div>
              </td>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- end Intervene Chat -->

<!-- CallTemplate Modal Start -->
<div id="CallTemplate" class="modal fade call-modal theme-modal">
  <div class="modal-dialog quick-call-model">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Quick Call</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="row quick-call-form">
        <!-- <hr style="border: 1px solid ; border-width: 1px 0px 0px 0px"> style="border-right: 1px solid #0000008c"-->
        <div class="col-md-12">
          <form name="myForm" ng-submit="OnQuickCall(CallModel)">
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label> Phone Number</label>
                  <input class="form-control" disabled ng-model="CallModel.destination_number"
                    placeholder="Phone Number" type="text">
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group">
                  <label> Select Agent</label>
                  <select class="form-control" ng-model="CallModel.agent_number" name="Agent" required>
                    <option value="">Select Agent</option>
                    <option value="{{value.follow_me_number}}" ng-repeat="value in DialerAgentList.data">
                      {{value.name}}</option>
                  </select>
                </div>
              </div>
              <div class="col-md-12">
                <div class="form-group">
                  <label> Select Number</label>
                  <select class="form-control" ng-model="CallModel.caller_id" name="Number" required>
                    <option value="">Select Number</option>
                    <option value="{{value.tollfree_number}}" ng-repeat="value in DialerCallerIds">
                      {{value.tollfree_number}}</option>
                  </select>
                </div>
              </div>

            </div>
            <div class="modal-footer text-center">
              <button type="submit" style="margin-top: 10px;" class="btn btn-danger smll-btn-cmt">Call</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<!--CallTemplate Modal End  -->

<!-- start Requirement table -->
<div id="RequirementModel" class="modal custom-modal-box fade li-popup">
  <div class="modal-dialog modal-lg chat-detail-table">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Requirement Details</h4>
        <hr />
        <div class="modal-body" style="width: 100%; min-height: 200px;">
          <div class="modal-body col-md-4 table-responsive submitted_lead_table"
            style="width: 100%; min-height: 200px;">
            <form name="myForm">
              <!-- test -->
              <h4 class="modal-title">Submitted Leads</h4>
              <table class="table table-bordered" name="contactForm">
                <thead>
                  <tr>
                    <th ng-repeat="header in requirement_submitted_headings" class="col-md-2 alignment">
                      <b>{{header.header}}</b>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat-start="(key, requirement) in requirementDetailData">
                    <td class="alignment">
                      <span ng-if="!detailedShow[key]" ng-click="ShowDetailed(key,requirement.sector)"
                        class="glyphicon glyphicon-plus">
                      </span>
                      <span ng-if="detailedShow[key]" ng-click="ShowDetailed(key,requirement.sector)"
                        class="glyphicon glyphicon-minus">
                      </span>
                    </td>
                    <td class="alignment">
                      {{sectorName(requirement.sector)}}
                    </td>
                    <tr ng-show="detailedShow[key]" id="detailedSho_{{key}}" ng-repeat-end
                      ng-repeat-start="subrequirement in requirement.requirements">
                      <td ng-style="{'background-color': subrequirement.color_class}" class="input_td_req11"> </td>
                      <td ng-style="{'background-color': subrequirement.color_class}" class="input_td_req">
                        <input type="checkbox" name="requirementCheck" id="requirementCheckId"
                          ng-click="checkbooxCheck(key,$index)" ng-model="subrequirement.requirementCheck">
                      </td>
                      <td class="alignment">
                        <select class="form-control" ng-model="option">
                          <option ng-repeat="option in subSectorList" value="{{option}}">{{option}}</option>
                        </select>
                        {{subrequirement.sub_sector_name}}
                      </td>
                      <td class="alignment">
                        <select class="form-control" name="current_company_{{$index}}" id="current_company_id_{{$index}}"
                          ng-change="checkBoxAutoCheck(key,$index)" ng-model="subrequirement.current_company"
                          style="width:100px;">
                          <option value="" disabled>Select Current Partner</option>
                          <option ng-if="subrequirement.sector==cpartner.sector || (subrequirement.sector==null)"
                            ng-repeat="cpartner in companiesDetailData track by $index"
                            value="{{cpartner.organisation_id}}">
                            {{cpartner.name}}
                          </option>
                        </select>
                        <input style="margin-top:10px" type="text" ng-change="checkBoxAutoCheck(key,$index)"
                          class="form-control" placeholder="Other Current Company"
                          ng-if="subrequirement.current_company == ''" name="currentCompanyOther"
                          id="currentCompanyOtherId" ng-model="subrequirement.current_company_other" />
                      </td>
                      <td class="alignment">
                        {{subrequirement.current_patner_feedback}}<br>
                        <span
                          ng-if="subrequirement.current_patner_feedback_reason">Reason:{{subrequirement.current_patner_feedback_reason}}</span>
                        <span ng-if="!subrequirement.current_patner_feedback_reason">Reason:NA</span>
                      </td>
                      <td class="alignment">
                        {{companyData(subrequirement.sector)}}
                        <span style="width:150px;"
                          class="multiselectDropdown multiselectDropdown-123 multiselectDropdown-style style="
                          color:red;width:100%;margin-left:20px;" ng-dropdown-multiselect=""
                          options="companiesDetailDataArray" extra-settings="settings"
                          selected-model="subrequirement.selected_preferred_company_sub_sector"
                          ng-click="subSectorPreferredMulticheck(key,$index)" translation-texts="selected_business_type"
                          events="events">
                        </span>
                        <span ng-repeat="selectedName in subrequirement.selected_preferred_company_sub_sector"
                          style="text-align: left; display: inline-block">
                          {{selectedName.name}}
                          <span ng-if="!$last">,</span>
                        </span>
                        <input style="margin-top:10px" ng-change="checkBoxAutoCheck(key,$index)" type="text"
                          class="form-control" placeholder="Other Preferred Company"
                          ng-if="subrequirement.otherPreferredCompany" name="other_preferred_company"
                          id="other_preferred_company" ng-model="subrequirement.preferred_company_other">
                      </td>
                      <td class="alignment">
                        <select class="form-control" name="lead_L4" id="lead_L4" ng-model="subrequirement.L4"
                          style="width:150px;">
                          <option ng-repeat="lead_L4 in leads_Data_1.L4" value="{{lead_L4}}">
                            {{lead_L4}}
                          </option>
                          <option ng-if="leads_Data_1.L4.length==0" selected="true" value="NA">NA</option>
                        </select>
                        <div class="tool-tip" ng-init="tips1=false">
                          <h5>Question:<i class="fa fa-question tool-icon" ng-mouseover="tips1=true"
                              ng-mouseleave="tips1=false"></i>
                            <div ng-show="tips1" class="tool-popup">
                              <div>{{leads_Data_1['L4 question']}}</div>
                            </div>
                          </h5>
                        </div>
                      </td>
                      <td class="alignment">
                        <select class="form-control" name="lead_L5" id="lead_L5" ng-model="subrequirement.L5"
                          style="width:150px;">
                          <option ng-repeat="lead_L5 in leads_Data_1.L5" value="{{lead_L5}}">
                            {{lead_L5}}
                          </option>
                          <option ng-if="leads_Data_1.L5.length==0" selected="true" value="NA">NA</option>
                        </select>
                        <div class="tool-tip" ng-init="tips2=false">
                          <h5>Question:<i class="fa fa-question tool-icon" ng-mouseover="tips2=true"
                              ng-mouseleave="tips2=false"></i>
                            <div ng-show="tips2" class="tool-popup">
                              <div>{{leads_Data_1['L5 question']}}</div>
                            </div>
                          </h5>
                        </div>
                      </td>

                      <td class="alignment">
                        <select class="form-control" name="lead_L6" id="lead_L6" ng-model="subrequirement.L6"
                          style="width:150px;">
                          <option ng-repeat="lead_L6 in leads_Data_1.L6" value="{{lead_L6}}">
                            {{lead_L6}}
                          </option>
                          <option ng-if="leads_Data_1.L6.length==0" selected="true" value="NA">NA</option>
                        </select>
                        <div class="tool-tip" ng-init="tips3=false">
                          <h5>Question:<i class="fa fa-question tool-icon" ng-mouseover="tips3=true"
                              ng-mouseleave="tips3=false"></i>
                            <div ng-show="tips3" class="tool-popup">
                              <div>{{leads_Data_1['L6 question']}}</div>
                            </div>
                          </h5>
                        </div>
                      </td>
                      <td class="alignment">
                        {{subrequirement.lead_status}}
                      </td>
                      <td class="alignment">
                        <button type="button" style="margin-bottom:2px" class="btn btn-danger"
                          ng-click="viewCommentsLeadDetails(subrequirement.id,'external')">View / Add</button>
                      </td>

                      <td class="alignment">
                        <button type="button" style="margin-bottom:2px" class="btn btn-danger"
                          ng-click="viewCommentsLeadDetails(subrequirement.id,'internal')">View / Add</button>
                      </td>

                      <td class="alignment">
                        <span style="width:150px;">Name: {{requirement.lead_by.name}} </span>
                        <span style="width:150px;">Number: {{requirement.lead_by.mobile}} </span>
                      </td>
                      <td class="alignment">
                        <select class="form-control" name="organisation" id="representative"
                          ng-model="subrequirement.representative"
                          ng-change="getSourceDataList(subrequirement.representative)"
                          ng-options="data.organisation_id as data.name for data in organisationList | orderBy: 'name'">
                          <option value="" disabled>Select Organisation</option>
                        </select>
                      </td>
                      <td class="alignment">
                        <select class="form-control" name="Source" id="Source_id"
                          ng-model="subrequirement.relationship_manager"
                          ng-options="data.username as data.first_name +' '+ data.last_name for data in userMinimalList | orderBy: 'first_name'">
                          <option value="" disabled>Select Data Source</option>
                        </select>
                      </td>
                      <td class="alignment">
                        <select class="form-control" name="value" id="value"
                          ng-model="subrequirement.call_back_preference" style="width:150px;">
                          <option value="" disabled>Select Call Back Time</option>
                          <option ng-repeat="(key,value) in leads_time.data[lastIndex].call_status track by $index"
                            value="{{value}}">
                            {{value}}
                          </option>
                        </select>
                      </td>
                      <td class="alignment">
                        <input type="number" ng-change="checkBoxAutoCheck(key,$index)"
                          ng-model="subrequirement.lead_price" name="lead_price" class="form-control" placeholder="Price"
                          id="price_id" style="width:150px;">
                        <span ng-if="subrequirement.lead_price">Price (Points): {{subrequirement.lead_price}}</span>
                      </td>

                      <td class="alignment" style="width:300px;">
                        <p> Submitted: {{subrequirement.created_at | date:'medium' }} </p>
                        <p> Ops Verify: {{subrequirement.varified_ops_date | date:'medium'}} </p>
                        <p> Ops Verify Name: {{subrequirement.verified_ops_by_obj.first_name}}
                          {{subrequirement.verified_ops_by_obj.last_name}} </p>
                      </td>

                      <td class="alignment">
                        <button style="margin-bottom:2px" type="button" name="button" class="btn btn-success"
                          ng-if="subrequirement.varified_ops == 'no'" ng-disabled="subrequirement.color_class == 'red'"
                          ng-click="singleOpsVerifyRequirement(subrequirement.id)">Ops Verify</button>
                        <span ng-if="subrequirement.varified_ops == 'yes'">Ops Verified </span>

                        <button style="margin-top:10px" class="btn btn-success" type="button" name="button"
                          class="btn btn-success" ng-click="updateSubSectorRow(subrequirement)">Update</button>

                        <button style="margin-top:10px" type="button" name="button" class="btn btn-success"
                          ng-if="subrequirement.color_class != 'red'"
                          ng-click="singleRemoveSubSector(subrequirement.id,key,$index)">Remove</button>

                        <button style="margin-top:10px" type="button" name="button" class="btn btn-success"
                          ng-if="subrequirement.color_class == 'red'"
                          ng-click="singleRestoreSubSector(subrequirement.id,key,$index)">Restore</button>
                      </td>
                      <tr ng-show="detailedShow[key]" ng-repeat-end>
                        <td colspan="17">
                          <button class="btn btn-success" id="update_{{key}}" ng-disabled="subSectorCheck || updateDisable"
                            ng-click="updateSubSector(requirement.requirements)">Update
                          </button>
                          <button style="margin-bottom:2px" id="verify_{{key}}" type="button" name="button"
                            class="btn btn-success" ng-disabled="subSectorCheck || updateDisable"
                            ng-click="checkOpsVerifyRequirement(requirement.requirements)"><span
                              ng-if="!opsVerifyButtonDiable">Ops Verify</span>
                            <span ng-if="opsVerifyButtonDiable">Ops Verified</span></button>
                          <button style="margin-bottom:2px" id="remove_{{key}}" type="button" name="button"
                            ng-disabled="subSectorCheck || removeSubSectorDiable" class="btn btn-danger"
                            ng-click="removeSubSectorRequirement(requirement.requirements,key)">Remove</button>

                          <button style="margin-bottom:2px" id="restore_{{key}}" type="button" name="button"
                            class="btn btn-success"
                            ng-click="restoreMultiRequirement(requirement.requirements,key)">Restore</button>

                          <button style="margin-bottom:2px" type="button" name="button" class="btn btn-success btn-small"
                            data-target="#pocModal" data-toggle="modal">Add POC</button>
                        </td>
                      </tr>
                    </tr>
                  </tr>
                </tbody>
                <tbody>
                  <tr ng-if="NewcountBrowsedRow==true">
                    <td class="alignment">
                      <input type="checkbox" name="newBrowsedCheck"
                        ng-click="newCheckboxSubmitted(newRequirement.newBrowsedCheck)" id="browsedCheckId"
                        ng-model="newRequirement.newBrowsedCheck">
                    </td>
                    <td class="alignment">
                      <select class="form-control" ng-model="SectorName"
                        ng-click="NewbrowsedPreferredPartner(SectorName);"
                        ng-options="sector.business_type for sector in browsedSectorList" track by "$index">
                      </select>
                    </td>
                    <td class="alignment">NA

                    </td>
                    <td class="alignment">
                      <select class="form-control" ng-model="newRequirement.current_patner_id" style="width:100px;">
                        <option value="" disabled>Select Current Partner</option>
                        <option ng-repeat="cpartner in preferred_partnerList track by $index"
                          value="{{cpartner.organisation_id}}">
                          {{cpartner.label}}
                        </option>
                        <input style="margin-top:10px" type="text" class="form-control"
                          placeholder="Other Current Company" ng-model="newRequirement.current_patner_other">
                    </td>

                    <td class="alignment">
                      current_patner_feedback<br>
                      <span>Reason:NA</span>
                    </td>
                    <td class="alignment">
                      <span style="width:150px;"
                        class="multiselectDropdown multiselectDropdown-style multiselectDropdown-123"
                        style="color:red;width:100%;margin-left:20px;" ng-click="newbrowsedMulticheck($index)"
                        ng-dropdown-multiselect="" options="preferred_partnerList" extra-settings="settings"
                        selected-model="requirementCompany" events="events"
                        translation-texts="selected_business_type"></span>
                      <span ng-repeat="selectedName in requirementCompany"
                        style="text-align: left; display: inline-block">
                        {{selectedName.label}}
                        <span ng-if="!$last">,</span>
                      </span>
                      </select>
                    </td>
                    <td class="alignment">
                      <select class="form-control" ng-model="newRequirement.l1_answers">
                        <option value="" disabled>Select</option>
                        <option ng-repeat="lead_L4 in leads_Data_1.L4" value="{{lead_L4}}">
                          {{lead_L4}}
                        </option>
                      </select>
                      <div class="tool-tip" ng-init="tipsL4=false">
                        <h5>Question:<i class="fa fa-question tool-icon" ng-mouseover="tipsL4=true"
                            ng-mouseleave="tipsL4=false"></i>
                          <div ng-show="tipsL4 && leads_Data_1['L4 question'].length>0" class="tool-popup"
                            style="position: inherit;">
                            <div>{{leads_Data_1['L4 question']}}</div>
                          </div>
                        </h5>
                      </div>
                    </td>

                    <td class="alignment">
                      <select class="form-control" ng-model="newRequirement.l1_answer_2">
                        <option value="" disabled>Select</option>
                        <option ng-repeat="lead_L5 in leads_Data_1.L5" value="{{lead_L5}}">
                          {{lead_L5}}
                        </option>
                      </select>
                      <div class="tool-tip" ng-init="tipsL5=false">
                        <h5>Question:<i class="fa fa-question tool-icon" ng-mouseover="tipsL5=true"
                            ng-mouseleave="tipsL5=false"></i>
                          <div ng-show="tipsL5 && leads_Data_1['L5 question'].length>0" class="tool-popup"
                            style="position: inherit;">
                            <div>{{leads_Data_1['L5 question']}}</div>
                          </div>
                        </h5>
                      </div>
                    </td>
                    <td class="alignment">
                      <select class="form-control" ng-model="newRequirement.l2_answers">
                        <option value="" disabled>Select</option>
                        <option ng-repeat="lead_L6 in leads_Data_1.L6" value="{{lead_L6}}">
                          {{lead_L6}}
                        </option>
                      </select>
                      <div class="tool-tip" ng-init="tipsL6=false">
                        <h5>Question:<i class="fa fa-question tool-icon" ng-mouseover="tipsL6=true"
                            ng-mouseleave="tipsL6=false"></i>
                          <div ng-show="tipsL6 && leads_Data_1['L6 question'].length>0" class="tool-popup"
                            style="position: inherit;">
                            <div>{{leads_Data_1['L6 question']}}</div>
                          </div>
                        </h5>
                      </div>
                    </td>
                    <td class="alignment">
                      Lead
                    </td>
                    <td class="alignment">
                      <textarea placeholder="Comments" class="form-control" style="width:150px;"
                        ng-model="newRequirement.comment" cols="50">
                     </textarea>
                    </td>
                    <td class="alignment">
                      <textarea placeholder="Internal Comments" class="form-control" style="width:150px;"
                        ng-model="newRequirement.internal_comment" cols="50">
                     </textarea>
                    </td>
                    <td class="alignment">
                      <p> Name: </p>
                      <p> Phone:</p>
                    </td>
                    <td class="alignment">
                      <select class="form-control" name="organisation" id="representative"
                        ng-model="newRequirement.representative"
                        ng-change="getSourceDataList(newRequirement.representative)"
                        ng-options="data.organisation_id as data.name for data in organisationList | orderBy: 'name'">
                        <option value="" disabled>Select Organisation</option>
                      </select>
                    </td>
                    <td class="alignment">
                      <select class="form-control" name="Source" id="Source_id"
                        ng-model="newRequirement.relationship_manager"
                        ng-options="data.username as data.first_name +' '+ data.last_name for data in userMinimalList | orderBy: 'first_name'">
                        <option value="" disabled>Select Data Source</option>
                      </select>
                    </td>
                    <td class="alignment">
                      <select class="form-control" name="value" id="value"
                        ng-model="newRequirement.call_back_preference" style="width:150px;">
                        <option value="" disabled>Select Call Back Time</option>
                        <option ng-repeat="(key,value) in leads_time.data[lastIndex].call_status track by $index"
                          value="{{value}}">
                          {{value}}
                        </option>
                      </select>
                    </td>
                    <td class="alignment">
                      <input type="number" ng-change="checkBoxAutoCheck(key,$index)"
                        ng-model="newRequirement.lead_price" name="lead_price" class="form-control" placeholder="Price"
                        id="price_id" style="width:150px;">
                      <span ng-if="newRequirement.lead_price">Price (Points): {{newRequirement.lead_price}}</span>
                    </td>

                    <td class="alignment" style="width:300px;">
                      Null
                    </td>
                    <td class="alignment">
                      <button style="margin-top:10px" type="button" name="button" class="btn btn-success"
                        ng-disabled="!newRequirementCheckbox" ng-click="newLeadCreated(newRequirement)">Submit</button>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div class="">
                <button class="btn btn-danger" ng-click="SubmittedaddBrowsedRow()">{{NewaddRemoveBtn}}</button>
                <button class="btn btn-success" ng-disabled="!newRequirementCheckbox"
                  ng-click="newLeadCreated(newRequirement)">Submit</button>
              </div>
            </form>
          </div>


          <div class="modal-body col-md-4 table-responsive browsed_leads_main" style="width: 100%; min-height: 200px;">
            <form name="myForms">
              <h4 class="modal-title">Browsed Leads</h4>
              <table class="table table-bordered submitted_lead_table" name="contactForm">
                <thead>
                  <tr>
                    <th ng-repeat="header in requirement_browsed_headings" class="col-md-2 alignment">
                      <b>{{header.header}}</b>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="browsed in browsedDetailData">
                    <td class="alignment">
                      <input type="checkbox" name="browsedCheck" ng-click="checkboxBrowesLeadCheck()"
                        id="browsedCheckId" ng-model="browsed.browsedCheck">
                    </td>
                    <td class="alignment">
                      {{filterBrowsedLeadData(browsed.sector_id)}}
                    </td>
                    <td class="alignment">
                      <p ng-if="browsed.sub_sector_name">{{browsed.sub_sector_name}}</p>
                      <p ng-if="!browsed.sub_sector_name">NA</p>
                    </td>

                    <td class="alignment">
                      <select class="form-control" name="current_company_{{$index}}" id="current_company_id_{{$index}}"
                        ng-change="browsCheckBoxAutoCheck($index)" ng-model="browsed.current_patner_id"
                        style="width:100px;">
                        <option value="" disabled>Select Current Partner</option>
                        <option ng-if="browsed.sector_id==cpartner.sector || (browsed.sector_id==null)"
                          ng-repeat="cpartner in companiesDetailDataBrowsed track by $index"
                          value="{{cpartner.organisation_id}}">
                          {{cpartner.name}}
                        </option>
                      </select>
                      <input style="margin-top:10px" type="text" ng-change="browsCheckBoxAutoCheck($index)"
                        class="form-control" placeholder="Other Current Company"
                        ng-if="browsed.current_patner_id == '' || !browsed.current_patner_id" name="currentCompanyOther"
                        id="currentCompanyOtherId" ng-model="browsed.current_patner_other">
                    </td>

                    <td class="alignment">
                      {{browsed.current_patner_feedback}}<br>
                      <span
                        ng-if="browsed.current_patner_feedback_reason">Reason:{{browsed.current_patner_feedback_reason}}</span>
                      <span ng-if="!browsed.current_patner_feedback_reason">Reason:NA</span>
                    </td>

                    <td class="alignment">
                      {{companyBrowseData(browsed.sector_id)}}
                      <span style="width:150px;"
                        class="multiselectDropdown multiselectDropdown-style multiselectDropdown-123"
                        style="color:red;width:100%;margin-left:20px;" ng-click="browsedMulticheck($index)"
                        ng-dropdown-multiselect="" options="companiesBrowseDetailDataArray" extra-settings="settings"
                        selected-model="browsed.selected_preferred_company" translation-texts="selected_business_type"
                        events="events">
                      </span>
                      <span ng-repeat="selectedName in browsed.selected_preferred_company"
                        style="text-align: left; display: inline-block">
                        {{selectedName.name}}
                        <span ng-if="!$last">,</span>
                      </span>
                      <input style="margin-top:10px" ng-change="browsCheckBoxAutoCheck($index)" type="text"
                        class="form-control" placeholder="Other Preferred Company"
                        ng-if="browsed.otherPreferredCompanyBrowsed" name="other_preferred_company"
                        id="other_preferred_company" ng-model="browsed.prefered_patner_other">
                    </td>

                    <td class="alignment">
                      <select class="form-control" ng-model="browsed.l1_answers">
                        <option value="" disabled>Select</option>
                        <option ng-repeat="lead_L4 in filterLeadData[browsed.sector_id].L4 track by $index"
                          value="{{lead_L4}}">
                          {{lead_L4}}
                        </option>
                      </select>
                    </td>
                    <td class="alignment">
                      <select class="form-control" ng-model="browsed.l1_answer_2">
                        <option value="" disabled>Select</option>
                        <option ng-repeat="lead_L5 in filterLeadData[browsed.sector_id].L5" value="{{lead_L5}}">
                          {{lead_L5}}
                        </option>
                      </select>
                    </td>
                    <td class="alignment">
                      <select class="form-control" ng-model="browsed.l2_answers">
                        <option value="" disabled>Select</option>
                        <option ng-repeat="lead_L6 in filterLeadData[browsed.sector_id].L6" value="{{lead_L6}}">
                          {{lead_L6}}
                        </option>
                      </select>
                    </td>
                    <td class="alignment">
                      <p> Name: {{browsed.lead_by_name}}</p>
                      <p> Phone: {{browsed.phone_number}}</p>
                    </td>

                    <td class="alignment">
                      <textarea placeholder="Comments" class="form-control" style="width:150px;"
                        ng-model="browsed.comment" ng-change="browsCheckBoxAutoCheck($index)" rows="4" cols="50">
                     </textarea>
                    </td>

                    <td class="alignment" style="width:300px;">
                      <p>Lead Entry:{{browsed.created_at | date:'medium'}}</p>
                    </td>
                  </tr>
                  <tr ng-if="countBrowsedRow==true">

                    <td class="alignment">
                      <input type="checkbox" name="newBrowsedCheck" ng-click="newCheckboxBrowesLeadCheck($index)"
                        id="browsedCheckId" ng-model="newbrowsed.newBrowsedCheck">
                    </td>
                    <td class="alignment">
                      <select class="form-control" ng-model="SectorName" ng-click="browsedPreferredPartner(SectorName);"
                        ng-options="sector.business_type for sector in browsedSectorList" track by "$index">
                      </select>
                    </td>
                    <td class="alignment">NA
                    </td>
                    <td class="alignment">
                      <select class="form-control" ng-model="newbrowsed.current_patner_id" style="width:100px;">
                        <option value="" disabled>Select Current Partner</option>
                        <option ng-repeat="cpartner in preferred_partnerList track by $index"
                          value="{{cpartner.organisation_id}}">
                          {{cpartner.label}}
                        </option>
                        <input style="margin-top:10px" type="text" class="form-control"
                          placeholder="Other Current Company" ng-model="newbrowsed.preferred_company_other">
                    </td>

                    <td class="alignment">
                      current_patner_feedback<br>
                      <span>Reason:NA</span>
                    </td>
                    <td class="alignment">
                      <span style="width:150px;"
                        class="multiselectDropdown multiselectDropdown-style multiselectDropdown-123"
                        style="color:red;width:100%;margin-left:20px;" ng-click="newbrowsedMulticheck($index)"
                        ng-dropdown-multiselect="" options="preferred_partnerList" extra-settings="settings"
                        selected-model="SelectedCompany" events="events"
                        translation-texts="selected_business_type"></span>
                      <span ng-repeat="selectedName in SelectedCompany" style="text-align: left; display: inline-block">
                        {{selectedName.label}}
                        <span ng-if="!$last">,</span>
                      </span>
                    </td>
                    <td class="alignment">
                      <select class="form-control" ng-model="newbrowsed.L4">
                        <option value="" disabled>Select</option>
                        <option ng-repeat="lead_L4 in leads_Data_1.L4" value="{{lead_L4}}">
                          {{lead_L4}}
                        </option>
                      </select>
                    </td>

                    <td class="alignment">
                      <select class="form-control" ng-model="newbrowsed.L5">
                        <option value="" disabled>Select</option>
                        <option ng-repeat="lead_L5 in leads_Data_1.L5" value="{{lead_L5}}">
                          {{lead_L5}}
                        </option>>
                      </select>
                    </td>
                    <td class="alignment">
                      <select class="form-control" ng-model="newbrowsed.L6">
                        <option value="" disabled>Select</option>
                        <option ng-repeat="lead_L6 in leads_Data_1.L6" value="{{lead_L6}}">
                          {{lead_L6}}
                        </option>
                      </select>
                    </td>
                    <td class="alignment">
                      <p> Name: </p>
                      <p> Phone:</p>
                    </td>

                    <td class="alignment">
                      <textarea placeholder="Comments" class="form-control" style="width:150px;"
                        ng-model="newbrowsed.comment" cols="50">
                     </textarea>
                    </td>

                    <td class="alignment" style="width:300px;">
                      <p>Lead Entry:</p>
                    </td>
                  </tr>
                </tbody>
              </table>

              <!-- test -->

              <div class="">
                <button class="btn btn-danger" ng-click="addBrowsedRow()">{{addRemoveBtn}}</button>
                <button class="btn btn-success" ng-disabled="browsedCheck" ng-click="saveBrowsed()">Submit</button>
                <button class="btn btn-success" ng-disabled="browsedCheck"
                  ng-click="updateBrowsed(newbrowsed)">Update</button>
                <button class="btn btn-danger" ng-click="removeBrowsed()" ng-disabled="browsedCheck">Remove</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- end Requirement table -->



<!-- start SuspenseLeads table -->
<div id="SuspenseLeadsModel" class="modal custom-modal-box fade li-popup">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Suspense Leads Details supplierName</h4>
        <hr />
        <div class="modal-body" style="width: 100%; min-height: 200px;">
          <div class="modal-body col-md-4 table-responsive submitted_lead_table"
            style="width: 100%; min-height: 200px;">
            <form name="myForm">
              <!-- test -->
              <h4 class="modal-title">Suspense Leads</h4>
              <table class="table table-bordered" name="contactForm">
                <thead>
                  <tr>
                    <th class="alignment">Sr No</th>
                    <th class="alignment">Phone Number</th>
                    <th class="alignment">Sector</th>
                    <th class="alignment">Sub Sector</th>
                    <th class="alignment">Current Partner</th>
                    <th class="alignment">Current Partner Feedback</th>
                    <th class="alignment">Preferred Partner</th>
                    <th class="alignment">L1 Answers</th>
                    <th class="alignment">L2 Answers</th>
                    <th class="alignment">L3 Answers</th>
                    <th class="alignment">Lead Status</th>
                    <th class="alignment">Lead Source</th>
                    <th class="alignment">Comment</th>
                    <th class="alignment">Time Stamp</th>
                    <th class="alignment">Calling State</th>
                    <th class="alignment">Internal Comment</th>
                    <th class="alignment">Chat</th>
                    <th class="alignment">Action 1</th>
                    <th class="alignment">Action 2</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-if="leadTabData.length > 0 && loading" ng-repeat="leadData in leadTabData" track by "$index">
                    <td>{{$index+serial}}</td>
                    <td class="alignment">{{leadData.phone_number}}</td>
                    <td class="alignment">
                      <select class="form-control" ng-model="suspenseLeadSector"
                        ng-click="suspenseLeadFilterData(suspenseLeadSector,$index);">
                        <option value=""> {{leadData.sector_id?filterBrowsedLeadData(leadData.sector_id):"--Select
                          Sector--"}}</option>
                        <option ng-repeat="sector in sectorList track by $index" value="{{sector}}">
                          {{sector.business_type}}
                        </option>
                      </select>
                    </td>
                    <td class="alignment">
                      <select class="form-control">
                        <option>Option1</option>
                        <option>Option2</option>
                        <option>Option3</option>
                      </select>
                    </td>
                    <td class="alignment">
                      <select class="form-control" name="current_patner_{{$index}}" id="current_patner_id_{{$index}}"
                        ng-model="leadData.current_patner">
                        <option value="" disabled>Select Current Partner</option>
                        <option ng-if="leadData.sector_id==cpartner.sector"
                          ng-repeat="cpartner in companiesData track by $index" value="{{cpartner.organisation_id}}">
                          {{cpartner.name}}
                        </option>
                      </select>
                      <input style="margin-top:10px" type="text" class="form-control"
                        placeholder="Other Current Company" ng-if="leadData.current_patner == ''"
                        name="currentCompanyOther" id="currentCompanyOtherId_{{$index}}"
                        ng-model="leadData.current_patner_other">
                    </td>
                    <td class="alignment">
                      <select class="form-control" name="current_patner_feedback"
                        id="current_patner_feedback_id_{{$index}}" ng-model="leadData.current_patner_feedback">
                        <option value="" disabled>Select Current Partner Feedback</option>
                        <option ng-repeat="cpartnerfeedback in current_patner_feedback track by $index"
                          value="{{cpartnerfeedback}}">
                          {{cpartnerfeedback}}
                        </option>
                      </select>
                    </td>

                    <td class="alignment">
                      {{suspenseLeadsPreferredPartner(leadData.sector_id)}}
                      <span style="width:150px;"
                        class="multiselectDropdown multiselectDropdown-style multiselectDropdown-123"
                        style="color:red;width:100%;margin-left:20px;" ng-dropdown-multiselect=""
                        options="companiessuspenseLeads" extra-settings="dropdownSettings"
                        selected-model="leadData.selected_preferred_patner" ng-click="leadPreferredMulticheck($index)"
                        translation-texts="selected_business_type" events="events"></span>
                      <span ng-repeat="selectedName in leadData.selected_preferred_patner" class="custom-dropdown"
                        style="text-align: left; display: inline-block">
                        {{selectedName.name}}
                        <span ng-if="!$last">,</span>
                      </span>
                      <input style="margin-top:10px" type="text" class="form-control"
                        placeholder="Other Preferred Company" ng-if="leadData.otherPreferredPatner"
                        name="other_preferred_company" id="other_preferred_company_{{$index}}"
                        ng-model="leadData.prefered_patner_other">
                    </td>
                    <td class="alignment">
                      <select class="form-control" ng-model="leadData.L4">
                        <option value="" disabled>Select</option>
                        <option ng-repeat="lead_L4 in filterLeadData[leadData.sector_id].L4" value="{{lead_L4}}">
                          {{lead_L4}}
                        </option>
                      </select>

                    </td>

                    <td class="alignment">
                      <select class="form-control" ng-model="leadData.L5">
                        <option value="" disabled>Select</option>
                        <option ng-repeat="lead_L5 in filterLeadData[leadData.sector_id].L5" value="{{lead_L5}}">
                          {{lead_L5}}
                        </option>
                      </select>
                    </td>
                    <td class="alignment">
                      <select class="form-control" ng-model="leadData.L6">
                        <option value="" disabled>Select</option>
                        <option ng-repeat="lead_L6 in filterLeadData[leadData.sector_id].L6" value="{{lead_L6}}">
                          {{lead_L6}}
                        </option>
                      </select>
                    </td>

                    <td class="alignment">
                      {{leadData.lead_status}}
                    </td>
                    <td class="alignment">
                      <select class="form-control" name="Source" id="Source_id" ng-model="leadData.lead_source"
                        ng-options="data.username as data.first_name +' '+ data.last_name for data in userMinimalList | orderBy: 'first_name'">
                        <option value="" disabled>Select Data Source</option>
                      </select>
                    </td>
                    <td class="alignment">
                      <textarea placeholder="Comment" class="form-control" ng-model="leadData.comment" rows="4"
                        cols="50">
                      </textarea>
                    </td>
                    <td class="alignment">
                      <p> Submitted: {{leadData.created_at | date:'medium' }} </p>
                    </td>
                    <td class="alignment">
                      <p> {{leadData.calling_state }}

                        {{leadData.calling_state_time }}
                      </p>
                    </td>
                    <td class="alignment">
                      <textarea placeholder="Internal Comment" class="form-control" ng-model="leadData.internal_comment"
                        rows="4" cols="50">
                      </textarea>
                    </td>

                    <td class="alignment">
                      <button style="margin-bottom:2px" type="button" name="button" class="btn btn-info">View &
                        Intervene</button>
                    </td>

                    <td class="alignment">
                      <button style="margin-bottom:2px" type="button" name="button" class="btn btn-success btn-small"
                        data-target="#companyDetailModal" ng-click="supplierForAddUpdate($index)"
                        data-toggle="modal">Add/Update Supplier</button>
                      <button style="margin-bottom:2px" type="button" name="button" class="btn btn-success btn-small"
                        data-target="#pocModal" ng-click="openAddPoc(leadData._id,leadData.supplier_type)"
                        data-toggle="modal">Add POC</button>
                      <button style="margin-bottom:2px" type="button" ng-disabled="leadData.is_updated == 'False'"
                        name="button" class="btn btn-success btn-small">Add RE</button>
                    </td>

                    <td class="alignment">
                      <button style="margin-bottom:2px" type="button" name="button" ng-click="opsVerify(leadData._id)"
                        class="btn btn-success" ng-disabled="leadData.is_updated == 'False'">Ops
                        Verify</button>
                      <button style="margin-bottom:2px" type="button" name="button" class="btn btn-success"
                        ng-click="updateLeadTab($index)">Update</button>
                      <button style="margin-bottom:2px" type="button" name="button" class="btn btn-danger"
                        ng-click="removeSuspenseLead(leadData._id,$index)">Remove</button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </form>
          </div>

          <div class="modal-body col-md-4 table-responsive browsed_leads_main" style="width: 100%; min-height: 200px;">
            <form name="myForms">
              <h4 class="modal-title">Browsed Leads</h4>
              <table class="table table-bordered submitted_lead_table" name="contactForm">
                <thead>
                  <tr>
                    <th class="alignment">Sr No</th>
                    <th class="alignment">Phone Number</th>
                    <th class="alignment">Sector</th>
                    <th class="alignment">Sub Sector</th>
                    <th class="alignment">Current Partner</th>
                    <th class="alignment">Current Partner Feedback</th>
                    <th class="alignment">Preferred Partner</th>
                    <th class="alignment">L1 Answers</th>
                    <th class="alignment">L2 Answers</th>
                    <th class="alignment">L3 Answers</th>
                    <th class="alignment">Lead Status</th>
                    <th class="alignment">Comment</th>
                    <th class="alignment">Time Stamp</th>
                    <th class="alignment">Calling State</th>
                    <th class="alignment">Internal Comment</th>
                    <th class="alignment">Chat</th>
                    <th class="alignment">Action 1</th>
                    <th class="alignment">Action 2</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-if="leadTabDataBrowsed.length > 0" ng-repeat="browseData in leadTabDataBrowsed" track
                    by "$index">
                    <td>{{$index+serial}}</td>
                    <td class="alignment">{{browseData.phone_number}}</td>
                    <td class="alignment">
                      <select class="form-control" ng-model="suspenseBrowsedSector"
                        ng-click="suspenseBrowsedLeadSector(suspenseBrowsedSector,$index);">
                        <option value=""> {{browseData.sector_id?filterBrowsedLeadData(browseData.sector_id):"--Select
                          Sector--"}}</option>
                        <option ng-repeat="sector in sectorList track by $index" value="{{sector}}">
                          {{sector.business_type}}
                        </option>
                      </select>
                    </td>
                    <td class="alignment">
                      <select class="form-control">
                        <option>Option1</option>
                        <option>Option2</option>
                        <option>Option3</option>
                      </select>
                    </td>
                    <td class="alignment">
                      <select class="form-control" name="current_patner_{{$index}}"
                        id="browes_current_patner_id_{{$index}}" ng-model="browseData.current_patner">
                        <option value="" disabled>Select Current Partner</option>
                        <option ng-if="browseData.sector_id==cpartner.sector "
                          ng-repeat="cpartner in companiesData track by $index" value="{{cpartner.organisation_id}}">
                          {{cpartner.name}}
                        </option>
                      </select>
                      <input style="margin-top:10px" type="text" class="form-control"
                        placeholder="Other Current Company" ng-if="browseData.current_patner == ''"
                        name="currentCompanyOther" id="browesCurrentCompanyOtherId_{{$index}}"
                        ng-model="browseData.current_patner_other">
                    </td>
                    <td class="alignment">
                      <select class="form-control" name="current_patner_feedback"
                        id="browes_current_patner_feedback_id_{{$index}}" ng-model="browseData.current_patner_feedback">
                        <option value="" disabled>Select Current Partner Feedback</option>
                        <option ng-repeat="cpartnerfeedback in current_patner_feedback track by $index"
                          value="{{cpartnerfeedback}}">
                          {{cpartnerfeedback}}
                        </option>
                      </select>
                    </td>
                    <td class="alignment">
                      {{suspenseLeadsPreferredPartner(browseData.sector_id)}}
                      <span style="width:150px;"
                        class="multiselectDropdown multiselectDropdown-style multiselectDropdown-123"
                        style="color:red;width:100%;margin-left:20px;" ng-dropdown-multiselect=""
                        options="companiessuspenseLeads" extra-settings="dropdownSettings"
                        selected-model="browseData.selected_preferred_patner" ng-click="leadPreferredMulticheck($index)"
                        translation-texts="selected_business_type" events="events"></span>
                      <span ng-repeat="selectedName in browseData.selected_preferred_patner" class="custom-dropdown"
                        style="text-align: left; display: inline-block">
                        {{selectedName.name}}
                        <span ng-if="!$last">,</span>
                      </span>
                      <input style="margin-top:10px" type="text" class="form-control"
                        placeholder="Other Preferred Company" ng-if="browseData.otherPreferredPatner"
                        name="other_preferred_company" id="browes_other_preferred_company_{{$index}}"
                        ng-model="browseData.prefered_patner_other">
                    </td>
                    <td class="alignment">
                      <select class="form-control" ng-model="browseData.L4">
                        <option value="" disabled>Select</option>
                        <option ng-repeat="lead_L4 in filterLeadData[browseData.sector_id].L4" value="{{lead_L4}}">
                          {{lead_L4}}
                        </option>
                      </select>

                    </td>

                    <td class="alignment">
                      <select class="form-control" ng-model="browseData.L5">
                        <option value="" disabled>Select</option>
                        <option ng-repeat="lead_L5 in filterLeadData[browseData.sector_id].L5" value="{{lead_L5}}">
                          {{lead_L5}}
                        </option>
                      </select>
                    </td>
                    <td class="alignment">
                      <select class="form-control" ng-model="browseData.L6">
                        <option value="" disabled>Select</option>
                        <option ng-repeat="lead_L6 in filterLeadData[browseData.sector_id].L6" value="{{lead_L6}}">
                          {{lead_L6}}
                        </option>
                      </select>
                    </td>


                    <td class="alignment">
                      {{browseData.lead_status}}
                    </td>
                    <td class="alignment">
                      <textarea placeholder="Comment" class="form-control" ng-model="browseData.comment" rows="4"
                        cols="50">
                    </textarea>
                    </td>
                    <td class="alignment">
                      <p> Submitted: {{browseData.created_at | date:'medium' }} </p>
                    </td>
                    <td class="alignment">
                      <p> {{browseData.calling_state }}

                        {{browseData.calling_state_time }}
                      </p>
                    </td>
                    <td class="alignment">
                      <textarea placeholder="Internal Comment" class="form-control"
                        ng-model="browseData.internal_comment" rows="4" cols="50">
                    </textarea>
                    </td>
                    <td class="alignment">
                      <button style="margin-bottom:2px" type="button" name="button" class="btn btn-info">View &
                        Intervene</button>
                    </td>
                    <td class="alignment">
                      <button style="margin-bottom:2px" type="button" name="button" class="btn btn-success btn-small"
                        data-target="#companyDetailModal" ng-click="supplierForAddUpdate($index)"
                        data-toggle="modal">Add/Update Supplier</button>
                      <button style="margin-bottom:2px" type="button" name="button" class="btn btn-success btn-small"
                        data-target="#pocModal" ng-click="openAddPoc(browseData._id)"
                        ng-disabled="browseData.is_updated == 'False'" data-toggle="modal">Add POC</button>
                      <button style="margin-bottom:2px" type="button" ng-disabled="browseData.is_updated == 'False'"
                        name="button" class="btn btn-success btn-small">Add RE</button>
                    </td>
                    <td class="alignment">
                      <button style="margin-bottom:2px" type="button" name="button" ng-click="opsVerify(browseData._id)"
                        class="btn btn-success" ng-disabled="browseData.is_updated == 'False'">Transfer</button>
                      <button style="margin-bottom:2px" type="button" name="button" class="btn btn-success"
                        ng-click="updateLeadTab($index)">Update</button>
                      <button style="margin-bottom:2px" type="button" name="button" class="btn btn-danger"
                        ng-click="removeSuspenseLead(browseData._id,$index)">Remove</button>
                    </td>
                  </tr>
                </tbody>
              </table>
              <dir-pagination-controls max-size="10"
                on-page-change="pageChangedSuspenseLead(userChatData.phone_number,newPageNumber,False)"
                direction-links="true" boundary-links="true" pagination-id="browseDataPaginate">
              </dir-pagination-controls>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- end SuspenseLeads table -->

<!-- client comment  Modal -->
<div id="viewCommentsLeadDetails" class="modal fade theme-modal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-red">
        <h4>View Comments</h4>
        <button type="button" class="close btn-close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="modalBodyBox">
          <h3>Client Comments</h3>
          <div class="table-h-scroll">
            <table class="table-data">
              <tr ng-repeat="item in externalComment">
                <td>
                  <div>
                    <p>{{item.comment}}</p>
                    <i style="margin-left: auto;     margin-right: 0;     float: right;     font-size: 16px;"
                      ng-click="deleteBasicComment(item.id,req_id_detail)" class="fa fa-trash fa-2x"></i>
                  </div>
                  <div>
                    <img ng-src="{{userIcon}}">
                    <b>{{item.comment_by}}:</b>
                    <span><small>{{item.created_at|date:'medium'}}</small></span>
                  </div>
                </td>
              </tr>
            </table>
          </div>
          <div style="margin-top: 15px;">
            <textarea class="field" rows="2" cols="200" ng-model="mymodel.comment" value=""
              placeholder="Write here.."></textarea>
            <button class="smallBtn" type="button" ng-click="commentValueDetails(mymodel,id_detail,req_id_detail)">Add
              Comment</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>