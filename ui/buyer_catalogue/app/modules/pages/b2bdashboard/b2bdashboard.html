<div>
  <div ng-loading="loading"></div>
  <!--For displaying loading icon-->
  <main ng-show="!isEmpty" ng-class="{ 'menu-collapsed': $baSidebarService.isMenuCollapsed() }" ng-if="loading">
    <div class="wrapperBox">
      <div ng-show="isEmpty" style="text-align:center;">
        <h2>{{msg}}</h2>
      </div>
      <nav-bar></nav-bar>
      <div class="middle-section">

        <div class="body-bg"></div>




        <div class="al-main b2b-dash">
          <div class="al-content">
            <uib-tabset class="dashboard-tab" active="selectTabIndex.value">
              <uib-tab index="0">
                <uib-tab-heading>
                  <!-- <h5>New Leads</h5> -->
                  <h5 ng-click="changeLeadTab('sync')">Leads (Basic)</h5>
                </uib-tab-heading>
                <div class="">
                  <ul class="licence_detail_bx">
                    <li ng-class="decisionPendingTab ? 'active_detail' : ''"
                      ng-click="changeLeadTab('decisionPending')">Leads - Decision Pending</li>
                    <li ng-class="newLeadsTab ? 'active_detail' : ''" ng-click="changeLeadTab('newLeads')">New Leads
                    </li>
                  </ul>
                </div>
                <div class="row panel-hide">
                  <div ng-if="newLeadsTab">
                    <div class="row">
                      <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-2 dashboard-side-label">
                      </div>
                      <div class="col-xlg-10 col-lg-10 col-md-10 col-sm-10 col-xs-10">
                        <!-- <div class="row zeroCampAct">
                        <h1>NO LEAD ACTIVITY !!</h1>
                      </div> -->
                      </div>
                    </div>
                    <!-- start b2b code -->

                    <!-- end b2b code -->
                    <div class="row">
                      <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-2 dashboard-side-label">
                        <h4 style="margin-left:140px;">Select Date </h4>
                      </div>
                      <div class="col-xlg-10 col-lg-10 col-md-10 col-sm-10 col-xs-10">
                        <div class="row">
                          <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-6" style="margin-left:140px;">
                            <div class="form-group has-success">
                              <div class="pie-chart-item-container ng-scope">
                                <div class="custom-panel">
                                  <uib-accordion close-others="oneAtATime">
                                    <div uib-accordion-group panel-class="panel panel-blur date-grid-tab custom-panel"
                                      id="custompanelmobile">
                                      <div uib-accordion-heading class="container">
                                        <div class="pie-chart-item ng-scope">
                                          <h5 style="margin-left:-10px">
                                            <span style="color:#ffffff;" class="glyphicon glyphicon-backward"
                                              ng-click="getRecentActivity(pre)" data-toggle="tooltip"
                                              title="Go To Previous Activity!"></span>
                                            <span style="color:#ffffff;" class="glyphicon glyphicon-chevron-left"
                                              ng-click="getDate(pre)"></span>
                                            <span style="margin-left:10px;margin-right:10px;">{{date|date :
                                              "dd-MM-yyyy"}}</span>
                                            <span style="color:#ffffff;" class="glyphicon glyphicon-chevron-right"
                                              ng-click="getDate(next)"></span>
                                            <span style="color:#ffffff;" class="glyphicon glyphicon-forward"
                                              ng-click="getRecentActivity(next)" data-toggle="tooltip"
                                              title="Go To Next Activity!"></span>
                                            <!-- <span style="color:#ffffff;left:16px;margin-top:1px;"
                                                  class="glyphicon glyphicon-calendar pull-right" ng-click="visible=!visible;"> -->
                                            <div ng-class="{'is-visible':visible}" class="menu">
                                              <table class="table-responsive table table-bordered sidePanelTable"
                                                style="width:300px;">
                                                <thead>
                                                  <tr>
                                                    <td style="color:#ffffff !important;" style="width:20px">DATE</td>
                                                    <td style="width:20px">
                                                      <button type="button" name="button" class="col-xs-5"
                                                        style="margin: 0px 9px 0px -1px;width:80px;height:70px;color:black;background-color:#ffe000;">Total
                                                        Release (%)</button>

                                                    </td>

                                                  </tr>
                                                </thead>
                                                <tbody>
                                                  <tr ng-repeat="(key,item) in historyData" ng-if="$index < 15">
                                                    <td class="col-xs-3" style="background-color: #8e1921;"><a
                                                        ng-click="getDateData(key)">{{key| date :'d-MMM-yy'}}</a></td>
                                                    <td class="col-xs-2">
                                                      <button class="col-xs-5 " style="width:80px;height:35px;"
                                                        id="greenColor"
                                                        ng-if="item['RELEASE'].actual/item['RELEASE'].total*100==100"
                                                        type="button" name="button"
                                                        class="btn btn-danger">{{item['RELEASE'].actual/item['RELEASE'].total*100|limitTo:4||NA}}
                                                        &#10004;</button>
                                                      <button class="col-xs-5 " style="width:80px;height:35px;"
                                                        id="lightGreen"
                                                        ng-if="item['RELEASE'].actual/item['RELEASE'].total*100 >= 75 && item['RELEASE'].actual/item['RELEASE'].total*100 != 100"
                                                        type="button" name="button">
                                                        {{item['RELEASE'].actual/item['RELEASE'].total*100|limitTo:4||NA}}</button>
                                                      <button class="col-xs-5 " style="width:80px;height:35px;"
                                                        id="yellow"
                                                        ng-if="item['RELEASE'].actual/item['RELEASE'].total*100 >= 50 && item['RELEASE'].actual/item['RELEASE'].total*100 < 75"
                                                        type="button" name="button">
                                                        {{item['RELEASE'].actual/item['RELEASE'].total*100|limitTo:4||NA}}</button>
                                                      <button class="col-xs-5 " style="width:80px;height:35px;"
                                                        id="redColor"
                                                        ng-if="item['RELEASE'].actual/item['RELEASE'].total*100 < 50"
                                                        type="button"
                                                        name="button">{{item['RELEASE'].actual/item['RELEASE'].total*100|limitTo:4||NA}}</button>
                                                      <button class="col-xs-5 "
                                                        style="width:80px;height:35px;cursor:default;"
                                                        ng-if="!item['RELEASE'].total" type="button"
                                                        name="button">NA</button>
                                                    </td>

                                                  </tr>
                                                </tbody>
                                              </table>
                                            </div>
                                            <!-- </span> -->
                                          </h5>
                                        </div>
                                      </div>
                                    </div>
                                  </uib-accordion>
                                  <h5 style="margin-left:-10px">
                                    <span style="color:#ffffff;" class="glyphicon glyphicon-backward"
                                      ng-click="getRecentActivity(pre)" data-toggle="tooltip"
                                      title="Go To Previous Activity!"></span>
                                    <span style="color:#ffffff;" class="glyphicon glyphicon-chevron-left"
                                      ng-click="getDate(pre)"></span>
                                    <span style="margin-left:10px;margin-right:10px;">{{date|date :
                                      "dd-MM-yyyy"}}</span>
                                    <span style="color:#ffffff;" class="glyphicon glyphicon-chevron-right"
                                      ng-click="getDate(next)"></span>
                                    <span style="color:#ffffff;" class="glyphicon glyphicon-forward"
                                      ng-click="getRecentActivity(next)" data-toggle="tooltip"
                                      title="Go To Next Activity!"></span>
                                    <span style="color:#ffffff;left:16px;margin-top:1px;"
                                      class="glyphicon glyphicon-calendar pull-right" ng-click="visible=!visible;">
                                      <div ng-class="{'is-visible':visible}" class="menu">
                                        <table class="table-responsive table table-bordered sidePanelTable"
                                          style="width:300px;">
                                          <thead>
                                            <tr>
                                              <td style="color:#ffffff !important;" style="width:20px">DATE</td>
                                              <td style="width:20px">
                                                <button type="button" name="button" class="col-xs-5"
                                                  style="margin: 0px 9px 0px -1px;width:80px;height:70px;color:black;background-color:#ffe000;">Total
                                                  Release (%)</button>

                                              </td>

                                            </tr>
                                          </thead>
                                          <tbody>
                                            <tr ng-repeat="(key,item) in historyData" ng-if="$index < 15">
                                              <td class="col-xs-3" style="background-color: #8e1921;"><a
                                                  ng-click="getDateData(key)">{{key| date :'d-MMM-yy'}}</a></td>
                                              <td class="col-xs-2">
                                                <button class="col-xs-5 " style="width:80px;height:35px;"
                                                  id="greenColor"
                                                  ng-if="item['RELEASE'].actual/item['RELEASE'].total*100==100"
                                                  type="button" name="button"
                                                  class="btn btn-danger">{{item['RELEASE'].actual/item['RELEASE'].total*100|limitTo:4||NA}}
                                                  &#10004;</button>
                                                <button class="col-xs-5 " style="width:80px;height:35px;"
                                                  id="lightGreen"
                                                  ng-if="item['RELEASE'].actual/item['RELEASE'].total*100 >= 75 && item['RELEASE'].actual/item['RELEASE'].total*100 != 100"
                                                  type="button" name="button">
                                                  {{item['RELEASE'].actual/item['RELEASE'].total*100|limitTo:4||NA}}</button>
                                                <button class="col-xs-5 " style="width:80px;height:35px;" id="yellow"
                                                  ng-if="item['RELEASE'].actual/item['RELEASE'].total*100 >= 50 && item['RELEASE'].actual/item['RELEASE'].total*100 < 75"
                                                  type="button" name="button">
                                                  {{item['RELEASE'].actual/item['RELEASE'].total*100|limitTo:4||NA}}</button>
                                                <button class="col-xs-5 " style="width:80px;height:35px;" id="redColor"
                                                  ng-if="item['RELEASE'].actual/item['RELEASE'].total*100 < 50"
                                                  type="button"
                                                  name="button">{{item['RELEASE'].actual/item['RELEASE'].total*100|limitTo:4||NA}}</button>
                                                <button class="col-xs-5 " style="width:80px;height:35px;cursor:default;"
                                                  ng-if="!item['RELEASE'].total" type="button" name="button">NA</button>
                                              </td>

                                            </tr>
                                          </tbody>
                                        </table>
                                      </div>
                                    </span>
                                  </h5>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-2 dashboard-side-label">
                        <h4 style="margin-left:140px;">Lead Count </h4>
                      </div>
                      <div class="col-xlg-10 col-lg-10 col-md-10 col-sm-10 col-xs-10">
                        <div class="row">
                          <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-6" style="margin-left:140px;">
                            <div class="form-group has-success">
                              <div class="pie-chart-item-container ng-scope">
                                <div class="custom-panel">
                                  <uib-accordion close-others="oneAtATime">
                                    <div uib-accordion-group panel-class="panel panel-blur date-grid-tab custom-panel"
                                      id="custompanelmobile">
                                      <div uib-accordion-heading class="container">
                                        <div class="pie-chart-item ng-scope">
                                          <div ng-click="leadCampaignData()">
                                            {{leadCountData.lead_count}}
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </uib-accordion>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-2 dashboard-side-label">
                        <!-- <h4 style="margin-left:140px;">EXISTING CLIENT FEEDBACK COUNT </h4> -->
                        <h4 style="margin-left:140px;">Satisfaction Survey </h4>
                      </div>
                      <div class="col-xlg-10 col-lg-10 col-md-10 col-sm-10 col-xs-10">
                        <div class="row">
                          <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-6" style="margin-left:140px;">
                            <div class="form-group has-success">
                              <div class="pie-chart-item-container ng-scope">
                                <div class="custom-panel">
                                  <uib-accordion close-others="oneAtATime">
                                    <div uib-accordion-group panel-class="panel panel-blur date-grid-tab custom-panel"
                                      id="custompanelmobile">
                                      <div uib-accordion-heading class="container">
                                        <div class="pie-chart-item ng-scope">
                                          <div ng-click="existingClientFeedbackData()">
                                            {{leadCountData.existing_client_count}}
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </uib-accordion>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- start lead details -->
                    <div ng-hide="leadCampaignTable">
                      <div class="campaigndetailtable">
                        <div class="col-md-12">
                          <div class="panel-heading" style="height:70px;">
                            <h5 style="background:'red';color:white;">Lead Details</h5>
                            <h5 class="pull-right">({{date|date : "dd-MM-yyyy"}})</h5>
                          </div>
                          <br />
                          <input type="text" class="form-control" ng-model="searchQuery" placeholder="search">
                          <br />
                          <div class="table-responsive">
                            <table class="table">
                              <thead>
                                <tr>
                                  <th width: 60px;min-width: 60px;>Index</th>
                                  <th>Campaign Name</th>
                                  <th>Total purchased</th>
                                  <th>Total available</th>
                                </tr>
                              </thead>

                              <tbody>
                                <tr ng-repeat="item in campaignLeadData.campaigns | filter : searchQuery">
                                  <td width: 60px;min-width: 60px;>{{$index + 1}}</td>
                                  <td><a ng-click="getLeadSupplier(item)">{{item.name}}</a>
                                  </td>
                                  <td>{{item.purchased_count}}</td>
                                  <td>{{item.not_purchased_count}}</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- end lead details -->
                    <!-- start lead suppler detail -->
                    <div class="campaigndetailtable" ng-hide="leadSupplierTable">
                      <div class="col-md-12">
                        <div class="panel-heading">
                          <h4><a ng-click="getCampaign(proposalId)" style="color: white;cursor: pointer;">Supplier
                              Details
                              of <span
                                style="color:#ffe000;font-style: italic;text-transform:capitalize;font-weight: 900;text-decoration: underline;">
                                {{campaignName}} </span> Campaign</a></h4><br />
                          <!-- <div class="row">
                          <span class="pull-left"><label for="heading"><small>Campaign Owner :
                              </small><span><small style="color:orange">{{campaignOwner}}</small> </span></label></span>
                          <span class="pull-right"><label for="heading"><small>Principal Vendor :
                              </small><span><small style="color:orange">{{principalVendor}}</small></span></label></span>  
                        </div> -->
                        </div>

                        <div class="table-responsive">
                          <table class="table" id="tablescroll">
                            <thead>
                              <tr>
                                <th>Supplier Name</th>
                                <th>Flat Count / Primary Count</th>
                                <th>Area</th>
                                <th>City</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr ng-repeat="supplier in leadSupplierData">
                                <td><b>{{supplier.supplier_name}}</b></td>
                                <td> {{supplier.unit_primary_count}}</td>
                                <td> {{supplier.area}}</td>
                                <td> {{supplier.city}}</td>

                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                    <!-- end lead suppler detail -->

                    <div ng-hide="existingClientTable">
                      <div class="table-responsive">
                        <table class="table" id="tablescroll">
                          <thead>
                            <tr>
                              <th>Dis-Satisfied Count : {{clientFeedbackData.dissatisfied_count}}</th>
                              <th>Extremely Dis-Satisfied Count : {{clientFeedbackData.extremely_dissatisfied_count}}
                              </th>
                              <th>Satisfied Count : {{clientFeedbackData.satisfied_count}}</th>
                            </tr>
                          </thead>
                        </table>
                      </div>
                    </div>
                  </div>

                </div>
                <div ng-if="decisionPendingTab">
                  <div style="margin-bottom: 15px;float: left; width: 100%;">
                    <div class="col-md-6">
                      <h4 class="panel-title">
                        <!-- <select class="form-control" ng-model="surveyLeadFilter" aria-placeholder="Select Leads,Surveyed Clients" ng-change="setSurveyLeadFilter(surveyLeadFilter.value)">
                          <option ng-selected="aa" disabled='true' value="">Select Leads,Surveyed Clients</option>
                          <option value="Survey">Survey</option>
                          <option value="Leads">Leads</option>
                        </select> -->
                        <select ng-options="supplierType for supplierType in surveyLeadArray"
                          aria-placeholder="Select Leads,Surveyed Clients" ng-model="supplierType" class="form-control"
                          ng-change="surveyLeadFilter(supplierType)">
                        </select>
                      </h4>
                    </div>
                    <div class="col-md-6">
                      <h4 class="panel-title">
                        <select class="form-control" name="supplierType" ng-model="selectedSupplierType.code"
                          value="supplierType.value" ng-change="setSupplierType()">
                          <option value="">Select Supplier Type</option>
                          <option value="{{supplierType.value}}"
                            ng-selected="selectedSupplierType == supplierType.value"
                            ng-repeat="supplierType in supplierTypeCode">{{supplierType.name}}</option>
                        </select>
                      </h4>
                    </div>
                    <!-- <h4 class="panel-title"> -->


                      <!-- <select ng-options="entityType.name for entityType in entityTypes" ng-model="entityType.value"
                      class="form-control" ng-change="setEntityType(entityType.value)"
                      default-option="{{entityType.name}}">  
                    </select> -->

                      <!-- <select class="form-control" name="supplierType" ng-model="entityType.value"
                        value="entityType.value" ng-change="setEntityType(entityType.value)">
                        <option value="">Select Supplier Type</option>
                        <option value="{{entityType.value}}" ng-selected="selectedEntityType == entityType.value"
                          ng-repeat="entityType in supplierTypeCode">{{entityType.name}}</option>
                      </select> -->
                    <!-- </h4> -->
                  </div>
                  <br/>
                  <span style="display: block;margin: 15px;">
                    <input type="text" class="form-control" ng-model="searchQuery" placeholder="search">
                  </span>
                  <br />
                  <div class="table-responsive b2b-table-style">
                    <table class="table">
                      <thead>
                        <tr>
                          <th>Select Multiple</th>
                          <th>Entity Name</th>
                          <th>TOE</th>
                          <th style="width:120px;" class="col-md-2" ng-click="Sort('entity_type')">Primary
                            Count <a><i class="icon-sort" style="color:white;"></i></a></th>
                          <th>Area</th>
                          <th>City</th>
                          <th>Lead Timestamp</th>
                          <th>Current Status</th>
                          <th>Int Comment</th>
                          <th>Phone Number</th>
                          <th>Action</th>
                        </tr>
                        <!-- <tr colspan="9">
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td></td>
                              <td style="width: 100px;"><input ng-model="f.city" class="form-control" placeholder="Search">
                                <hr>
                              </td>
                              
  
                            </tr> -->
                      </thead>
                      <tbody class="data-list" pagination-id="paginate1"
                        dir-paginate="decisionPanding in leadDecisionPandingData |filter:searchQuery | orderBy:sort:reversesort | itemsPerPage:itemsPerPageRecord"
                        total-items="totalrecord" current-page="currentPage" track by "$index">
                        <tr>
                          <td class="alignment"> <input type="checkbox" name="checkBox" id="checkBox_id"
                              ng-click="checkboxCheck($index)" ng-model="decisionPanding.checkStatus"></td>
                          <td class="alignment text-center">{{decisionPanding.entity_name}}</td>
                          <td class="alignment text-center" >{{decisionPanding.entity_type}}</td>
                          <td class="alignment text-center">{{decisionPanding.primary_count}}</td>
                          <td class="alignment text-center">{{decisionPanding.area}}</td>
                          <td class="alignment text-center">{{decisionPanding.city}}</td>
                          <td class="alignment text-center">{{decisionPanding.lead_timestamp}}</td>
                          <td class="alignment text-center">
                            <select ng-change="setValue(value8,decisionPanding.client_comment,decisionPanding._id,decisionPanding.requirement_id)"
                              class="form-control client-status" ng-model="value8">
                              <option ng-repeat="option in listClientStatus" track by "$index">{{option}}</option>
                            </select>
                            <span style="display: none;">{{value8=value8?value8:decisionPanding.macchadalo_client_status}}</span>
                            <span>{{decisionPanding.updated_at?decisionPanding.updated_at:"NA"}}</span>
                          </td>
                          <!-- <td class="alignment text-center">
                            {{decisionPanding.client_comment?decisionPanding.client_comment:"NA"}}
                          </td> -->
                            <!-- <td class="alignment">
                              <textarea rows="2" class="form-control client-comment" value="value1" ng-model="mymodel" 
                                        ng-click="commentValue(mymodel)"
                                        ng-blur="valuechange(mymodel,decisionPanding.macchadalo_client_status,decisionPanding._id,decisionPanding.requirement_id)"
                                        name="" placeholder="Comment">
                                        <span>{{mymodel=mymodel ? mymodel:mymodel==""?"":decisionPanding.macchadalo_client_comment}}</span>
                              </textarea>
                            </td>                -->
                            <td class="alignment">
                                <button type="button" style="margin-bottom:2px" class="btn btn-danger" ng-click="viewComments(decisionPanding._id,decisionPanding.requirement_id)">View / Add</button>
                            </td>

                          <td class="alignment text-center">
                            {{decisionPanding.phone_number?decisionPanding.phone_number:"NA"}}
                          </td>
                          <!-- <td class="alignment"><textarea rows="2" class="form-control client-comment" value="value1" ng-model="mymodel" ng-change="valuechange(mymodel)" name="" placeholder="Comment">{{mymodel=mymodel?mymodel:decisionPanding.client_comment}}</textarea></td> -->
                          <td class="alignment text-center">
                            <button style="margin-bottom:2px" type="button" name="button" class="btn btn-danger"
                              ng-click="acceptDeclineDecisionPanding($index,'Accepted',decisionPanding._id)">Accept</button>
                            <button style="margin-bottom:2px" type="button" name="button" class="btn btn-danger"
                              ng-click="acceptDeclineDecisionPanding($index,'Decline',decisionPanding._id)"
                              ng-if="decisionPanding.client_status!='Decline'">Decline</button>

                            <button style="margin-bottom:2px" type="button" name="button" class="btn btn-danger"
                              disabled ng-if="decisionPanding.client_status=='Decline'">Currently Declined</button>
                          </td>

                        </tr>

                      </tbody>
                    </table>
                    <div style="padding: 8px 0px;color:#000000;">
                      <b>*TOE = Type of Entity </b><br>
                      <b>Int Comment = Internal Comment </b><br>
                      <b>Int Status = Internal Status</b><br>
                      <b>Primary count = Flat count (for RS)</b>                      </b>
                    </div>
                    <dir-pagination-controls max-size="7" directionlinks="true" boundary-links="true"
                      on-page-change="pageChanged(newPageNumber-1)" pagination-id="paginate1">
                    </dir-pagination-controls>
                  </div>
                  <div class="" ng-if="leadDecisionPandingData.length  != 0">
                    <button class="btn btn-danger" ng-click="acceptDeclineMultiple('Accepted')"
                      ng-disabled="!isCheck">Accept</button>
                    <button class="btn btn-danger" ng-click="acceptDeclineMultiple('Decline')"
                      ng-disabled="!isCheck">Decline</button>
                  </div>
                  <div style="text-align: center; margin-top: 10px; color: red;"
                    ng-if="leadDecisionPandingData.length  == 0">
                    Record not Found.
                  </div>
                </div>
              </uib-tab>



              <uib-tab id="uib-tabs-width" ng-click="getCampaignsList()" index="2" ng-hide="true">
                <uib-tab-heading>
                  <h5> Summary</h5>
                </uib-tab-heading>
                <div class="container-fluid">

                  <div class="row">
                    <div class="panel panel-default" style="color:'0000ff'">
                      <div class="col-md-12">

                        <!-- <div class="panel-headding campaign-header">
                              <h3 style="color:rgb(53, 9, 6)">Campaign Details</h3>
                            </div> -->

                        <div class="col-md-12 panel-heading content-title CampaignDetails">
                          <h4 ng-if="!selectedCampaignName" style="text-align:center;">All Campaigns Details</h4>
                          <h4 ng-if="selectedCampaignName" style="text-align:center;">Details Of <span
                              style="text-decoration: underline;font-weight: 900;color:#ffe000;font-style: italic;text-transform:capitalize">{{selectedCampaignName}}
                            </span>
                          </h4>
                          <span>
                            <!-- <div class="row" ng-if="selectedCampaignName">
                              <span class="pull-left"><label for="heading"><small>Campaign Owner :
                                  </small><span><small>{{campaignOwner}}</small> </span></label></span>
                              <span class="pull-right"><label for="heading"><small>Principal Vendor :
                                  </small><span><small>{{principalVendor}}</small></span></label></span>
                            </div> -->
                          </span>
                        </div>
                        <br />
                        <br />

                        <div class="col-md-3">


                          <div class="panel-group" id="accordion">
                            <!-- <div class="panel panel-default">
                              <div ng-if="showCampaignGraph" class="panel-heading" ng-click="getCampaigns()">
                                <h4 class="panel-title">
                                  All Campaigns
                                </h4>

                              </div>
                            </div> -->
                            <!-- <div class="panel panel-default">
                              <div class="row" style="width:100%;margin-left:0px;">
                                <h4 class="panel-title">
                                  <select class="form-control" ng-model="selectedVendor.name"
                                    ng-change="getCampaignsByVendor()">
                                    <option value="">Select Vendor</option>
                                    <option value="{{vendor.vendor_id}}">All</option>
                                    <option value="{{vendor.vendor_id}}" ng-repeat="vendor in vendorsData">
                                      {{vendor.principal_vendor}}</option>
                                  </select>
                                </h4>
                              </div>
                              <div class="animate-show">
                                <div class="panel-bodyDashboard camp-menu-content">
                                  <table class="table">
                                    <tr ng-repeat="vendors in vendorsData">
                                      {{vendors}}
                                    </tr>
                                  </table>
                                </div>
                              </div>
                            </div> -->

                            <!-- <div class="panel panel-default">
                              <div class="row" style="width:100%;margin-left:0px;">
                                <h4 class="panel-title">
                                  <select class="form-control" name="supplierType" ng-model="selectedSupplierType.code"
                                    value="supplierType.value" ng-change="setSupplierType()">
                                    <option value="">Select Supplier Type</option>
                                    <option value="{{supplierType.value}}"
                                      ng-selected="selectedSupplierType == supplierType.value"
                                      ng-repeat="supplierType in supplierTypeCode">{{supplierType.name}}</option>
                                  </select>
                                </h4>
                              </div>

                            </div> -->
                            <div class="panel panel-default"
                              ng-click="getCampaignsMenu(campaignStatus.completed.status)">
                              <div class="panel-heading">
                                <h4 class="panel-title">
                                  Completed Campaigns
                                </h4>
                              </div>
                              <div id="completed" class="animate-show" ng-show="campaignStatus.completed.value">
                                <div class="panel-bodyDashboard camp-menu-content">
                                  <table class="table">
                                    <tr ng-repeat="campaign in campaignListData.completed_campaigns | orderBy: 'name'">
                                      <td ng-click="leadCount(campaign)">
                                        {{campaign.name}}
                                      </td>
                                    </tr>
                                  </table>
                                </div>
                              </div>
                            </div>
                            <div class="panel panel-default" ng-click="getCampaignsMenu(campaignStatus.ongoing.status)">
                              <div class="panel-heading">
                                <h4 class="panel-title">
                                  Ongoing Campaigns
                                </h4>
                              </div>
                              <div id="ongoing" class="animate-show" ng-show="campaignStatus.ongoing.value">
                                <div class="panel-bodyDashboard camp-menu-content">
                                  <table class="table">
                                    <tr ng-repeat="campaign in campaignListData.ongoing_campaigns | orderBy: 'name'">
                                      <td ng-click="leadCount(campaign)">
                                        {{campaign.name}}
                                      </td>
                                    </tr>
                                  </table>
                                </div>
                              </div>
                            </div>

                            <div class="panel panel-default">
                              <div class="panel-heading" ng-click="switchToInventory(campaignStatus.upcoming.status)">
                                <h4 class="panel-title">
                                  Upcoming Campaigns
                                </h4>
                              </div>
                            </div>
                            <div class="panel panel-default">
                              <div class="panel-heading" ng-click="getCampaignsMenu(campaignStatus.onhold.status)">
                                <h4 class="panel-title">
                                  On Hold Campaigns
                                </h4>
                              </div>
                              <div id="onhold" class="animate-show" ng-show="campaignStatus.onhold.value">
                                <div class="panel-bodyDashboard camp-menu-content">
                                  <table class="table">
                                    <tr ng-repeat="campaign in campaignListData.onhold_campaigns | orderBy: 'name'">
                                      <td ng-click="leadCount(campaign)">
                                        {{campaign.name}}
                                      </td>
                                    </tr>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div style="color:red;text-align: center;margin-top: 10px" ng-if="hideDonetOne && hideDonettwo">
                          <h4>Campaign Not Found.</h4>
                        </div>

                        <div class="row col-md-4" ng-hide="hideDonetOne">
                          <nvd3 options="options" data="campaignChartdata"></nvd3>
                          <!-- <nvd3 options="options1" data="campaignChartdata" ng-if="showSingleCampaignChart"></nvd3> -->
                        </div>
                        <div class="col-md-5 LeadsTable" ng-hide="hideDonetOne">
                          <div class="panel-heading content-title">
                            <h5 style="background:'red';color:white;" ng-if="!selectedCampaignName">All Campaign
                              Details </h5>
                            <h5 style="background:'red';color:white;" ng-if="selectedCampaignName"><span
                                style="text-decoration: underline;font-weight: 900;color:#ffe000;font-style: italic;text-transform:capitalize">{{selectedCampaignName}}
                              </span> Campaign
                              Details </h5>
                            <!-- <h5 style="background:'red';color:white;" ng-if="showSingleCampaignChart">Supplier / Leads
                              Details</h5> -->
                          </div>

                          <div class="supplierTable-style">
                            <table class="table-responsive table table-bordered equal-width">
                              <thead>
                                <tr style="font-size:12px;">

                                  <td>Leads Offered (premium) </td>
                                  <td>Leads Purchased</td>
                                  <td>Leads Purchased %</td>
                                  <!-- <td>Leads Assigned</td> -->
                                  <td>Leads Remaining</td>
                                  <td>Leads Remaining %</td>
                                  <!-- <td>Total Points Purchased (ultra)</td>
                                  <td>Overall Licenses Remaining %</td> -->
                                </tr>
                              </thead>
                              <tbody>
                                <tr>

                                  <td>{{AllLeadsData.total_leads}}</td>
                                  <td>{{AllLeadsData.total_leads_purchased}}</td>
                                  <td>{{AllLeadsData.leads_purchased_per}}%</td>
                                  <!-- <td></td> -->
                                  <td>{{AllLeadsData.leads_remain}}</td>
                                  <td>{{AllLeadsData.leads_remain_per}}%</td>
                                  <!-- <td></td>
                                  <td></td> -->
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                        <div class="row col-md-12" ng-hide="hideDonettwo">
                          <div class="col-md-3"></div>
                          <div class="col-md-4">
                            <nvd3 options="feedbackOptions" data="campaignChartdatafeedback"></nvd3>
                            <!-- <nvd3 options="options1" data="campaignChartdata" ng-if="showSingleCampaignChart"></nvd3> -->
                          </div>
                          <div class="col-md-5 LeadsTable">
                            <div class="panel-heading content-title">
                              <h5 style="background:'red';color:white;">Current Client Feedback Summary </h5>
                              <!-- <h5 style="background:'red';color:white;" ng-if="showSingleCampaignChart">Supplier / Leads
                              Details</h5> -->
                            </div>

                            <div class="supplierTable-style">
                              <table class="table-responsive table table-bordered equal-width">
                                <thead>
                                  <tr style="font-size:12px;">
                                    <td>Total Current </td>
                                    <td>Dis Satisfied Purchased (%)</td>
                                    <td>Dis Satisfied Not Purchased</td>
                                    <td>Satisfied</td>
                                    <!-- <td>Total Points Purchased (ultra)</td>
                                    <td>Overall Licenses Remaining %</td> -->
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>

                                    <td>{{leadFeedbackData.total_leads}}</td>
                                    <td>{{leadFeedbackData.dissatisfied_purchased}}
                                      ({{leadFeedbackData.dissatisfied_purchased_per}}%)</td>
                                    <td>{{leadFeedbackData.dissatisfied_not_purchased}}</td>
                                    <td>{{leadFeedbackData.total_satisfied}}</td>
                                    <!-- <td></td>
                                    <td></td> -->


                                  </tr>
                                </tbody>
                              </table>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                    <!-- start lead data -->
                    <div class="" ng-if="showLeadtable">
                      <div class="row">
                        <div class="col-md-12">
                          <div class="campaigndetailtable">
                            <div class="panel-heading" style="height:70px;">
                              <h5 style="background:'red';color:white;text-transform:capitalize"
                                ng-if="selectedCampaignName">Details of Leads
                                Purchased
                                <span
                                  style="color:#ffe000;font-style: italic;text-transform:capitalize;font-weight: 900;text-decoration: underline;">{{selectedCampaignName}}
                                </span>
                              </h5>
                              <h5 style="background:'red';color:white;text-transform:capitalize"
                                ng-if="!selectedCampaignName">Details of All Leads</h5>

                            </div>
                            <br />
                            <input type="text" class="form-control" ng-model="searchQuery" placeholder="search">
                            <br />
                            <div class="table-responsive">
                              <table class="table" cellSpacing="0" cellPadding="0">
                                <thead>
                                  <tr>
                                    <th style="width: 60px;min-width: 60px;">INDEX</th>
                                    <th>Client Name</th>
                                    <th>Area <br> (SubArea)</th>
                                    <th>Client Type</th>
                                    <th>Primary Count</th>
                                    <th>Lead Date</th>
                                    <th>Lead Type</th>
                                  </tr>
                                  <tr colspan="12">
                                    <td style="width: 60px;min-width: 60px"></td>
                                    <td><input ng-model="f.supplier_data.name" class="form-control"
                                        placeholder="Search">
                                      <hr>
                                    </td>
                                    <td><input ng-model="f.supplier_data.area" class="form-control"
                                        placeholder="Search">
                                      <hr>
                                    </td>
                                  </tr>
                                  <hr>
                                </thead>

                                <tbody class="detailedTable">
                                  <div class="row">
                                    <tr
                                      ng-repeat="supplier in supplierData |filter:searchQuery |filter : f | orderBy:sort:reversesort">
                                      <td style="width: 60px;min-width: 60px;">{{$index + 1}}</td>
                                      <td>{{supplier.supplier_data.name}}</td>
                                      <td>{{supplier.supplier_data.area}} <br> ({{supplier.supplier_data.subarea}})</td>
                                      <td>{{supplier.supplier_data.supplier_type_name}}</td>
                                      <td>{{supplier.supplier_data.flat_count}}</td>
                                      <td>{{supplier.lead_date | date:'medium'}}</td>
                                      <td>{{supplier.company_lead_status}}</td>
                                    </tr>

                                  </div>
                                </tbody>
                                <tfoot>
                                  <tr>
                                    <td>TOTAL</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>

                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                  </tr>
                                </tfoot>
                              </table>
                            </div>
                          </div>
                        </div>
                      </div>



                      <div class="row">
                        <div class="col-md-12">
                          <div class="panel-heading content-title">
                            <h5 style="background:'red'" ng-if="selectedCampaignName">Map View for <span
                                style="text-decoration: underline;font-weight: 900;color:#ffe000;font-style: italic;text-transform:capitalize">{{selectedCampaignName}}
                              </span></h5>
                            <h5 style="background:'red'" ng-if="!selectedCampaignName">Map View for All Campaign</h5>
                          </div>
                          <style type="text/css">
                            .angular-google-map-container {
                              height: 550px;
                              color: black;
                            }
                          </style>
                          <!-- <p class="map_icon_map">
                          <span style="color:#000000"> <img
                              src="http://maps.google.com/mapfiles/ms/icons/green-dot.png">Completed</span>
                          <span style="color:#000000"> <img
                              src="http://maps.google.com/mapfiles/ms/icons/orange-dot.png">Upcoming</span>
                          <span style="color:#000000"> <img
                              src="http://maps.google.com/mapfiles/ms/icons/blue-dot.png">Ongoing</span>
                        </p> -->
                          <ui-gmap-google-map center="map.center" zoom="map.zoom" draggable="false" options="options"
                            bounds="map.bounds" control="googlemap">
                            <ui-gmap-window show="show" coords='windowCoords'>
                              <div>
                                <table class="table-responsive table">
                                  <div class="">
                                    <h3>{{space.title.name}}</h3>
                                  </div>
                                  <tr>
                                    <td>{{mapTextFirst}}</td>
                                    <td><small>{{(space.title.leadDate | date:'medium') || 'NA'}}</small>
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>{{mapTextSecond}}</td>
                                    <td><small>{{(space.title.leadType) || 'NA'}}</small>
                                    </td>
                                  </tr>
                                </table>
                              </div>
                            </ui-gmap-window>
                            <ui-gmap-markers models="supplierMarkers" coords="'self'" icon="'icon'" options="'options'"
                              doRebuildAll="true" events="marker.events">
                            </ui-gmap-markers>
                          </ui-gmap-google-map>
                        </div>
                      </div>
                    </div>
                    <!-- end lead data-->

                    <!-- start client feedback data -->
                    <div class="" ng-if="showClientFeedbackTable">
                      <div class="row">
                        <div class="col-md-12">
                          <div class="campaigndetailtable">
                            <div class="panel-heading" style="height:70px;">
                              <h5 style="background:'red';color:white;text-transform:capitalize"
                                ng-if="selectedCampaignName">Details of Leads
                                Purchased
                                <span
                                  style="color:#3bff00c4;font-style: italic;text-transform:capitalize">{{selectedCampaignName}}
                                </span>
                              </h5>
                              <h5 style="background:'red';color:white;text-transform:capitalize"
                                ng-if="!selectedCampaignName">Details of All Leads</h5>

                            </div>

                            <br />
                            <input type="text" class="form-control" ng-model="searchQuery" placeholder="search">
                            <br />
                            <div class="table-responsive">
                              <table class="table" cellSpacing="0" cellPadding="0">
                                <thead>
                                  <tr>
                                    <th style="width: 60px;min-width: 60px;">INDEX</th>
                                    <th>Client Name</th>
                                    <th>Area <br> (SubArea)</th>
                                    <th>Client Type</th>
                                    <th>Primary Count</th>
                                    <th>Survey Date</th>
                                    <th>Satisfaction Level</th>
                                  </tr>
                                  <tr colspan="12">
                                    <td></td>
                                    <td><input ng-model="f.supplier_data.name" class="form-control"
                                        placeholder="Search">
                                      <hr>
                                    </td>
                                    <td><input ng-model="f.supplier_data.area" class="form-control"
                                        placeholder="Search">
                                      <hr>
                                    </td>
                                  </tr>
                                  <hr>
                                </thead>

                                <tbody class="detailedTable">
                                  <div class="row">
                                    <tr
                                      ng-repeat="supplier in supplierData |filter:searchQuery |filter : f | orderBy:sort:reversesort">
                                      <td style="width: 60px;min-width: 60px;">{{$index + 1}}</td>
                                      <td>{{supplier.supplier_data.name}}</td>
                                      <td>{{supplier.supplier_data.area}} <br> ({{supplier.supplier_data.subarea}})</td>
                                      <td>{{supplier.supplier_data.supplier_type_name}}</td>
                                      <td>{{supplier.supplier_data.flat_count}}</td>
                                      <td>{{supplier.lead_date | date:'medium'}}</td>
                                      <td>{{supplier.company_lead_status}}</td>
                                    </tr>

                                  </div>
                                </tbody>
                                <tfoot>
                                  <tr>
                                    <td>TOTAL</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>

                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                  </tr>
                                </tfoot>
                              </table>
                            </div>
                          </div>
                        </div>
                      </div>



                      <div class="row">
                        <div class="col-md-12">
                          <div class="panel-heading content-title">
                            <h5 style="background:'red'" ng-if="selectedCampaignName">Map View for <span
                                style="color:#3bff00c4;font-style: italic;text-transform:capitalize">{{selectedCampaignName}}
                              </span></h5>
                            <h5 style="background:'red'" ng-if="!selectedCampaignName">Map View for All Campaign</h5>
                          </div>
                          <style type="text/css">
                            .angular-google-map-container {
                              height: 550px;
                              color: black;
                            }
                          </style>
                          <!-- <p class="map_icon_map">
                          <span style="color:#000000"> <img
                              src="http://maps.google.com/mapfiles/ms/icons/green-dot.png">Completed</span>
                          <span style="color:#000000"> <img
                              src="http://maps.google.com/mapfiles/ms/icons/orange-dot.png">Upcoming</span>
                          <span style="color:#000000"> <img
                              src="http://maps.google.com/mapfiles/ms/icons/blue-dot.png">Ongoing</span>
                        </p> -->
                          <ui-gmap-google-map center="map.center" zoom="map.zoom" draggable="false" options="options"
                            bounds="map.bounds" control="googlemap">
                            <ui-gmap-window show="show" coords='windowCoords'>
                              <div>
                                <table class="table-responsive table">
                                  <div class="">
                                    <h3>{{space.title.name}}</h3>
                                  </div>
                                  <tr>
                                    <td>{{mapTextFirst}}</td>
                                    <td><small>{{(space.title.leadDate | date:'medium') || 'NA'}}</small>
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>{{mapTextSecond}}</td>
                                    <td><small>{{(space.title.feedback) || 'NA'}}</small>
                                    </td>
                                  </tr>
                                </table>
                              </div>
                            </ui-gmap-window>
                            <ui-gmap-markers models="supplierMarkers" coords="'self'" icon="'icon'" options="'options'"
                              doRebuildAll="true" events="marker.events">
                            </ui-gmap-markers>
                          </ui-gmap-google-map>
                        </div>
                      </div>
                    </div>
                    <!-- end client feedback data -->
                  </div>
                </div>
              </uib-tab>

              <!--START : Performance Metrics -->
              <!-- <uib-tab id="uib-tabs-width" ng-click="getCampaigns()" index="4">
            
          </div>

          </uib-tab> -->
              <!--END : Performance Metrics  -->

              <!-- view leads start -->
              <uib-tab id="uib-tabs-width" ng-click="viewCampaignLeads()" index="3">
                <uib-tab-heading>
                  <h5>Leads (Details)</h5>
                </uib-tab-heading>
                <div class="container-fluid">
                  <div class="panel panel-default">
                    <!-- <div class="col-md-12 "  style="text-align:right;margin-bottom:10px;">
                  <button class="btn btn-danger" ng-click="backToCampaign()">Back To Campaigns</button>
                  </div> -->
                    <div class="col-md-6">
                      <h4 class="panel-title">
                        <!-- <select class="form-control" ng-model="surveyLeadFilter" aria-placeholder="Select Leads,Surveyed Clients" ng-change="setSurveyLeadFilter(surveyLeadFilter.value)">
                          <option ng-selected="aa" disabled='true' value="">Select Leads,Surveyed Clients</option>
                          <option value="Survey">Survey</option>
                          <option value="Leads">Leads</option>
                        </select> -->
                        <select ng-options="supplierType for supplierType in surveyLeadArray"
                          aria-placeholder="Select Leads,Surveyed Clients" ng-model="supplierType" class="form-control"
                          ng-change="surveyLeadFilter(supplierType)">
                        </select>
                      </h4>
                    </div>
                    <!-- <div class="animate-show">
                    <div class="panel-bodyDashboard camp-menu-content">
                        <table class="table">
                            <tr ng-repeat="vendors in vendorsData">
                            {{vendors}}
                            </tr>
                        </table>
                    </div>
                  </div> -->

                    <div class="col-md-6">
                      <h4 class="panel-title">
                        <select class="form-control" name="supplierType" ng-model="selectedSupplierType.code"
                          value="supplierType.value" ng-change="setSupplierType()">
                          <option value="">Select Supplier Type</option>
                          <option value="{{supplierType.value}}"
                            ng-selected="selectedSupplierType == supplierType.value"
                            ng-repeat="supplierType in supplierTypeCode">{{supplierType.name}}</option>
                        </select>
                      </h4>
                    </div>

                  </div><br /><br />
                  <!-- <div class="viewLeadstable" ng-if="showCampaigns"> -->
                  <div class="viewLeadstable b2b-table-style">
                    <div class="table-responsive">
                      <div style="padding: 4px 0px;">
                        <center>
                          <h2 style="color: black;">Current Campaigns</h2>
                        </center>
                      </div>
                      <table class="table ">
                        <thead>
                          <tr>
                            <th style="width: 60px;min-width: 60px;">Index</th>
                            <th style="width:200px;" class="col-md-2">Campaign Name</th>
                            <th ng-click="Sort('start_date')">Start Date <a><i class="icon-sort"
                                  style="color:white;"></i></a></th>
                            <!-- <th>End Date</th> -->
                            <!-- <th>Phase</br>Completed</th> -->
                            <!-- <th>Campaign Status</th> -->
                            <th style="width:100px;" class="col-md-2" ng-click="Sort('supplier_count')">Supplier</br>
                              Count <a><i class="icon-sort" style="color:white;"></i></a></th>
                            <!-- <th style="width:100px;" class="col-md-2" ng-click="Sort('flat_count')">Unit primary
                              Count<a><i class="icon-sort" style="color:white;"></i></a></th>
                            <th style="width:120px;" class="col-md-2" ng-click="Sort('total_leads')">Purchased Survey
                              <a><i class="icon-sort" style="color:white;"></i></a> -->
                            </th>
                            <!-- <th style="width:100px;" class="col-md-2" ng-click="Sort('hot_leads')">Hot Leads <a><i class="icon-sort" style="color:white;"></i></a></th> -->
                            <th class="btn_box_lead_survey_th">View {{filterType}}</th>
                            <th class="btn_box_lead_survey_th">Email {{filterType}}</th>
                            <th class="btn_box_lead_survey_th">Download {{filterType}}</th>

                          </tr>
                          <!-- <tr colspan="9">
                            <td></td>
                            <td><input ng-model="f.name" class="form-control" placeholder="Search">
                              <hr>
                            </td>
                            <td></td>
                            <td></td>
                            <td><input ng-model="f.campaign_status" class="form-control" placeholder="Search">
                              <hr>
                            </td>

                          </tr> -->
                        </thead>
                        <tbody ng-if="leadsDataCampaigns.length > 0 ">
                          <tr style="margin:4px 0px;"
                            dir-paginate="campaign in leadsDataCampaigns|filter : searchQuery | filter : f | orderBy:sort:reversesort | itemsPerPage:10 track by $index ">
                            <td style="width: 60px;min-width: 60px;">{{$index + 1}}</td>
                            <td style="width:200px;" class="col-md-2">{{campaign.name}}</td>
                            <td>{{campaign.start_date|limitTo:10|date:mediumDate}}</td>
                            <!-- <td ng-if="campaign.campaign_status == 'completed'" style="text-transform:capitalize">
                              {{campaign.end_date|limitTo:10|date:mediumDate}}</td>
                            <td ng-if="campaign.camyse_complete}}</td> -->
                            <!-- <td ng-if="campaign.campaign_status == 'on_hold'" style="text-transform:capitalize">OnHold
                            </td>
                            <td ng-if="campaign.campaign_status != 'on_hold'" style="text-transform:capitalize">
                              {{campaign.campaign_status}}</td> -->
                            <td style="width:100px;" class="col-md-2">{{campaign.supplier_count}}</td>
                            <!-- <td style="width:100px;" class="col-md-2">{{campaign.flat_count}}</td>
                            <td style="width:100px;" class="col-md-2">{{campaign.purchased_survey}}</td> -->
                            <!-- <td style="width:100px;" class="col-md-2" >{{campaign.hot_leads}}</td> -->
                            <td class="btn_box_lead_survey">
                              <button class="btn btn-danger" id="viewLeads_{{$index}}"
                                ng-click="setButtonIndex($index,campaign.campaign_id,campaign.name)">
                                <p ng-if="filterType == 'Leads' && filterType != 'Survey' && filterType != 'Feedback'">View Leads</p>
                                <p ng-if="filterType != 'Leads' && filterType == 'Survey' && filterType !='Feedback'">View Survey</p>
                                <p ng-if="filterType != 'Leads' && filterType != 'Survey' && filterType =='Feedback'">View Feedback</p>
                              </button>
                              <!-- <button class="btn btn-danger" ng-hide="$index == buttonIndex" id="viewLeads_{{$index}}"
                                ng-click="setButtonIndex($index)">
                                <p ng-if="filterType == 'Leads'">View Leads</p>
                                <p ng-if="filterType != 'Leads'">View Survey</p>
                              </button>
                              <button class="btn btn-danger" ng-if="$index == buttonIndex"
                                ng-click="getPurchasedNotPurchasedLead(campaign.campaign_id,campaign.name,'yes')">
                                <p ng-if="filterType == 'Leads'">View Leads Purchased</p>
                                <p ng-if="filterType != 'Leads'">View Survey Purchased</p>
                              </button>
                              <button class="btn btn-danger" ng-if="$index == buttonIndex"
                                ng-click="getPurchasedNotPurchasedLead(campaign.campaign_id,campaign.name,'no')">
                                <p ng-if="filterType == 'Leads'">View Leads Not Purchased</p>
                                <p ng-if="filterType != 'Leads'">View Survey Not Purchased</p>
                              </button> -->
                            </td>
                            <td class="btn_box_lead_survey">
                              <button class="btn btn-danger" ng-click="getFormDetails(campaign.campaign_id,filterType)"
                                data-target="#sendEmailModal" data-toggle="modal">
                                <p ng-if="filterType == 'Leads' && filterType != 'Survey' && filterType != 'Feedback'">Email Leads</p>
                                <p ng-if="filterType != 'Leads' && filterType == 'Survey' && filterType !='Feedback'">Email Survey</p>
                                <p ng-if="filterType != 'Leads' && filterType != 'Survey' && filterType =='Feedback'">Email Feedback</p>
                              </button>
                            </td>
                            <td class="btn_box_lead_survey">
                              <button class="btn btn-danger"
                                data-target="#downloadLeads" data-toggle="modal">
                                <p ng-if="filterType == 'Leads' && filterType != 'Survey' && filterType != 'Feedback'">Download Leads</p>
                                <p ng-if="filterType != 'Leads' && filterType == 'Survey' && filterType !='Feedback'">Download Survey</p>
                                <p ng-if="filterType != 'Leads' && filterType != 'Survey' && filterType =='Feedback'">Download Feedback</p>
                              </button>
                            </td>
                          </tr>
                        </tbody>

                      </table>
                      <div ng-if="leadsDataCampaigns.length == 0">
                        <h4 style="color: red; text-align: center;">Record Not Found.</h4>
                      </div>
                    </div>
                  </div>
                  <div class="viewLeadstable b2b-table-style"  ng-hide="isTableHide" ng-if="purchasedNotPurchasedLead">
                    <!-- <button class="btn btn-danger" ng-click="backToCampaign()">Back To Campaigns</button> -->
                    </br><br>
                    <input type="text" class="form-control" ng-model="searchData" ng-if="purchasedTable"
                      placeholder="search">
                    <div class="table-responsive">
                      <div>
                        <center>
                          <h2 style="color: black;">Leads</h2>
                        </center>
                      </div>
                      <div class="date_range_picker">
                        <div class="row">
                          <div class="col-lg-6">
                            <div class="row">
                              <div class="col-lg-6">
                                <select ng-change="selectedCity(city)"
                                class="form-control select_city" ng-model="city">
                                    <option value="" >Select City</option>
                                    <option ng-repeat="city in cityListDetails" track by "$index">{{city}}</option>
                                </select>
                              </div>

                              <div class="col-lg-6">
                                <div class="date_wrapper">
                                <input type="text" style="color:#000000;" class="field" uib-datepicker-popup="dd/MM/yyyy"
                                  placeholder="DD/MM/YYYY" ng-change="changeStartDate()" ng-model="dateRangeModel.start_dates"
                                  is-open="isDatepickerOpen" datepicker-options="datepickerOptions" ng-required="true" close-text="Close"
                                  alt-input-formats="altInputFormats">
                                <button type="button" class="smallBtn calendar" ng-click="isDatepickerOpen = !isDatepickerOpen">
                                  <i class="glyphicon glyphicon-calendar"></i>
                                </button>
                              </div>
                            </div>
                            </div>
                          </div>

                          <div class="col-lg-6">
                            <div class="row">
                              <div class="col-sm-1"><h5 style="color:#000;padding: 10px 0;">To:</h5></div>
                              <div class="col-md-6">
                                <div class="date_wrapper">
                                <input type="text" style="color:#000000;" class="field" uib-datepicker-popup="dd/MM/yyyy"
                                  placeholder="DD/MM/YYYY" ng-change="changeEndDate()" ng-model="dateRangeModel.end_dates"
                                  is-open="isEndDateOpen" datepicker-options="options" ng-required="true" close-text="Close"
                                  alt-input-formats="altInputFormats">
                                <button type="button" class="smallBtn calendar" ng-disabled="!dateRangeModel.start_dates"
                                  ng-click="isEndDateOpen = !isEndDateOpen">
                                  <i class="glyphicon glyphicon-calendar"></i>
                                </button>
                              </div>
                              </div>
                            </div>
                          </div>
                          
                        </div>
                      </div>
                      <div class="panel-heading content-title" ng-if="purchasedTable || notPurchasedTable"
                        style="height:70px">
                        <h3 style="background:'red'">Leads of {{CampaignNameofLeads}}</h3>
                        <!-- <div class="row">
                      <span class="pull-left"><label for="heading"><small>Campaign Owner :  </small><span><small>{{campaignOwner}}</small> </span></label></span>
                      <span class="pull-right"><label for="heading"><small>Principal Vendor :  </small><span><small>{{principalVendor}}</small></span></label></span>
                      </div> -->
                      </div>
                      <br />
                      <!-- <table class="table" ng-if="purchasedTable">
                    <thead>
                      <tr>
                        <th>Index</th>
                        <th>Client Name</th>
                        <th style="width:100px;" class="col-md-2" ng-click="Sorts('unit_primary_count')">Primary Count<a><i class="icon-sort" style="color:white;"></i></a></th>
                        <th style="width:100px;" class="col-md-2" ng-click="Sorts('city')">City<a><i class="icon-sort" style="color:white;"></i></a></th>
                        <th>Purchased on</th>
                        <th>Comments</th>
                        <th>Internal Comments</th>
                        <th ng-if="filterType == 'Leads'">Installation/AMC Timeline</th>
                        <th>Meeting Timeline</th>
                        <th ng-if="filterType == 'Leads'">Sub Service Specific Detail L1
                        </th>
                        <th ng-if="filterType == 'Leads'">Sub Service Specific Detail L2</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr ng-repeat="lead in purchasedLeadData | filter : searchData | filter : Code | orderBy:sorts:reversesorts | itemsPerPage:20 track by $index">
                        <td  style="width:200px;" class="col-md-2">{{$index + 1}}</td>
                        <td  style="width:200px;" class="col-md-2">{{lead.leads_data[0].supplier_name}}</td>
                        <td  style="width:200px;" class="col-md-2">{{lead.leads_data[0].unit_primary_count}}</td>
                        <td  style="width:200px;" class="col-md-2">{{lead.leads_data[0].city}}</td>
                        <td  style="width:200px;" class="col-md-2"></td>
                        <td  style="width:200px;" class="col-md-2">
                            <textarea placeholder="Comments" class="form-control" style="width:150px;"
                            ng-model="lead.contact_data.external_comments" rows="4" cols="50">
                       </textarea>
                        </td>
                        <td  style="width:200px;" class="col-md-2">
                            <textarea placeholder="Internal Comments" class="form-control" style="width:150px;"
                            ng-model="lead.contact_data.internal_comments" rows="4" cols="50">
                       </textarea>
                        </td>
                        <td  style="width:200px;" class="col-md-2" ng-if="filterType == 'Leads'">              
                                <input type="text"  ng-model="lead.Installation_Timeline" name="Installation/AMC_Timeline" class="form-control" placeholder="Installation/AMC Timeline" id="Installation_id"
                                style="width:100px;">
                              </td>
                        <td  style="width:200px;" class="col-md-4">
                          <p ng-if="filterType != 'Leads'">
                            <input type="text"  ng-model="lead.meating_timeline" name="meating_timeline" class="form-control" placeholder="Meeting Timeline" id="meating_timeline_id"
                            style="width:100px;">
                          </p>
                          <p ng-if="filterType != 'Leads'">
                            {{lead.meating_timeline}}
                          </p>
                        </td>
                        <td  style="width:200px;" class="col-md-2" ng-if="filterType == 'Leads'"></td>
                        <td  style="width:200px;" class="col-md-2" ng-if="filterType == 'Leads'"></td>
                      </tr>
                    </tbody>
                  </table> -->
                      <!-- <table class="table table_content" ng-if="!isTableHide">
                        <thead>
                          <tr>
                            <th>Index</th>
                            <th style="width:100px;" class="col-md-2"
                              ng-repeat="(key,filter) in purchasedNotPurchasedLead.header track by $index">
                              <span> {{key}} </span>
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-if="lead_purchased == leadPurchasedStatus" ng-repeat="lead in all_values">
                           <td >{{$index + 1}}</td>
                           <td style="width:100px;" class="col-md-2" ng-repeat="(key,filter) in purchasedNotPurchasedLead.header track by $index">
                              <span>{{lead[key]}}</span>
                            </td> 
                          </tr>
                    </div>
                    </tr>

                    </tbody>
                    </table> -->
                    
          
                    
                      <table class="table table_content viewLeadstable-new b2b-table-style">
                        <thead>
                          <tr>
                            <th style="width: 60px;min-width: 60px !important;">Index</th>
                            <th class="col-md-2"
                              ng-repeat="(key,filter) in purchasedNotPurchasedLead.header track by $index">
                              <span> {{key}} </span>
                            </th>
                            <th style="width:200px;">Current Status</th>
                            <th style="width:200px;">Client Comment</th>
                            <th>Action</th>
                          </tr>
                        </thead>
                        <tbody pagination-id="paginate2"
                          dir-paginate="lead in purchasedNotPurchasedLead.values | itemsPerPage:purchasedNotPurchasedLeadPerPage"
                          total-items="purchasedNotPurchasedLeadTotal" current-page="purchasedNotPurchasedLeadCurrent"
                          track by "$index">
                          <tr>
                            <td style="width: 60px;min-width: 60px;">{{$index + 1}}</td>
                            <td class="col-md-2" ng-repeat="leadDetail in lead" ng-hide="$first">
                              <span ng-if="leadDetail.value">{{leadDetail.value}}</span>
                              <span ng-if="!leadDetail.value">NA</span>
                            </td>
                            <!-- <td  class="col-md-2"
                              >
                              <span ng-if="lead[2].value">{{lead[2].value}}</span>
                              <span ng-if="!lead[2].value">NA</span>
                            </td>
                            <td  class="col-md-2"
                              >
                              <span ng-if="lead[3].value">{{lead[3].value}}</span>
                              <span ng-if="!lead[3].value">NA</span>
                            </td>
                            <td  class="col-md-2"
                              >
                              <span ng-if="lead[4].value">{{lead[4].value}}</span>
                              <span ng-if="!lead[4].value">NA</span>
                            </td>
                            <td  class="col-md-2"
                              >
                              <span ng-if="lead[5].value">{{lead[5].value}}</span>
                              <span ng-if="!lead[5].value">NA</span>
                            </td>
                            <td  class="col-md-2"
                              >
                              <span ng-if="lead[6].value">{{lead[6].value}}</span>
                              <span ng-if="!lead[6].value">NA</span>
                            </td> -->
                            <!-- <td  class="col-md-2"
                              >
                              <span ng-if="lead[24].value">{{lead[24].value}}</span>
                              <span ng-if="!lead[24].value">NA</span>
                            </td> -->
                            <td class="col-md-2">
                              <select ng-change="setValue(value8,lead[0].macchadalo_client_comment,lead[0]._id,lead[0].requirement_id)"
                                class="form-control client-status" ng-model="value8">
                                <option ng-repeat="option in listClientStatus" track by "$index">{{option}}</option>
                              </select>
                              <span>{{lead[0].updated_at}}</span>
                              <span style="display: none;">{{value8=value8?value8:lead[0].macchadalo_client_status}}
                            </td>
                            <td class="alignment">
                              <button type="button" style="margin-bottom:2px" class="btn btn-danger" ng-click="viewCommentsLeadDetails(lead[0]._id,lead[0].requirement_id)">View / Add</button>
                          </td>
                            <!-- <td class="alignment">
                              <textarea rows="2" class="form-control client-comment" value="value1" ng-model="mymodel"
                                        ng-click="commentValue(mymodel)"
                                        ng-blur="valuechange(mymodel,lead[0].macchadalo_client_status,lead[0]._id,lead[0].requirement_id)" 
                                        name="" placeholder="Comment">
                                        <span>{{mymodel=mymodel?mymodel:mymodel==""?"":lead[0].macchadalo_client_comment}}</span>
                              </textarea>
                            </td> -->
                            <!-- <td class="col-md-2" style="max-width:fit-content;text-align: center; width: 227px;">
                              <span>{{macchadalo_client_comment?macchadalo_client_comment:"NA"}}</span>
                            </td> -->
                            <!-- <td><button style="margin-top:8px" type="button" name="button" class="btn btn-danger"
                              ng-click="updateLeadClientStatus(lead[0].macchadalo_client_status,lead[0].macchadalo_client_comment,lead[0]._id)">Update</button></td> -->
                            <td><button style="margin-top:8px; width: 92px !important; margin-right: -16px !important;"
                                type="button" name="button" class="btn btn-danger"
                                ng-click="showLeadDetail(lead[0]._id,lead[0].requirement_id)" data-toggle="modal"
                                data-target="#myModal">Detail</button></td>
                    </div>
                    </tr>

                    </tbody>
                    </table>
                  </div>
                </div>
                <br /><br />
                <div>
                  <dir-pagination-controls pagination-id="paginate2" max-size="7" direction-links="true"
                    boundary-links="true"
                    on-page-change="pageChangedPurchage(newPageNumber-1,leadPurchasedStatus,campaignId,campaignName)">
                  </dir-pagination-controls>
                </div>
                <br /> <br />


                <div class="viewLeadstable">
                  <!-- <button class="btn btn-danger" ng-click="backToCampaign()">Back To Campaigns</button> -->
                  </br><br>
                  <input ng-if="notPurchasedTable" type="text" class="form-control" ng-model="searchData"
                    placeholder="search">
                  <div class="table-responsive">
                    <table class="table" ng-if="notPurchasedTable">
                      <thead>
                        <tr>
                          <th></th>

                          <th style="width: 60px;min-width: 60px;">Index</th>
                          <th>Client Name</th>
                          <th>Area</th>
                          <th>Price/Point</th>
                          <th>Comments</th>
                          <th>Primary Count (Ultra)</th>

                        </tr>
                      </thead>
                      <tbody pagination-id="paginate3"
                        dir-paginate="leaddata in notPurchasedLeadData | filter : searchData | filter : Code | itemsPerPage:20"
                        total-items="100" current-page="0" track by "$index">
                        <tr>
                          <td style="width: 60px;min-width: 60px;"><input type="checkbox"></td>
                          <td><button class="btn btn-danger">Buy</button></td>
                          <td style="width:200px;" class="col-md-2">{{$index + 1}}</td>
                          <td style="width:200px;" class="col-md-2">{{leaddata.leads_data[0].supplier_name}}</td>
                          <td style="width:200px;" class="col-md-2">{{leaddata.leads_data[0].area}}</td>
                          <td style="width:200px;" class="col-md-2">{{leaddata.price}}</td>
                          <td style="width:200px;" class="col-md-2">{{leaddata.internal_comments[0].comment}}</td>
                          <td style="width:200px;" class="col-md-2">{{leaddata.leads_data[0].unit_primary_count}}</td>
                          <!-- <td>{{lead.unit_primary_count}}</td>
                        <td>{{lead.city}}</td>
                        <td>{{lead.supplier_name}}</td> -->


                          <!-- <td ng-repeat="alias in lead">{{alias.value}}</td> -->
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <br /><br />
                <div style="text-align:center">
                  <dir-pagination-controls max-size="7" direction-links="true" boundary-links="true"
                    pagination-id="paginate3">
                  </dir-pagination-controls>
                </div>
                <br /> <br />



                <!-- <button ng-if="!showCampaigns" class="btn btn-danger" ng-click="getPrintLeadsInExcelData(campaignIdForLeads)" data-target="#printLeadsInExcelModal" data-toggle="modal">Print Leads In Excel</button> -->

          </div>
          </uib-tab>
          <!-- view leads end -->

          <!--Payment start -->
          <uib-tab id="uib-tabs-width" ng-click="viewLicenceDetail()" index="4">
            <uib-tab-heading>
              <h5>Licenses & Payment</h5>
            </uib-tab-heading>
            <div class="col-md-12">
              <ul class="licence_detail_bx">
                <li ng-class="licenceTab ? 'active_detail' : ''" ng-click="changeTab('licence')">Licence Details</li>
                <li ng-class="paymentTab ? 'active_detail' : ''" ng-click="changeTab('payment')">Payment Details</li>
              </ul>
            </div>
            <div ng-if="licenceTab">
              <div class="col-md-6">
                <div class="panel-title box_detail">
                  <h4>Company Details:</h4>
                  <p>Company Name- <span
                      ng-if="viewLicenceDetailData.companydetail.company">{{viewLicenceDetailData.companydetail.company}}</span>
                    <span ng-if="!viewLicenceDetailData.companydetail.company">NA</span>
                  </p>
                  <p>Website URL- <span
                      ng-if="viewLicenceDetailData.companydetail.website_url">{{viewLicenceDetailData.companydetail.website_url}}</span>
                    <span ng-if="!viewLicenceDetailData.companydetail.website_url">NA</span>
                  </p>
                  <p>Contact Number- <span
                      ng-if="viewLicenceDetailData.companydetail.contact_number">{{viewLicenceDetailData.companydetail.contact_number}}</span>
                    <span ng-if="!viewLicenceDetailData.companydetail.contact_number">NA</span>
                  </p>
                  <p>GSTIN Number- <span
                      ng-if="viewLicenceDetailData.companydetail.gstin_number">{{viewLicenceDetailData.companydetail.gstin_number}}</span>
                    <span ng-if="!viewLicenceDetailData.companydetail.gstin_number">NA</span>
                  </p>
                  <p>HQ Address- <span
                      ng-if="viewLicenceDetailData.companydetail.registered_address">{{viewLicenceDetailData.companydetail.registered_address}}</span>
                    <span ng-if="!viewLicenceDetailData.companydetail.registered_address">NA</span>
                  </p>
                  <p>City- <span
                      ng-if="viewLicenceDetailData.companydetail.city">{{viewLicenceDetailData.companydetail.city}}</span>
                    <span ng-if="!viewLicenceDetailData.companydetail.city">NA</span>
                  </p>
                  <p>PIN Code- <span
                      ng-if="viewLicenceDetailData.companydetail.pin_code">{{viewLicenceDetailData.companydetail.pin_code}}</span>
                    <span ng-if="!viewLicenceDetailData.companydetail.pin_code">NA</span>
                  </p>
                  <p>Billing Number- <span
                      ng-if="viewLicenceDetailData.companydetail.billing_address">{{viewLicenceDetailData.companydetail.billing_address}}</span>
                    <span ng-if="!viewLicenceDetailData.companydetail.billing_address">NA</span>
                  </p>
                  <p>PAN- <span
                      ng-if="viewLicenceDetailData.companydetail.pan_number">{{viewLicenceDetailData.companydetail.pan_number}}</span>
                    <span ng-if="!viewLicenceDetailData.companydetail.pan_number">NA</span>
                  </p>
                  <button data-target="#companyDetailModal" data-toggle="modal">Edit</button>
                </div>
              </div>
              <!-- <div class="col-md-6">
                <div class="panel-title box_detail">
                  <h4>Machadalo Relationship Manager details:</h4>
                  <p>Name- <span
                      ng-if="viewLicenceDetailData.relationship_manager.name">{{viewLicenceDetailData.relationship_manager.name}}</span>
                    <span ng-if="!viewLicenceDetailData.relationship_manager.name">NA</span>
                  </p>
                  <p>Email- <span
                      ng-if="viewLicenceDetailData.relationship_manager.email">{{viewLicenceDetailData.relationship_manager.email}}</span>
                    <span ng-if="!viewLicenceDetailData.relationship_manager.email">NA</span>
                  </p>
                  <p>Phone Number-<span
                      ng-if="viewLicenceDetailData.relationship_manager.phone_number">{{viewLicenceDetailData.relationship_manager.phone_number}}</span>
                    <span ng-if="!viewLicenceDetailData.relationship_manager.phone_number">NA</span>
                  </p>
                  <button data-target="#relationshipManagerDetailsModal" data-toggle="modal">Edit</button>
                </div>
              </div> -->
              <!-- <div class="col-md-6" style="clear: both;"> -->
              <div class="col-md-6">
                <div class="panel-title box_detail">
                  <h4>My Details</h4>
                  <p>Name- <span
                      ng-if="viewLicenceDetailData.mydetail.first_name">{{viewLicenceDetailData.mydetail.first_name}}
                      {{viewLicenceDetailData.mydetail.last_name}}</span>
                    <span
                      ng-if="!viewLicenceDetailData.mydetail.first_name && !viewLicenceDetailData.mydetail.last_name">NA</span>
                  </p>
                  <p>Email- <span
                      ng-if="viewLicenceDetailData.mydetail.email">{{viewLicenceDetailData.mydetail.email}}</span>
                    <span ng-if="!viewLicenceDetailData.mydetail.email">NA</span>
                  </p>
                  <p>Contact Number- <span
                      ng-if="viewLicenceDetailData.mydetail.mobile">{{viewLicenceDetailData.mydetail.mobile}}</span>
                    <span ng-if="!viewLicenceDetailData.mydetail.mobile">NA</span>
                  </p>
                  <p>Designation- <span
                      ng-if="viewLicenceDetailData.mydetail.designation">{{viewLicenceDetailData.mydetail.designation}}</span>
                    <span ng-if="!viewLicenceDetailData.mydetail.designation">NA</span>
                  </p>
                  <button data-target="#myDetailsModal" data-toggle="modal">Edit</button>
                </div>
              </div>
            </div>
            <div ng-if="paymentTab">
              <div class="col-md-6">
                <div class="panel-title box_detail">
                  <h4>Machadalo Relationship Manager details:</h4>
                  <p>Name- <span
                      ng-if="viewLicenceDetailData.relationship_manager.name">{{viewLicenceDetailData.relationship_manager.name}}</span>
                    <span ng-if="!viewLicenceDetailData.relationship_manager.name">NA</span>
                  </p>
                  <p>Email- <span
                      ng-if="viewLicenceDetailData.relationship_manager.email">{{viewLicenceDetailData.relationship_manager.email}}</span>
                    <span ng-if="!viewLicenceDetailData.relationship_manager.email">NA</span>
                  </p>
                  <p>Phone Number-<span
                      ng-if="viewLicenceDetailData.relationship_manager.phone_number">{{viewLicenceDetailData.relationship_manager.phone_number}}</span>
                    <span ng-if="!viewLicenceDetailData.relationship_manager.phone_number">NA</span>
                  </p>
                  <button data-target="#relationshipManagerDetailsModal" data-toggle="modal">Edit</button>
                </div>
              </div>
              <div class="col-md-12" style="clear: both;">
                <div class="panel-title box_detail">
                  <div class="viewLeadstable">

                    <br /><br /><br /><br />
                    <!-- <input type="text" class="form-control" ng-model="searchQuery" placeholder="search"> -->
                    <h4>Payment Summary</h4>
                    <div class="table-responsive">
                      <table class="table">
                        <thead>
                          <tr>
                            <th>Date</th>
                            <th class="btn_box_lead_survey_th">Amount</th>
                            <th class="btn_box_lead_survey_th">Payment Status</th>
                            <th class="btn_box_lead_survey_th">URL</th>
                          </tr>
                          <!-- <tr colspan="9">
                            <td></td>
                          </tr> -->
                        </thead>
                        <tbody>
                          <!-- <tr
                            dir-paginate="campaign in leadsDataCampaigns|filter : searchQuery | filter : f | orderBy:sort:reversesort | itemsPerPage:10 track by $index "> -->
                          <tr ng-if="paymentDetailsData.paymentdetail.length >0"
                            ng-repeat="payment in paymentDetailsData.paymentdetail">
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                          </tr>


                        </tbody>
                      </table>
                      <div style="text-align: center; margin-top: 10px;"
                        ng-if="paymentDetailsData.paymentdetail.length  == 0">
                        Record not Found.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div id="companyDetailModal" class="modal fade">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>

                    <h4 class="modal-title">Company Details:</h4>
                    <hr />
                    <div class="modal-body">
                      <form role="form" class="form-inline" ng-submit="updateCompanyDetails()" name="myForm">
                        <div class="row">
                          <div class="col-md-4" style="margin-top: 10px">
                            <label> Company Name : </label>
                          </div>
                          <div class="col-md-8" style="margin-top: 10px">
                            <input type="text" placeholder="Name" class="form-control" name="company_name" id="name_id"
                              ng-model="viewLicenceDetailData.companydetail.company">
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4" style="margin-top: 10px">
                            <label> Website URL : </label>
                          </div>
                          <div class="col-md-8" style="margin-top: 10px">
                            <input type="text" placeholder="Website URL" class="form-control" name="website_url"
                              id="website_url_id" ng-model="viewLicenceDetailData.companydetail.website_url">
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4" style="margin-top: 10px">
                            <label> Contact Number : </label>
                          </div>
                          <div class="col-md-8" style="margin-top: 10px">
                            <input type="text" ng-pattern="/^[0-9]{10,10}$/" maxlength="10" placeholder="Contact Number"
                              class="form-control" name="contact_number" id="contact_number_id"
                              ng-model="viewLicenceDetailData.companydetail.contact_number">
                            <div ng-show="myForm.contact_number.$error.pattern" class="error"
                              style="font-size:12px; color: red;">
                              Phone number Invalid</div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4" style="margin-top: 10px">
                            <label> GSTIN Number : </label>
                          </div>
                          <div class="col-md-8" style="margin-top: 10px">
                            <input type="text" placeholder="GSTIN Number" class="form-control" name="gst_number"
                              id="gst_number_id" ng-model="viewLicenceDetailData.companydetail.gstin_number">
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4" style="margin-top: 10px">
                            <label> HQ Address : </label>
                          </div>
                          <div class="col-md-8" style="margin-top: 10px">
                            <input type="text" placeholder="HQ Address" class="form-control" name="address"
                              id="address_id" ng-model="viewLicenceDetailData.companydetail.registered_address">
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4" style="margin-top: 10px">
                            <label> City : </label>
                          </div>
                          <div class="col-md-8" style="margin-top: 10px">
                            <input type="text" placeholder="City" class="form-control" name="city" id="city_id"
                              ng-model="viewLicenceDetailData.companydetail.city">
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4" style="margin-top: 10px">
                            <label> PIN Code : </label>
                          </div>
                          <div class="col-md-8" style="margin-top: 10px">
                            <input type="text" placeholder="PIN Code" class="form-control" name="pin_code"
                              id="pin_code_id" ng-model="viewLicenceDetailData.companydetail.pin_code">
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4" style="margin-top: 10px">
                            <label> Billing Number : </label>
                          </div>
                          <div class="col-md-8" style="margin-top: 10px">
                            <input type="text" placeholder="Billing Number" class="form-control" name="billing_number"
                              id="billing_number_id" ng-model="viewLicenceDetailData.companydetail.billing_address">
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4" style="margin-top: 10px">
                            <label> PAN : </label>
                          </div>
                          <div class="col-md-8" style="margin-top: 10px">
                            <input type="text" placeholder="PAN" class="form-control" name="pan" id="pan_id"
                              ng-model="viewLicenceDetailData.companydetail.pan_number">
                          </div>
                        </div>

                        <!-- <div>
                          <button class="btn btn-danger" ng-disabled="!myForm.$valid"
                            ng-click="updateCompanyDetails()">Save</button>
                        </div> -->
                        <button type="submit" class="smallBtn">Update</button>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div id="relationshipManagerDetailsModal" class="modal fade">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>

                    <h4 class="modal-title">Relationship Manager details:</h4>
                    <hr />
                    <div class="modal-body">
                      <form role="form" class="form-inline" ng-submit="updateRelationshipManagerDetails()"
                        name="relationshipManagerDetailsForm">
                        <div class="col-md-12" style="margin-top: 10px">
                          <label> Name : </label>
                          <input type="text" placeholder="Name" class="form-control" name="company_name"
                            id="relationship_name_id" ng-model="viewLicenceDetailData.relationship_manager.name"
                            required>
                        </div>


                        <div class="col-md-12" style="margin-top: 10px">
                          <label> Email : </label>
                          <input type="text" placeholder="Email" name="email_name" class="form-control"
                            id="relationship_email_id" ng-model="viewLicenceDetailData.relationship_manager.email"
                            ng-pattern="/^[a-zA-Z0-9]+[.]?[_a-zA-Z0-9]+[@][a-zA-Z]+[.][a-zA-Z]+$/">
                          <div ng-show="relationshipManagerDetailsForm.email_name.$error.pattern" class="error"
                            style="font-size:12px;">
                            Email Invalid</div>
                        </div>
                        <div class="col-md-12" style="margin-top: 10px">
                          <label> Phone Number : </label>
                          <input type="text" ng-pattern="/^[0-9]{10}$/" placeholder="Phone Number" class="form-control"
                            name="contact_number" id="contacts_number_id"
                            ng-model="viewLicenceDetailData.relationship_manager.phone_number">
                          <div ng-show="relationshipManagerDetailsForm.contact_number.$error.pattern" class="error"
                            style="font-size:12px; color: red;">Phone Number Invalid</div>
                        </div>
                        <button type="submit" class="smallBtn">Update</button>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div id="myDetailsModal" class="modal fade">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>

                    <h4 class="modal-title">My Details:</h4>
                    <hr />
                    <div class="modal-body">
                      <form role="form" class="form-inline" ng-submit="updateMyDetails()" name="myDetailsForm">
                        <div class="row">
                          <div class="col-md-4" style="margin-top: 10px">
                            <label> First Name : </label>
                          </div>
                          <div class="col-md-8" style="margin-top: 10px">
                            <input type="text" placeholder="First Name" class="form-control" name="first_name"
                              id="first_name_id" ng-model="viewLicenceDetailData.mydetail.first_name">
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4" style="margin-top: 10px">
                            <label> Last Name : </label>
                          </div>
                          <div class="col-md-8" style="margin-top: 10px">
                            <input type="text" placeholder="Last Name" class="form-control" name="last_name"
                              id="last_name_id" ng-model="viewLicenceDetailData.mydetail.last_name">
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4" style="margin-top: 10px">
                            <label> Email : </label>
                          </div>
                          <div class="col-md-8" style="margin-top: 10px">
                            <input type="text" placeholder="Email" name="email_name" class="form-control"
                              id="my_email_id" ng-model="viewLicenceDetailData.mydetail.email"
                              ng-pattern="/^[a-zA-Z0-9]+[.]?[_a-zA-Z0-9]+[@][a-zA-Z]+[.][a-zA-Z]+$/">
                            <div ng-show="myDetailsForm.email_name.$error.pattern" class="error"
                              style="font-size:12px;">
                              Email Invalid</div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4" style="margin-top: 10px">
                            <label> Contact Number : </label>
                          </div>
                          <div class="col-md-8" style="margin-top: 10px">
                            <input type="text" ng-pattern="/^[0-9]{10}$/" maxlength="10" placeholder="Contact Number"
                              class="form-control" name="contact_number" id="my_contact_number_id"
                              ng-model="viewLicenceDetailData.mydetail.mobile">
                            <div ng-show="myDetailsForm.contact_number.$error.pattern" class="error"
                              style="font-size:12px; color: red;">Contact Number Invalid</div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4" style="margin-top: 10px">
                            <label> Designation : </label>
                          </div>
                          <div class="col-md-8" style="margin-top: 10px">
                            <input type="text" placeholder="Designation" class="form-control" name="designation"
                              id="designation_id" ng-model="viewLicenceDetailData.mydetail.designation">
                          </div>
                        </div>
                        <button type="submit" class="smallBtn">Update</button>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </uib-tab>
          <!--Payment end -->
          <!--START : Analysis -->
          <uib-tab id="uib-tabs-width" ng-click="getCampaigns()" index="5" ng-hide="true">
            <uib-tab-heading>
              <h5 style="margin-left:-10px;"> Analysis</h5>
            </uib-tab-heading>

            <div class="container-fluid" print-section>
              <div class="row">
                <div class="panel panel-default" style="color:'0000ff'">
                  <div class="col-md-12">
                    <!-- Filter -->
                    <div class="col-md-12" print-remove>
                      <div class="col-md-8" print-remove>
                        <label for="" style="color:#000000;">Select Date Range</label>
                        <div class="col-md-4">
                          <input type="text" style="color:#000000;" class="field" uib-datepicker-popup="dd/MM/yyyy"
                            placeholder="DD/MM/YYYY" ng-change="changeStartDate()" ng-model="dateRangeModel.start_dates"
                            is-open="isDatepickerOpen" datepicker-options="datepickerOptions" ng-required="true"
                            close-text="Close" alt-input-formats="altInputFormats">
                          <button type="button" class="smallBtn calendar"
                            ng-click="isDatepickerOpen = !isDatepickerOpen">
                            <i class="glyphicon glyphicon-calendar"></i>
                          </button>
                        </div>
                        <div class="col-md-4">
                          <input type="text" style="color:#000000;" class="field" uib-datepicker-popup="dd/MM/yyyy"
                            placeholder="DD/MM/YYYY" ng-change="changeEndDate()" ng-model="dateRangeModel.end_dates"
                            is-open="isEndDateOpen" datepicker-options="options" ng-required="true" close-text="Close"
                            alt-input-formats="altInputFormats">
                          <button type="button" class="smallBtn calendar" ng-disabled="!dateRangeModel.start_dates"
                            ng-click="isEndDateOpen = !isEndDateOpen">
                            <i class="glyphicon glyphicon-calendar"></i>
                          </button>
                        </div>

                        <button class="btn btn-danger"
                          ng-disabled="!dateRangeModel.start_dates || !dateRangeModel.end_dates"
                          ng-click="submitAnalysisDate()">Submit</button>

                      </div>
                      <!-- /Filter -->
                      <br /><br /><br />
                      <br />

                      <!-- Campaign List -->
                      <div class="panel-group" print-remove>
                        <div class="col-md-12">
                          <div class="col-md-4">
                            <div class="panel panel-default"
                              ng-click="getCampaignsMenu(campaignStatus.completed.status)">
                              <div class="button" type="button">
                                <div class="panel-heading">
                                  Completed Campaigns
                                </div>
                              </div>

                              <div id="completed" class="animate-show" ng-show="campaignStatus.completed.value">
                                <div class="panel-bodyDashboard camp-menu-content">
                                  <table class="table">
                                    <tr ng-repeat="campaign in campaignData.completed_campaigns | orderBy: 'name'">
                                      <td>
                                        <!-- <md-menu> -->
                                        <div class="" ng-click="getLeadsByCampaign(campaign)">
                                          {{campaign.name}}
                                        </div>

                                      </td>
                                    </tr>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="col-md-4">

                            <div class="panel panel-default" ng-click="getCampaignsMenu(campaignStatus.ongoing.status)">
                              <div class="button" type="button">
                                <div class="panel-heading">
                                  Ongoing Campaigns
                                </div>
                              </div>
                              <div id="ongoing" class="animate-show" ng-show="campaignStatus.ongoing.value">
                                <div class="panel-bodyDashboard camp-menu-content">
                                  <table class="table">
                                    <tr ng-repeat="campaign in campaignData.ongoing_campaigns | orderBy: 'name'">
                                      <td>
                                        <div class="" ng-click="getLeadsByCampaign(campaign)">
                                          {{campaign.name}}
                                        </div>
                                      </td>
                                    </tr>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="col-md-4">
                            <div class="panel panel-default" ng-click="getCampaignsMenu(campaignStatus.onhold.status)">
                              <div class="button" type="button">
                                <div class="panel-heading">
                                  OnHold Campaigns
                                </div>
                              </div>

                              <div id="onhold" class="animate-show" ng-show="campaignStatus.onhold.value">
                                <div class="panel-bodyDashboard camp-menu-content">
                                  <table class="table">
                                    <tr ng-repeat="campaign in campaignData.onhold_campaigns | orderBy: 'name'">
                                      <td>
                                        <div class="" ng-click="getLeadsByCampaign(campaign)">
                                          {{campaign.name}}
                                        </div>
                                      </td>
                                    </tr>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- /Campaign List -->

                      <br /><br /><br />
                      <div class="col-lg-12" ng-if="CampaignLeadsName" style="margin-top:30px;">
                        <br /> <br />
                        <div class="panel-heading content-title" style="height:70px">
                          <h3 for="heading">Leads of {{CampaignLeadsName}}</h3>
                        </div>
                      </div>

                      <!-- Summary Report-->
                      <div class="col-lg-12" ng-if="CampaignLeadsName" style="margin-top:50px;">
                        <div class="col-lg-6">
                          <div class="panel panel-primary">
                            <div class="panel-heading content-title">
                              <label for="Flat">Summary Report</label>
                            </div>
                          </div>
                          <div class="campaigndetailtable">
                            <div class="table-responsive">

                              <table class="table table-striped" st-table="LeadsByCampaign" st-safe-src="Data">
                                <thead>
                                  <tr>
                                    <th style="background:#8e1921 !important;color:#ffffff !important">Details</th>
                                    <th style="background:#8e1921 !important;color:#ffffff !important">Overall</th>
                                    <th style="background:#8e1921 !important;color:#ffffff !important">Last Week</th>
                                    <th style="background:#8e1921 !important;color:#ffffff !important">Last 2 Week</th>
                                    <th style="background:#8e1921 !important;color:#ffffff !important">Last 3 Week</th>
                                  </tr>
                                </thead>
                                <tbody style="text-align:center;">
                                  <tr>
                                    <td><small style="font-weight:bold">Flat count</small></td>
                                    <td>{{summary_report.overall_data.primary_count || 'NA'}}</td>
                                    <td>{{summary_report.last_week.primary_count || 'NA'}}</td>
                                    <td>{{summary_report.last_two_weeks.primary_count || 'NA'}}</td>
                                    <td>{{summary_report.last_three_weeks.primary_count || 'NA'}}</td>
                                  </tr>
                                </tbody>

                                <tbody style="text-align:center;">
                                  <tr>
                                    <td><small style="font-weight:bold">Total Lead</small></td>
                                    <td>{{summary_report.overall_data.total_lead || 'NA'}}</td>
                                    <td>{{summary_report.last_week.total_lead || 'NA'}}</td>
                                    <td>{{summary_report.last_two_weeks.total_lead || 'NA'}}</td>
                                    <td>{{summary_report.last_three_weeks.total_lead || 'NA'}}</td>
                                  </tr>
                                </tbody>

                                <tbody style="text-align:center;">
                                  <tr>
                                    <td><small style="font-weight:bold">{{getHotLeadName}} (%)</small></td>
                                    <td>{{summary_report.overall_data.hot_lead_count || 'NA'}}
                                      {{getPercentBrackets(summary_report.overall_data.hot_lead_count,
                                      summary_report.overall_data.total_lead)}}
                                    </td>
                                    <td>{{summary_report.last_week.hot_lead_count || 'NA'}}
                                      {{getPercentBrackets(summary_report.last_week.hot_lead_count,
                                      summary_report.last_week.total_lead)}}
                                    </td>
                                    <td>{{summary_report.last_two_weeks.hot_lead_count || 'NA'}}
                                      {{getPercentBrackets(summary_report.last_two_weeks.hot_lead_count,
                                      summary_report.last_two_weeks.total_lead)}}
                                    </td>
                                    <td>{{summary_report.last_three_weeks.hot_lead_count || 'NA'}}
                                      {{getPercentBrackets(summary_report.last_three_weeks.hot_lead_count,
                                      summary_report.last_three_weeks.total_lead)}}
                                    </td>
                                  </tr>
                                </tbody>

                                <tbody style="text-align:center;">
                                  <tr>
                                    <td><small style="font-weight:bold">{{getDeepLeadName}} (%)</small></td>
                                    <td>{{summary_report.overall_data.total_deep_count || 'NA'}}
                                      {{getPercentBrackets(summary_report.overall_data.total_deep_count,
                                      summary_report.overall_data.total_lead)}}
                                    </td>
                                    <td>{{summary_report.last_week.total_deep_count || 'NA'}}
                                      {{getPercentBrackets(summary_report.last_week.total_deep_count,
                                      summary_report.last_week.total_lead)}}
                                    </td>
                                    <td>{{summary_report.last_two_weeks.total_deep_count || 'NA'}}
                                      {{getPercentBrackets(summary_report.last_two_weeks.total_deep_count,
                                      summary_report.last_two_weeks.total_lead)}}
                                    </td>
                                    <td>{{summary_report.last_three_weeks.total_deep_count || 'NA'}}
                                      {{getPercentBrackets(summary_report.last_three_weeks.total_deep_count,
                                      summary_report.last_three_weeks.total_lead)}}
                                    </td>
                                  </tr>
                                </tbody>

                              </table>

                            </div>
                          </div>
                        </div>

                        <div class="col-lg-6">
                          <div class="panel panel-primary">
                            <div class="panel-heading content-title">
                              <label for="flat graph">Summary Report Graph</label>
                            </div>
                          </div>
                          <div class="row">

                            <div class="outerFlat">
                              <div class="innerFlat">
                                <nvd3 options="weekSummaryStackedBar" data="summary_report_graph_data"></nvd3>
                              </div>
                            </div>

                          </div>
                        </div>

                      </div>
                      <!-- Summary Report-->

                    </div>

                    <div class="col-sm-12" ng-if="CampaignLeadsName">
                      <br /><br /><br />


                      <!-- Flat summary Report -->
                      <div class="col-lg-6">
                        <div class="panel panel-primary">
                          <div class="panel-heading content-title">
                            <label for="Flat">Flat Summary Details</label>
                          </div>
                        </div>
                        <div class="campaigndetailtable">
                          <div class="table-responsive">
                            <table class="table table-striped" st-table="LeadsByCampaign" st-safe-src="Data">
                              <thead>
                                <tr>
                                  <th style="background:#8e1921 !important;color:#ffffff !important;">Details</th>
                                  <th style="background:#8e1921 !important;color:#ffffff !important">Overall Campaign
                                    <br>Total
                                  </th>
                                  <th style="background:#8e1921 !important;color:#ffffff !important">Flat Count <br>
                                    <small style="color:#ffffff !important">
                                      < 150 </small>
                                  </th>
                                  <th style="background:#8e1921 !important;color:#ffffff !important">Flat Count
                                    <br><small style="color:#ffffff !important"> Between 151 to 400</small>
                                  </th>
                                  <th style="background:#8e1921 !important;color:#ffffff !important">Flat Count <br>
                                    <small style="color:#ffffff !important"> > 401</small>
                                  </th>
                                </tr>
                              </thead>
                              <tbody style="text-align:center;">

                                <tr>
                                  <td><small style="font-weight:bold">Lead Count</small></td>
                                  <td>{{summary_report.overall_data.total_lead}}</td>
                                  <td>{{flat_summary["<150"].lead_count}}< /td>
                                  <td>{{flat_summary["150-400"].lead_count}}</td>
                                  <td>{{flat_summary[">400"].lead_count}}</td>
                                </tr>

                                <tr>
                                  <td><small style="font-weight:bold">Flat Count</small></td>
                                  <td>{{summary_report.overall_data.primary_count}}</td>
                                  <td>{{flat_summary["<150"].flat_count}}< /td>
                                  <td>{{flat_summary["150-400"].flat_count}}</td>
                                  <td>{{flat_summary[">400"].flat_count}}</td>
                                </tr>

                                <tr>
                                  <td><small style="font-weight:bold">{{getHotLeadName}} (%)</small></td>
                                  <td>{{summary_report.overall_data.hot_lead_count}}
                                    {{getPercentBrackets(summary_report.overall_data.hot_lead_count,
                                    summary_report.overall_data.total_lead)}}
                                  </td>
                                  <td>{{flat_summary["<150"].hot_lead_count}}
                                      {{getPercentBrackets(flat_summary["<150"].hot_lead_count,
                                      flat_summary["<150"].lead_count)}} </td>
                                  <td>{{flat_summary["150-400"].hot_lead_count}}
                                    {{getPercentBrackets(flat_summary["150-400"].hot_lead_count,
                                    flat_summary["150-400"].lead_count)}}
                                  </td>
                                  <td>{{flat_summary[">400"].hot_lead_count}}
                                    {{getPercentBrackets(flat_summary[">400"].hot_lead_count,
                                    flat_summary[">400"].lead_count)}}
                                  </td>
                                </tr>

                                <tr>
                                  <td><small style="font-weight:bold">{{getDeepLeadName}} (%)</small></td>
                                  <td>{{summary_report.overall_data.total_deep_count}}
                                    {{getPercentBrackets(summary_report.overall_data.total_deep_count,
                                    summary_report.overall_data.total_lead)}}
                                  </td>
                                  <td>{{flat_summary["<150"].deep_lead_count}}
                                      {{getPercentBrackets(flat_summary["<150"].deep_lead_count,
                                      flat_summary["<150"].lead_count)}} </td>
                                  <td>{{flat_summary["150-400"].deep_lead_count}}
                                    {{getPercentBrackets(flat_summary["150-400"].deep_lead_count,
                                    flat_summary["150-400"].lead_count)}}
                                  </td>
                                  <td>{{flat_summary[">400"].deep_lead_count}}
                                    {{getPercentBrackets(flat_summary[">400"].deep_lead_count,
                                    flat_summary[">400"].lead_count)}}
                                  </td>
                                </tr>

                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>

                      <div class="col-lg-6">
                        <div class="panel panel-primary">
                          <div class="panel-heading content-title">
                            <label for="flat graph">Flat Graph Summary</label>
                          </div>
                        </div>
                        <div class="row">

                          <select class="form-control" ng-change="sortData('flat_summary_graph_data',sortModel)"
                            ng-model="sortModel" print-remove>
                            <option value="" disabled>Select For Sorting</option>
                            <option ng-repeat="item in sortMenu" value="{{item.id}}">{{item.name}}</option>
                          </select>

                          <div class="outerFlat">
                            <div class="innerFlat">
                              <nvd3 options="flatSummaryBarChart" data="flat_summary_graph_data"
                                ng-if="!toggle_sort_data['flat_summary_graph_data']"></nvd3>
                              <nvd3 options="flatSummaryBarChart" data="toggle_sort_data['flat_summary_graph_data']"
                                ng-if="toggle_sort_data['flat_summary_graph_data']"></nvd3>
                            </div>
                          </div>

                        </div>
                      </div>

                      <!-- /Flat summary Report -->
                    </div>

                    <br /><br />
                    <div class="col-lg-12" ng-if="CampaignLeadsName" style="margin-top:50px;">

                      <div class="col-lg-6">
                        <div class="panel panel-primary">
                          <div class="panel-heading content-title">
                            <label for="Location">Location Summary Details</label>
                          </div>
                        </div>
                        <div class="campaigndetailtable">
                          <div class="table-responsive">
                            <table class="table table-striped" st-table="LeadsByCampaign.locality_data"
                              st-safe-src="localityData">
                              <thead>
                                <tr>
                                  <th style="background:#8e1921 !important;color:#ffffff !important">Supplier Area</th>
                                  <th style="background:#8e1921 !important;color:#ffffff !important">Total Leads</th>
                                  <th style="background:#8e1921 !important;color:#ffffff !important">Flat Count</th>
                                  <th style="background:#8e1921 !important;color:#ffffff !important">{{getHotLeadName}}
                                    <br>(%)
                                  </th>
                                  <th style="background:#8e1921 !important;color:#ffffff !important">{{getDeepLeadName}}
                                    <br>(%)
                                  </th>
                                </tr>
                              </thead>
                              <tbody style="text-align:center;">
                                <tr ng-repeat="(key,data) in location_summary">
                                  <td style="font-weight:bold">{{key}}</td>
                                  <td>{{data.lead_count}}</td>
                                  <td>{{data.flat_count}}</td>
                                  <td>{{data.hot_lead_count}} <br> <small style="font-weight:bold">{{
                                      getPercentBrackets(data.hot_lead_count, data.lead_count)}}</small>
                                  </td>
                                  <td>{{data.deep_lead_count}} <br> <small
                                      style="font-weight:bold">{{getPercent(data.deep_lead_count,
                                      data.lead_count)}}</small>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                        <br>
                      </div>

                      <div class="col-lg-6" style="overflow:auto">
                        <div class="panel panel-primary">
                          <div class="panel-heading content-title">
                            <label for="flat graph">Location Graph Summary</label>
                          </div>
                        </div>
                        <div class="row">

                          <select class="form-control" ng-change="sortData('location_summary_graph_data',sortModel)"
                            ng-model="sortModel" print-remove>
                            <option value="" disabled>Select For Sorting</option>
                            <option ng-repeat="item in sortMenu" value="{{item.id}}">{{item.name}}</option>
                          </select>

                          <div class="outerFlat">
                            <div class="innerFlat">
                              <nvd3 options="flatSummaryBarChart" data="location_summary_graph_data"
                                ng-if="!toggle_sort_data['location_summary_graph_data']"></nvd3>
                              <nvd3 options="flatSummaryBarChart" data="toggle_sort_data['location_summary_graph_data']"
                                ng-if="toggle_sort_data['location_summary_graph_data']"></nvd3>
                            </div>
                          </div>

                        </div>
                      </div>

                    </div>

                    <!-- Leads By Date -->
                    <div class="col-md-12" ng-if="CampaignLeadsName" style="margin-top:50px;">
                      <div class="panel-heading content-title">
                        <h4 style="text-align: center"> Leads By Date </h4>
                      </div>
                      <div class="col-md-12" ng-scrollabel>
                        <select class="form-control" ng-change="sortData('date_summary_graph_data',sortModel)"
                          ng-model="sortModel" print-remove>
                          <option value="" disabled>Select For Sorting</option>
                          <option ng-repeat="item in sortMenu" value="{{item.id}}">{{item.name}}</option>
                        </select>

                        <div class="outerFlat">
                          <div class="innerFlat">
                            <nvd3 options="flatSummaryBarChart" data="date_summary_graph_data"
                              ng-if="!toggle_sort_data['date_summary_graph_data']"></nvd3>
                            <nvd3 options="flatSummaryBarChart" data="toggle_sort_data['date_summary_graph_data']"
                              ng-if="toggle_sort_data['date_summary_graph_data']"></nvd3>
                          </div>
                        </div>

                      </div>
                    </div>
                    <!-- /Leads By Date -->
                  </div>
                </div>
              </div>
          </uib-tab>

        </div>
        <!--END : Analysis  -->

        </uib-tabset>


        <!--content-top></content-top-->
        <div ui-view autoscroll="true" autoscroll-body-top></div>
      </div>
    </div>
    <back-top></back-top>


    <!--Start: Code for showing image Modal Window -->

</div>





</div><!-- middle-section -->
</div><!-- wrapperBox -->
</main>
</div>




<!DOCTYPE html>
<html class="ng-cloak" lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <link href="css/main.css" rel="stylesheet" media="screen">
  <link href="css/preloader.css" rel="stylesheet" media="screen">
  <link href="css/blur_admin_theme.css" rel="stylesheet" media="screen">
  <link href="css/buttons.css" rel="stylesheet" media="screen">
  <link href="css/datepicker.css" rel="stylesheet" media="screen">
  <link href="css/icons.css" rel="stylesheet" media="screen">
  <link href="css/layout.css" rel="stylesheet" media="screen">
  <link href="css/socicon.css" rel="stylesheet" media="screen">
  <link href="css/table.css" rel="stylesheet" media="screen">
  <link href="css/pageTop.css" rel="stylesheet" media="screen">
  <link href="css/backTop.css" rel="stylesheet" media="screen">
  <link href="css/baWizard.css" rel="stylesheet" media="screen">
  <link href="css/contentTop.css" rel="stylesheet" media="screen">
  <link href="css/msgCenter.css" rel="stylesheet" media="screen">
  <link href="css/progressRound.css" rel="stylesheet" media="screen">
  <link href="css/sidebar.css" rel="stylesheet" media="screen">
  <link href="css/widgets.css" rel="stylesheet" media="screen">
  <link href="css/panel.css" rel="stylesheet">
  <link href="css/tabs.css" rel="stylesheet" media="screen">
  <link href="css/accordion.css" rel="stylesheet" media="screen">
  <link href="css/dashboard-theme.css" rel="stylesheet" media="screen">
  <link href="css/sass-app.css" rel="stylesheet" media="screen">
  <link href="css/sass-app-map.css" rel="stylesheet" media="screen">
  <link href="css/sidePanel.css" rel="stylesheet" media="screen">
  <link href="css/custom.css" rel="stylesheet" media="screen">
  <link rel="stylesheet" href="modules/common/loadingicon/loading-spinner.tmpl.css" />
  <link rel="stylesheet" type="text/css" href="modules/pages/dashboard/chat.css">
  <!-- <script data-require="jquery@*" data-semver="2.1.4" src="https://code.jquery.com/jquery-2.1.4.js"></script> -->
  <link rel="icon" type="image/png" sizes="16x16" href="assets/img/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="assets/img/favicon-96x96.png">
  <link rel="stylesheet" type="text/css" href="modules/pages/DashBoard/adminDashboard/percentage-circular-bar.css">
  <link href="https://netdna.bootstrapcdn.com/font-awesome/2.0/css/font-awesome.css" rel="stylesheet">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="css/smallscreen.css" rel="stylesheet" media="screen">
</head>

<body>

  <div class="body-bg"></div>

  <div ng-loading="loading"></div>
  <!--For displaying loading icon-->
  <div ng-show="isEmpty" style="text-align:center;">
    <h2>{{msg}}</h2>
  </div>

  <main ng-show="!isEmpty" ng-class="{ 'menu-collapsed': $baSidebarService.isMenuCollapsed() }" ng-if="loading">



  </main>

  <style type="text/css">
    .viewLeadstable td {
      vertical-align: middle !important;
      height: 62px;
    }

    .table-responsive {
      overflow-x: hidden !important;
    }

    .viewLeadstable .btn {
      width: 122px !important;
      margin-right: -50px !important;
    }

    .viewLeadstable-new th {
      width: 200px !important;
    }


    .modalForTAble .modal-body {
      padding: 10px 0;
    }

    .modalForTAble table {
      width: 100%;
    }

    .modalForTAble table h4 {
      margin: 0;
    }

    .modalForTAble table tr th,
    .modalForTAble table tr td {
      width: 50%;
      background-color: unset;
      vertical-align: middle;
      text-align: left;
      color: #000000;
      padding: 6px 10px;
      border: 1px solid #eee;
    }

    .b2b-dash-table.modalForTAble table tr th,
    .b2b-dash-table.modalForTAble table tr td {
      width: 100%;
      text-align: left;
    }

    .b2b-table-style.viewLeadstable table thead, .b2b-table-style table thead{
      table-layout: auto;
      display: table-header-group;
    }
    .b2b-table-style.viewLeadstable table tfoot tr , .b2b-table-style table tfoot tr {
      table-layout: auto;
      display: table-row;
    }

    .b2b-table-style.viewLeadstable table tbody,
    table.viewLeadstable-new.b2b-table-style thead {
      display: table-row-group !important;
    }

    table.viewLeadstable-new.b2b-table-style thead{
      display: table-row;
      table-layout: auto;
    }
    /* .viewLeadstable table tbody{

    } */

    .viewLeadstable.b2b-table-style .btn{
      margin: 0 !important;
    }
    .date_wrapper{
      position: relative;
    }
    .date_wrapper button.smallBtn.calendar{
      position: absolute;
      top: 6px;
      right: 10px;
    }
    .select_city{
      height: 44px;
    }
    .date_wrapper .uib-datepicker-popup{
      max-width: 300px;
    }
   .date_wrapper .uib-datepicker table .btn{
      width: auto !important;
      background-color: #fff;
      border-radius: 0;
    }
    .date_wrapper .uib-datepicker table .btn.uib-title{
      width: 102% !important;
      border-radius: 0 !important;
    }
    .date_wrapper .uib-datepicker table thead th{
      background: #8e1921;
      text-align: center;
      color: #fff;
    }
    .date_wrapper .uib-datepicker table td{
      height: auto;
      border: 1px solid #ddd;
    }
    .uib-datepicker-popup button.btn{
      width: auto !important;
    }
  </style>



  <!-- Modal -->
  <div class="modal fade modalForTAble b2b-dash-table" id="myModal" role="dialog">
    <div class="modal-dialog modal-md">
      <div class="modal-content">
        <div style="background-color: #8e1921; color:#FFFFFF;" class="modal-header">
          <button style="color:#FFFFFF;" type="button" class="close" data-dismiss="modal">&times;</button>
          <h2 class="modal-title">Lead Details  ({{lead_id}})</h2>
        </div>
        <div style="padding:15px;" class="modal-body">
          <div>
            <div>
              <table class="table">
                <tr>
                  <th style="background-color: #8e1921; color: #fff;" bgcolor="#8e1921">
                    <h4>Sector : </h4>
                  </th>
                </tr>
                <tr>
                  <td>
                    <h4>Sector : {{leadDetailDataList.sector.sector}}</h4>
                  </td>
                </tr>
                <tr>
                  <!-- <td></td> -->
                  <td>
                    <h4>Sub-Sector : {{leadDetailDataList.sector.subsector}}</h4>
                  </td>
                </tr>
              </table>
            </div><br>
            <div>
              <table class="table">
                <tr>
                  <th style="background-color: #8e1921; color: #fff;" bgcolor="#8e1921">
                    <h4>Sector Specific Questions :</h4>
                  </th>
                </tr>
                <tr>
                  <td>
                    <div class="tool-tip" ng-init="tips1=false">
                      <h4>Q1.Response : {{leadDetailDataList.lead_info.L4}}<i class="fa fa-question tool-icon" ng-mouseover="tips1=true"ng-mouseleave="tips1=false"></i>
                        <div ng-show="tips1" class="tool-popup">
                            <div>Question1:{{leadDetailDataList.lead_info.L4_question.header}}</div>
                            <div>A:{{leadDetailDataList.lead_info.L4_question.a}}</div>
                            <div>B:{{leadDetailDataList.lead_info.L4_question.b}}</div>
                            <div>C:{{leadDetailDataList.lead_info.L4_question.c}}</div>
                        </div>
                      </h4>
                    </div>
                  </td>
                </tr>
                <tr>
                  <!-- <td></td> -->
                  <td>
                    <div class="tool-tip" ng-init="tips2=false">
                      <h4>Q2.Response: {{leadDetailDataList.lead_info.L5}}<i class="fa fa-question tool-icon" ng-mouseover="tips2=true"ng-mouseleave="tips2=false"></i>
                        <div ng-show="tips2" class="tool-popup">
                            <div>Question2:{{leadDetailDataList.lead_info.L5_question.header}}</div>
                            <div>A:{{leadDetailDataList.lead_info.L5_question.a}}</div>
                            <div>B:{{leadDetailDataList.lead_info.L5_question.b}}</div>
                            <div>C:{{leadDetailDataList.lead_info.L5_question.c}}</div>
                        </div>
                      </h4>
                    </div>                    
                  </td>
                </tr>
                <tr>
                  <!-- <td></td> -->
                  <td>
                    <div class="tool-tip" ng-init="tips3=false">
                      <h4>Q3.Response: {{leadDetailDataList.lead_info.L6}}<i class="fa fa-question tool-icon" ng-mouseover="tips3=true"ng-mouseleave="tips3=false"></i>
                        <div ng-show="tips3" class="tool-popup">
                            <div>Question3:{{leadDetailDataList.lead_info.L6_question.header}}</div>
                            <div>A:{{leadDetailDataList.lead_info.L6_question.a}}</div>
                            <div>B:{{leadDetailDataList.lead_info.L6_question.b}}</div>
                            <div>C:{{leadDetailDataList.lead_info.L6_question.c}}</div>
                        </div>
                      </h4>
                    </div>
                  </td>
                </tr>
              </table>
            </div><br>
            <div>
              <table class="table">
                <tr>
                  <th style="background-color: #8e1921; color: #fff;" bgcolor="#8e1921">
                    <h4>User Details:</h4>
                  </th>
                </tr>
                <td>
                  <h4>Name : {{leadDetailDataList.user_info.name}}</h4>
                </td>
                </tr>
                <tr>
                  <!-- <td></td> -->
                  <td>
                    <h4>Contact No. : {{leadDetailDataList.user_info.number}} , {{leadDetailDataList.user_info.designation}}</h4>
                  </td>
                </tr>
                <tr>
                  <!-- <td></td> -->
                  <!-- <td>
                    <h4>Designation : {{leadDetailDataList.user_info.designation}}</h4>
                  </td> -->
                </tr>
              </table>
            </div><br>
            <div>
              <table class="table">
                <tr>
                  <th style="background-color: #8e1921; color: #fff;">
                    <h4>Address :</h4>
                  </th>
                </tr>
                <tr>
                  <td>
                    <h4 style="line-height:1.5;">{{leadDetailDataList.adress_details.address}}</h4>
                  </td>
                </tr>
                <tr>
                  <!-- <td></td> -->
                  <td>
                    <h4>Area : {{leadDetailDataList.adress_details.area}}</h4>
                  </td>
                </tr>
                <tr>
                  <!-- <td></td> -->
                  <td>
                    <h4>City : {{leadDetailDataList.adress_details.city}}</h4>
                  </td>
                </tr>
                <tr>
                  <!-- <td></td> -->
                  <td>
                    <h4>State : {{leadDetailDataList.adress_details.state}}</h4>
                  </td>
                </tr>
                <tr>
                  <!-- <td></td> -->
                  <td>
                    <h4>Country : {{leadDetailDataList.adress_details.country}}</h4>
                  </td>
                </tr>
                <tr>
                  <!-- <td></td> -->
                  <td>
                    <h4>Pin Code : {{leadDetailDataList.adress_details.pincode}}</h4>
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--sendEmailModal start  -->
  <div id="sendEmailModal" class="modal fade modal-styles">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body">
          <div class="modalBodyBox">
            <h3>Send Emails for {{ proposalDetail.name }}</h3>
            <button type="button" class="close" ng-click="closeModel()" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true"></span>
            </button>
            <label>Select Email Type:</label>
            <select class="field" name="" ng-model="emailModel.selected">
              <option value="" disabled selected hidden>Email Type</option>
              <option value="recce">Recce Email</option>
              <option value="pipelineOfSupplier">Pipelined Societies Email</option>
              <option value="listOfSupplier">Booking(Upcoming Society activation Email)</option>
              <option value="activationOfSupplier">Activation Of Society,Branding and Permission Email</option>
              <option value="prehype">Prehype Email</option>
            </select>
            <div class="sendEmail1">
              <input type="email" class="field"  placeholder="Enter Multiple User's Email To Send Mail " ng-model="emailModel.email">
               <!-- <div layout="column" ng-cloak>
                <md-content class="md-padding" layout="column">
                    <md-chips
                    md-type="email"
                    md-on-add="validateEmail($chip)"
                    ng-model="emailModel.email" value="{{ng-model}}" input-aria-label="Emails"
                    md-separator-keys="customKeys" placeholder="Enter Multiple User's Email To Send Mail "
                    secondary-placeholder="Enter Email Id"
                    input-aria-describedby="customSeparatorKeyDescription">
                    </md-chips>
                </md-content> -->
               </div>

               <div>
                  <label>Note :- Use comma separation between emails to send multiple emails to users at the same time</label>
                </div>
                <div class="buttons buttons-flex">
                  <button type="button" name="button" ng-Click="sendBookingEmails(emailModel.email)" class="smallBtn" ng-disabled="isEmailButton || emailBtnDisabled || !emailModel.selected">Send email for given user</button>
                  <span>OR</span>
                  <button type="button" name="button" class="smallBtn" ng-click="sendBookingEmails(emailModel.email)" ng-disabled="emailBtnDisabled || !emailModel.selected">Send email to all (Default)</button>
                
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- modal -->  
  <!-- modal for download -->
  <div id="downloadLeads" class="modal fade modal-styles">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body">
          <div class="modalBodyBox">
            <h3>Download All leads</h3>
            
             <button type="button" class="close" ng-click="closeModel()" data-dismiss="modal" aria-label="Close">
               <span aria-hidden="true"></span>
             </button>
              <div class="sendEmail1">
                <div class="buttons">
                  <div>
                    <a href="https://stagingapi.machadalo.com/v0/ui/b2b/download-leads-summary/?lead_type={{filterType}}&supplier_code=all&campaign_id={{campaign_id}}"><button type="button" name="button" class="smallBtn" ng-click="downloadAll_leads(campaign_id,filterType)">Download Lead</button></a>
                    <!-- <a href="https://stagingapi.machadalo.com/v0/ui/b2b/download-leads-summary/?lead_type={{filterType}}&supplier_code=all&campaign_id={{campaign_id}}"><button type="button" name="button" class="smallBtn" ng-click="downloadAll_leads(campaign_id,filterType)">Download Lead</button></a> -->
                  </div>
                </div>
             </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<!--START : view external comments modal  -->
<div id="viewComments" class="modal fade theme-modal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4>View Comments {{campaignDataForComment.name}}</h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"></span>
          </button>
      </div>
      <div class="modal-body">
        <div class="modalBodyBox">
          <table class="table-data">
            <h3>Internal Comments</h3>
            <tr ng-repeat="item in internalComment">
              <td>
                <div>
                  <p>{{item.comment}}</p>
                </div>
                <div>
                  <img ng-src="{{userIcon}}">
                  <b>{{item.created_by}}:</b> 
                  <span><small>{{item.created_at|date:'medium'}}</small></span>
                </div>
              </td>
            </tr>
          </table>
          <div style="margin-top: 15px;">
            <textarea class="field"  rows="8" cols="200" ng-model="mymodel.comment" placeholder="Write here.."></textarea>
            <button class="smallBtn" type="button" ng-click="commentValue(mymodel,id_basic,req_id_basic)" ng-click="valuechange(mymodel,decisionPanding._id,decisionPanding.requirement_id)">Add Comment</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- modal -->  

<!--START : view external and internal comments lead details  -->
<div id="viewCommentsLeadDetails" class="modal fade theme-modal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2>View Comments {{campaignDataForComment.name}}</h2>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"></span>
          </button>
      </div>
      <div class="modal-body">
        <div class="modalBodyBox">
          <table class="table-data">
            <h3>Internal Comments</h3>
            <tr ng-repeat="item in internalComment">
              <td>
                <div>
                  <p>{{item.comment}}</p>
                </div>
                <div>
                  <img ng-src="{{userIcon}}">
                  <b>{{item.created_by}}:</b> 
                  <span><small>{{item.created_at|date:'medium'}}</small></span>
                </div>
              </td>
            </tr>
          </table><br>
          <table class="table-data">
            <h3>External Comments</h3>
            <tr ng-repeat="item in externalComment">
              <td>
                <div>
                  <p>{{item.comment}}</p>
                </div>
                <div>
                  <img ng-src="{{userIcon}}">
                  <b>{{item.created_by}}:</b> 
                  <span><small>{{item.created_at|date:'medium'}}</small></span>
                </div>
              </td>
            </tr>
          </table>
          <div  style="margin-top: 15px;">
            <textarea class="field"  rows="8" cols="200" ng-model="mymodel.comment" value="" placeholder="Write here.."></textarea>
            <button class="smallBtn" type="button" ng-click="commentValueDetails(mymodel,id_detail,req_id_detail)" ng-click="valuechange(mymodel,decisionPanding.macchadalo_client_status,decisionPanding._id,decisionPanding.requirement_id)">Add Comment</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- modal --> 
</body>

</html>