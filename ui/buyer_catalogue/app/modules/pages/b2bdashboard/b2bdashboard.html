<div ng-cloak ng-init="leadCountByDate()">
  <div ng-loading="loading"></div>
  <!--For displaying loading icon-->
  <main ng-show="!isEmpty" ng-class="{ 'menu-collapsed': $baSidebarService.isMenuCollapsed() }" ng-if="loading">
    <div class="wrapperBox">
      <div ng-show="isEmpty" style="text-align:center;">
        <h2>{{msg}}</h2>
      </div>
      <nav-bar></nav-bar>
      <div class="middle-section">

        <div class="body-bg"></div>




        <div class="al-main">
          <div class="al-content">
            <uib-tabset class="dashboard-tab" active="selectTabIndex.value">
              <uib-tab  index="0">
                <uib-tab-heading>
                  <h5 style="margin-left:-10px">
                    <span style="color:#ffffff;" class="glyphicon glyphicon-backward" ng-click="getRecentActivity(pre)"
                      data-toggle="tooltip" title="Go To Previous Activity!"></span>
                    <span style="color:#ffffff;" class="glyphicon glyphicon-chevron-left"
                      ng-click="getDate(pre)"></span>
                    <span style="margin-left:10px;margin-right:10px;">{{date|date : "dd-MM-yyyy"}}</span>
                    <span style="color:#ffffff;" class="glyphicon glyphicon-chevron-right"
                      ng-click="getDate(next)"></span>
                    <span style="color:#ffffff;" class="glyphicon glyphicon-forward" ng-click="getRecentActivity(next)"
                      data-toggle="tooltip" title="Go To Next Activity!"></span>
                    <span style="color:#ffffff;left:16px;margin-top:1px;"
                      class="glyphicon glyphicon-calendar pull-right" ng-click="visible=!visible;">
                      <div ng-class="{'is-visible':visible}" class="menu">
                        <table class="table-responsive table table-bordered sidePanelTable" style="width:300px;">
                          <thead>
                            <tr>
                              <td style="color:#ffffff !important;" style="width:20px">DATE</td>
                              <td style="width:20px">
                                <button type="button" name="button" class="col-xs-5"
                                  style="margin: 0px 9px 0px -1px;width:80px;height:70px;color:black;background-color:#ffe000;">Total
                                  Release (%)</button>

                              </td>

                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-repeat="(key,item) in historyData" ng-if="$index < 15">
                              <td class="col-xs-3" style="background-color: #8e1921;"><a
                                  ng-click="getDateData(key)">{{key| date :'d-MMM-yy'}}</a></td>
                              <td class="col-xs-2">
                                <button class="col-xs-5 " style="width:80px;height:35px;" id="greenColor"
                                  ng-if="item['RELEASE'].actual/item['RELEASE'].total*100==100" type="button"
                                  name="button"
                                  class="btn btn-danger">{{item['RELEASE'].actual/item['RELEASE'].total*100|limitTo:4||NA}}
                                  &#10004;</button>
                                <button class="col-xs-5 " style="width:80px;height:35px;" id="lightGreen"
                                  ng-if="item['RELEASE'].actual/item['RELEASE'].total*100 >= 75 && item['RELEASE'].actual/item['RELEASE'].total*100 != 100"
                                  type="button" name="button">
                                  {{item['RELEASE'].actual/item['RELEASE'].total*100|limitTo:4||NA}}</button>
                                <button class="col-xs-5 " style="width:80px;height:35px;" id="yellow"
                                  ng-if="item['RELEASE'].actual/item['RELEASE'].total*100 >= 50 && item['RELEASE'].actual/item['RELEASE'].total*100 < 75"
                                  type="button" name="button">
                                  {{item['RELEASE'].actual/item['RELEASE'].total*100|limitTo:4||NA}}</button>
                                <button class="col-xs-5 " style="width:80px;height:35px;" id="redColor"
                                  ng-if="item['RELEASE'].actual/item['RELEASE'].total*100 < 50" type="button"
                                  name="button">{{item['RELEASE'].actual/item['RELEASE'].total*100|limitTo:4||NA}}</button>
                                <button class="col-xs-5 " style="width:80px;height:35px;cursor:default;"
                                  ng-if="!item['RELEASE'].total" type="button" name="button">NA</button>
                              </td>

                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </span>
                  </h5>

                </uib-tab-heading>

                <div class="row panel-hide">
                  <div class="row">
                    <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-2 dashboard-side-label">
                    </div>
                    <div class="col-xlg-10 col-lg-10 col-md-10 col-sm-10 col-xs-10">
                      <!-- <div class="row zeroCampAct">
                        <h1>NO LEAD ACTIVITY !!</h1>
                      </div> -->
                    </div>
                  </div>
                  <!-- start b2b code -->

                  <!-- end b2b code -->
                  <div class="row">
                    <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-2 dashboard-side-label">
                      <h4 style="margin-left:140px;">LEAD COUNT </h4>
                    </div>
                    <div class="col-xlg-10 col-lg-10 col-md-10 col-sm-10 col-xs-10">
                      <div class="row">
                        <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-6" style="margin-left:140px;">
                          <div class="form-group has-success">
                            <div class="pie-chart-item-container ng-scope">
                              <div class="custom-panel">
                                <uib-accordion close-others="oneAtATime">
                                  <div uib-accordion-group panel-class="panel panel-blur date-grid-tab custom-panel"
                                    id="custompanelmobile">
                                    <div uib-accordion-heading class="container">
                                      <div class="pie-chart-item ng-scope">
                                        <div ng-click="leadCampaignData()">
                                          {{leadCountData.lead_count}}
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </uib-accordion>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-xlg-2 col-lg-2 col-md-2 col-sm-2 col-xs-2 dashboard-side-label">
                      <h4 style="margin-left:140px;">EXISTING CLIENT FEEDBACK COUNT </h4>
                    </div>
                    <div class="col-xlg-10 col-lg-10 col-md-10 col-sm-10 col-xs-10">
                      <div class="row">
                        <div class="col-xlg-6 col-lg-6 col-md-6 col-sm-6 col-xs-6" style="margin-left:140px;">
                          <div class="form-group has-success">
                            <div class="pie-chart-item-container ng-scope">
                              <div class="custom-panel">
                                <uib-accordion close-others="oneAtATime">
                                  <div uib-accordion-group panel-class="panel panel-blur date-grid-tab custom-panel"
                                    id="custompanelmobile">
                                    <div uib-accordion-heading class="container">
                                      <div class="pie-chart-item ng-scope">
                                        <div ng-click="existingClientFeedbackData()">
                                          {{leadCountData.existing_client_count}}
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </uib-accordion>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- start lead details -->
                  <div ng-hide="leadCampaignTable">
                    <div class="campaigndetailtable">
                      <div class="col-md-12">
                        <div class="panel-heading" style="height:70px;">
                          <h5 style="background:'red';color:white;">Lead Details</h5>
                          <h5 class="pull-right">({{date|date : "dd-MM-yyyy"}})</h5>
                        </div>
                        <br />
                        <input type="text" class="form-control" ng-model="searchQuery" placeholder="search">
                        <br />
                        <div class="table-responsive">
                          <table class="table">
                            <thead>
                              <tr>
                                <th>Index</th>
                                <th>Campaign Name</th>
                                <th>Total purchased</th>
                                <th>Total Available</th>
                              </tr>
                            </thead>

                            <tbody>
                              <tr ng-repeat="item in campaignLeadData.campaigns | filter : searchQuery">
                                <td>{{$index + 1}}</td>
                                <td><a ng-click="getLeadSupplier(item)">{{item.name}}</a>
                                </td>
                                <td>{{item.purchased_count}}</td>
                                <td>{{item.not_purchased_count}}</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- end lead details -->
                  <!-- start lead suppler detail -->
                  <div class="campaigndetailtable" ng-hide="leadSupplierTable">
                    <div class="col-md-12">
                      <div class="panel-heading" >
                        <h4><a ng-click="getCampaign(proposalId)" style="color: white;cursor: pointer;">Supplier Details
                            of <span style="color:#ffe000;font-style: italic;text-transform:capitalize;font-weight: 900;text-decoration: underline;"> {{campaignName}} </span> Campaign</a></h4><br />
                        <!-- <div class="row">
                          <span class="pull-left"><label for="heading"><small>Campaign Owner :
                              </small><span><small style="color:orange">{{campaignOwner}}</small> </span></label></span>
                          <span class="pull-right"><label for="heading"><small>Principal Vendor :
                              </small><span><small style="color:orange">{{principalVendor}}</small></span></label></span>  
                        </div> -->
                      </div>

                      <div class="table-responsive">
                        <table class="table" id="tablescroll">
                          <thead>
                            <tr>
                              <th>Supplier Name</th>
                              <th>Flat Count</th>
                              <th>Area</th>
                              <th>City</th>
                            </tr>
                          </thead>
                          <tbody >
                            <tr ng-repeat="supplier in leadSupplierData">
                              <td><b>{{supplier.supplier_name}}</b></td>
                              <td> {{supplier.unit_primary_count}}</td>
                              <td> {{supplier.area}}</td>
                              <td> {{supplier.city}}</td>

                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                  <!-- end lead suppler detail -->

                  <div  ng-hide="existingClientTable">
                    <div class="table-responsive">
                      <table class="table" id="tablescroll">
                        <thead>
                          <tr>
                            <th>Dis-Satisfied Count : {{clientFeedbackData.dissatisfied_count}}</th>
                            <th>Extremely Dis-Satisfied Count : {{clientFeedbackData.extremely_dissatisfied_count}}</th>
                            <th>Satisfied Count : {{clientFeedbackData.satisfied_count}}</th>
                          </tr>
                        </thead>
                      </table>
                    </div>
                  </div>
                </div>
              </uib-tab>



              <uib-tab id="uib-tabs-width" ng-click="getCampaignsList()" index="2">
                <uib-tab-heading>
                  <h5> Summary</h5>
                </uib-tab-heading>
                <div class="container-fluid">

                  <div class="row">
                    <div class="panel panel-default" style="color:'0000ff'">
                      <div class="col-md-12">

                        <!-- <div class="panel-headding campaign-header">
                              <h3 style="color:rgb(53, 9, 6)">Campaign Details</h3>
                            </div> -->

                        <div class="col-md-12 panel-heading content-title CampaignDetails">
                          <h4 ng-if="!selectedCampaignName" style="text-align:center;">All Campaigns Details</h4>
                          <h4 ng-if="selectedCampaignName" style="text-align:center;">Details Of <span style="text-decoration: underline;font-weight: 900;color:#ffe000;font-style: italic;text-transform:capitalize">{{selectedCampaignName}} </span> 
                          </h4>
                          <span>
                            <!-- <div class="row" ng-if="selectedCampaignName">
                              <span class="pull-left"><label for="heading"><small>Campaign Owner :
                                  </small><span><small>{{campaignOwner}}</small> </span></label></span>
                              <span class="pull-right"><label for="heading"><small>Principal Vendor :
                                  </small><span><small>{{principalVendor}}</small></span></label></span>
                            </div> -->
                          </span>
                        </div>
                        <br />
                        <br />

                        <div class="col-md-3">


                          <div class="panel-group" id="accordion">
                            <!-- <div class="panel panel-default">
                              <div ng-if="showCampaignGraph" class="panel-heading" ng-click="getCampaigns()">
                                <h4 class="panel-title">
                                  All Campaigns
                                </h4>

                              </div>
                            </div> -->
                            <!-- <div class="panel panel-default">
                              <div class="row" style="width:100%;margin-left:0px;">
                                <h4 class="panel-title">
                                  <select class="form-control" ng-model="selectedVendor.name"
                                    ng-change="getCampaignsByVendor()">
                                    <option value="">Select Vendor</option>
                                    <option value="{{vendor.vendor_id}}">All</option>
                                    <option value="{{vendor.vendor_id}}" ng-repeat="vendor in vendorsData">
                                      {{vendor.principal_vendor}}</option>
                                  </select>
                                </h4>
                              </div>
                              <div class="animate-show">
                                <div class="panel-bodyDashboard camp-menu-content">
                                  <table class="table">
                                    <tr ng-repeat="vendors in vendorsData">
                                      {{vendors}}
                                    </tr>
                                  </table>
                                </div>
                              </div>
                            </div> -->

                            <!-- <div class="panel panel-default">
                              <div class="row" style="width:100%;margin-left:0px;">
                                <h4 class="panel-title">
                                  <select class="form-control" name="supplierType" ng-model="selectedSupplierType.code"
                                    value="supplierType.value" ng-change="setSupplierType()">
                                    <option value="">Select Supplier Type</option>
                                    <option value="{{supplierType.value}}"
                                      ng-selected="selectedSupplierType == supplierType.value"
                                      ng-repeat="supplierType in supplierTypeCode">{{supplierType.name}}</option>
                                  </select>
                                </h4>
                              </div>

                            </div> -->
                            <div class="panel panel-default"
                              ng-click="getCampaignsMenu(campaignStatus.completed.status)">
                              <div class="panel-heading">
                                <h4 class="panel-title">
                                  Completed Campaigns
                                </h4>
                              </div>
                              <div id="completed" class="animate-show" ng-show="campaignStatus.completed.value">
                                <div class="panel-bodyDashboard camp-menu-content">
                                  <table class="table">
                                    <tr ng-repeat="campaign in campaignListData.completed_campaigns | orderBy: 'name'">
                                      <td ng-click="leadCount(campaign)">
                                        {{campaign.name}}
                                      </td>
                                    </tr>
                                  </table>
                                </div>
                              </div>
                            </div>
                            <div class="panel panel-default" ng-click="getCampaignsMenu(campaignStatus.ongoing.status)">
                              <div class="panel-heading">
                                <h4 class="panel-title">
                                  Ongoing Campaigns
                                </h4>
                              </div>
                              <div id="ongoing" class="animate-show" ng-show="campaignStatus.ongoing.value">
                                <div class="panel-bodyDashboard camp-menu-content">
                                  <table class="table">
                                    <tr ng-repeat="campaign in campaignListData.ongoing_campaigns | orderBy: 'name'">
                                      <td ng-click="leadCount(campaign)">
                                        {{campaign.name}}
                                      </td>
                                    </tr>
                                  </table>
                                </div>
                              </div>
                            </div>

                            <div class="panel panel-default">
                              <div class="panel-heading" ng-click="switchToInventory(campaignStatus.upcoming.status)">
                                <h4 class="panel-title">
                                  Upcoming Campaigns
                                </h4>
                              </div>
                              <!-- <div id="upcoming" class="animate-show" ng-show="campaignStatus.upcoming.value">
                                          <div class="panel-bodyDashboard camp-menu-content">
                                              <table class="table">
                                                  <tr ng-repeat="campaign in campaignData.upcoming_campaigns">
                                                    <td ng-click="getSuppliersOfCampaignWithStatus(campaign)">
                                                      {{campaign.name}}
                                                    </td>
                                                  </tr>
                                              </table>
                                          </div>
                                      </div> -->
                            </div>
                            <div class="panel panel-default">
                              <div class="panel-heading" ng-click="getCampaignsMenu(campaignStatus.onhold.status)">
                                <h4 class="panel-title">
                                  On Hold Campaigns
                                </h4>
                              </div>
                              <div id="onhold" class="animate-show" ng-show="campaignStatus.onhold.value">
                                <div class="panel-bodyDashboard camp-menu-content">
                                  <table class="table">
                                    <tr ng-repeat="campaign in campaignListData.onhold_campaigns | orderBy: 'name'">
                                      <td ng-click="leadCount(campaign)">
                                        {{campaign.name}}
                                      </td>
                                    </tr>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                       <div style="color:red;text-align: center;margin-top: 10px" ng-if="hideDonetOne && hideDonettwo"><h4>Campaign Not Found.</h4></div>

                        <div class="row col-md-4" ng-hide="hideDonetOne">
                          <nvd3 options="options" data="campaignChartdata"></nvd3>
                          <!-- <nvd3 options="options1" data="campaignChartdata" ng-if="showSingleCampaignChart"></nvd3> -->
                        </div>
                        <div class="col-md-5 LeadsTable" ng-hide="hideDonetOne">
                          <div class="panel-heading content-title">
                            <h5 style="background:'red';color:white;" ng-if="!selectedCampaignName">All Campaign
                              Details </h5>
                              <h5 style="background:'red';color:white;" ng-if="selectedCampaignName"><span style="text-decoration: underline;font-weight: 900;color:#ffe000;font-style: italic;text-transform:capitalize">{{selectedCampaignName}} </span> Campaign
                                Details </h5>
                            <!-- <h5 style="background:'red';color:white;" ng-if="showSingleCampaignChart">Supplier / Leads
                              Details</h5> -->
                          </div>

                          <div class="supplierTable-style">
                            <table class="table-responsive table table-bordered equal-width">
                              <thead>
                                <tr style="font-size:12px;">
                                 
                                  <td>Leads Offered (premium) </td>
                                  <td>Leads Purchased</td>
                                  <td>Leads Purchased %</td>
                                  <!-- <td>Leads Assigned</td> -->
                                  <td>Leads Remaining</td>
                                  <td>Leads Remaining %</td>
                                  <!-- <td>Total Points Purchased (ultra)</td>
                                  <td>Overall Licenses Remaining %</td> -->
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                 
                                  <td>{{AllLeadsData.total_leads}}</td>
                                  <td>{{AllLeadsData.total_leads_purchased}}</td>
                                  <td>{{AllLeadsData.leads_purchased_per}}%</td>
                                  <!-- <td></td> -->
                                  <td>{{AllLeadsData.leads_remain}}</td>
                                  <td>{{AllLeadsData.leads_remain_per}}%</td>
                                  <!-- <td></td>
                                  <td></td> -->
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                        <div class="row col-md-12" ng-hide="hideDonettwo">
                          <div class="col-md-3"></div>
                          <div class="col-md-4">
                            <nvd3 options="feedbackOptions" data="campaignChartdatafeedback"></nvd3>
                            <!-- <nvd3 options="options1" data="campaignChartdata" ng-if="showSingleCampaignChart"></nvd3> -->
                          </div>
                          <div class="col-md-5 LeadsTable">
                            <div class="panel-heading content-title">
                              <h5 style="background:'red';color:white;">Current Client Feedback Summary </h5>
                              <!-- <h5 style="background:'red';color:white;" ng-if="showSingleCampaignChart">Supplier / Leads
                              Details</h5> -->
                            </div>

                            <div class="supplierTable-style">
                              <table class="table-responsive table table-bordered equal-width">
                                <thead>
                                  <tr style="font-size:12px;">
                               
                                    <td>Total Current </td>
                                    <td>Dis Satisfied Purchased (%)</td>
                                    <td>Dis Satisfied Not Purchased</td>
                                    <td>Satisfied</td>
                                    <!-- <td>Total Points Purchased (ultra)</td>
                                    <td>Overall Licenses Remaining %</td> -->
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                   
                                    <td>{{leadFeedbackData.total_leads}}</td>
                                    <td>{{leadFeedbackData.dissatisfied_purchased}}
                                      ({{leadFeedbackData.dissatisfied_purchased_per}}%)</td>
                                    <td>{{leadFeedbackData.dissatisfied_not_purchased}}</td>
                                    <td>{{leadFeedbackData.total_satisfied}}</td>
                                    <!-- <td></td>
                                    <td></td> -->


                                  </tr>
                                </tbody>
                              </table>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                    <!-- start lead data -->
                    <div class="" ng-if="showLeadtable">
                      <div class="row">
                        <div class="col-md-12">
                          <div class="campaigndetailtable">
                            <div class="panel-heading" style="height:70px;">
                              <h5 style="background:'red';color:white;text-transform:capitalize" ng-if="selectedCampaignName">Details of Leads
                                Purchased
                                <span style="color:#ffe000;font-style: italic;text-transform:capitalize;font-weight: 900;text-decoration: underline;">{{selectedCampaignName}} </span></h5>
                              <h5 style="background:'red';color:white;text-transform:capitalize" ng-if="!selectedCampaignName">Details of All Leads</h5>

                            </div>
                            <br />
                            <input type="text" class="form-control" ng-model="searchQuery" placeholder="search">
                            <br />
                            <div class="table-responsive">
                              <table class="table" cellSpacing="0" cellPadding="0">
                                <thead>
                                  <tr>
                                    <th>INDEX</th>
                                    <th>Client Name</th>
                                    <th>Area <br> (SubArea)</th>
                                    <th>Client Type</th>
                                    <th>Primary Count</th>
                                    <th>Lead Date</th>
                                    <th>Lead Type</th>
                                  </tr>
                                  <tr colspan="12">
                                    <td></td>
                                    <td><input ng-model="f.supplier_data.name" class="form-control"
                                        placeholder="Search">
                                      <hr>
                                    </td>
                                    <td><input ng-model="f.supplier_data.area" class="form-control"
                                        placeholder="Search">
                                      <hr>
                                    </td>
                                  </tr>
                                  <hr>
                                </thead>

                                <tbody class="detailedTable">
                                  <div class="row">
                                    <tr
                                      ng-repeat="supplier in supplierData |filter:searchQuery |filter : f | orderBy:sort:reversesort">
                                      <td>{{$index + 1}}</td>
                                      <td>{{supplier.supplier_data.name}}</td>
                                      <td>{{supplier.supplier_data.area}} <br> ({{supplier.supplier_data.subarea}})</td>
                                      <td>{{supplier.supplier_data.supplier_type_name}}</td>
                                      <td>{{supplier.supplier_data.flat_count}}</td>
                                      <td>{{supplier.created_at |  date:'medium'}}</td>
                                      <td>{{supplier.company_lead_status}}</td>
                                    </tr>

                                  </div>
                                </tbody>
                                <tfoot>
                                  <tr>
                                    <td>TOTAL</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>

                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                  </tr>
                                </tfoot>
                              </table>
                            </div>
                          </div>
                        </div>
                      </div>



                      <div class="row">
                        <div class="col-md-12">
                          <div class="panel-heading content-title">
                            <h5 style="background:'red'" ng-if="selectedCampaignName">Map View for <span style="text-decoration: underline;font-weight: 900;color:#ffe000;font-style: italic;text-transform:capitalize">{{selectedCampaignName}} </span></h5>
                            <h5 style="background:'red'" ng-if="!selectedCampaignName">Map View for All Campaign</h5>
                          </div>
                          <style type="text/css">
                            .angular-google-map-container {
                              height: 550px;
                              color: black;
                            }
                          </style>
                          <!-- <p class="map_icon_map">
                          <span style="color:#000000"> <img
                              src="http://maps.google.com/mapfiles/ms/icons/green-dot.png">Completed</span>
                          <span style="color:#000000"> <img
                              src="http://maps.google.com/mapfiles/ms/icons/orange-dot.png">Upcoming</span>
                          <span style="color:#000000"> <img
                              src="http://maps.google.com/mapfiles/ms/icons/blue-dot.png">Ongoing</span>
                        </p> -->
                          <ui-gmap-google-map center="map.center" zoom="map.zoom" draggable="false" options="options"
                            bounds="map.bounds" control="googlemap">
                            <ui-gmap-window show="show" coords='windowCoords'>
                              <div>
                                <table class="table-responsive table">
                                  <div class="">
                                    <h3>{{space.title.name}}</h3>
                                  </div>
                                  <tr>
                                      <td>{{mapTextFirst}}</td>
                                      <td><small>{{(space.title.leadDate | date:'medium')  || 'NA'}}</small>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>{{mapTextSecond}}</td>
                                      <td><small>{{(space.title.leadType)  || 'NA'}}</small>
                                      </td>
                                    </tr>
                                </table>
                              </div>
                            </ui-gmap-window>
                            <ui-gmap-markers models="supplierMarkers" coords="'self'" icon="'icon'" options="'options'"
                              doRebuildAll="true" events="marker.events">
                            </ui-gmap-markers>
                          </ui-gmap-google-map>
                        </div>
                      </div>
                    </div>
                    <!-- end lead data-->

                    <!-- start client feedback data -->
                    <div class="" ng-if="showClientFeedbackTable">
                      <div class="row">
                        <div class="col-md-12">
                          <div class="campaigndetailtable">
                              <div class="panel-heading" style="height:70px;">
                                  <h5 style="background:'red';color:white;text-transform:capitalize" ng-if="selectedCampaignName">Details of Leads
                                    Purchased
                                    <span style="color:#3bff00c4;font-style: italic;text-transform:capitalize">{{selectedCampaignName}} </span></h5>
                                  <h5 style="background:'red';color:white;text-transform:capitalize" ng-if="!selectedCampaignName">Details of All Leads</h5>
    
                                </div>
                            
                            <br />
                            <input type="text" class="form-control" ng-model="searchQuery" placeholder="search">
                            <br />
                            <div class="table-responsive">
                              <table class="table" cellSpacing="0" cellPadding="0">
                                <thead>
                                  <tr>
                                    <th>INDEX</th>
                                    <th>Client Name</th>
                                    <th>Area <br> (SubArea)</th>
                                    <th>Client Type</th>
                                    <th>Primary Count</th>
                                    <th>Survey Date</th>
                                    <th>Satisfaction Level</th>
                                  </tr>
                                  <tr colspan="12">
                                    <td></td>
                                    <td><input ng-model="f.supplier_data.name" class="form-control"
                                        placeholder="Search">
                                      <hr>
                                    </td>
                                    <td><input ng-model="f.supplier_data.area" class="form-control"
                                        placeholder="Search">
                                      <hr>
                                    </td>
                                  </tr>
                                  <hr>
                                </thead>

                                <tbody class="detailedTable">
                                  <div class="row">
                                    <tr
                                      ng-repeat="supplier in supplierData |filter:searchQuery |filter : f | orderBy:sort:reversesort">
                                      <td>{{$index + 1}}</td>
                                      <td>{{supplier.supplier_data.name}}</td>
                                      <td>{{supplier.supplier_data.area}} <br> ({{supplier.supplier_data.subarea}})</td>
                                      <td>{{supplier.supplier_data.supplier_type_name}}</td>
                                      <td>{{supplier.supplier_data.flat_count}}</td>
                                      <td>{{supplier.created_at |  date:'medium'}}</td>
                                      <td>{{supplier.company_lead_status}}</td>
                                    </tr>

                                  </div>
                                </tbody>
                                <tfoot>
                                  <tr>
                                    <td>TOTAL</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>

                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                  </tr>
                                </tfoot>
                              </table>
                            </div>
                          </div>
                        </div>
                      </div>



                      <div class="row">
                        <div class="col-md-12">
                          <div class="panel-heading content-title">
                            <h5 style="background:'red'" ng-if="selectedCampaignName">Map View for <span style="color:#3bff00c4;font-style: italic;text-transform:capitalize">{{selectedCampaignName}} </span></h5>
                            <h5 style="background:'red'" ng-if="!selectedCampaignName">Map View for All Campaign</h5>
                          </div>
                          <style type="text/css">
                            .angular-google-map-container {
                              height: 550px;
                              color: black;
                            }
                          </style>
                          <!-- <p class="map_icon_map">
                          <span style="color:#000000"> <img
                              src="http://maps.google.com/mapfiles/ms/icons/green-dot.png">Completed</span>
                          <span style="color:#000000"> <img
                              src="http://maps.google.com/mapfiles/ms/icons/orange-dot.png">Upcoming</span>
                          <span style="color:#000000"> <img
                              src="http://maps.google.com/mapfiles/ms/icons/blue-dot.png">Ongoing</span>
                        </p> -->
                          <ui-gmap-google-map center="map.center" zoom="map.zoom" draggable="false" options="options"
                            bounds="map.bounds" control="googlemap">
                            <ui-gmap-window show="show" coords='windowCoords'>
                              <div>
                                <table class="table-responsive table">
                                  <div class="">
                                    <h3>{{space.title.name}}</h3>
                                  </div>
                                  <tr>
                                    <td>{{mapTextFirst}}</td>
                                    <td><small>{{(space.title.leadDate |  date:'medium')  || 'NA'}}</small>
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>{{mapTextSecond}}</td>
                                    <td><small>{{(space.title.feedback)  || 'NA'}}</small>
                                    </td>
                                  </tr>
                                </table>
                              </div>
                            </ui-gmap-window>
                            <ui-gmap-markers models="supplierMarkers" coords="'self'" icon="'icon'" options="'options'"
                              doRebuildAll="true" events="marker.events">
                            </ui-gmap-markers>
                          </ui-gmap-google-map>
                        </div>
                      </div>
                    </div>
                    <!-- end client feedback data -->
                  </div>
                </div>
              </uib-tab>
             
              <!--START : Performance Metrics -->
              <!-- <uib-tab id="uib-tabs-width" ng-click="getCampaigns()" index="4">
            
          </div>

          </uib-tab> -->
          <!--END : Performance Metrics  -->

          <!-- view leads start -->
          <uib-tab id="uib-tabs-width"  ng-click="viewCampaignLeads()" index="4">
            <uib-tab-heading>
              <h5>View Leads</h5>
            </uib-tab-heading>
            <div class="container-fluid">
              <div class="panel panel-default">
                  <div class="col-md-12 "  style="text-align:right;margin-bottom:10px;">
                  <button class="btn btn-danger" ng-click="backToCampaign()">Back To Campaigns</button>
                  </div>
                <div class="col-md-6">
                      <h4 class="panel-title">
                        <select class="form-control" ng-model="selectedVendor.name" ng-change="getCampaignsByVendor()">
                          <option value="">Select Vendor</option>
                          <option value="{{vendor.vendor_id}}">All</option>
                          <option value="{{vendor.vendor_id}}" ng-repeat="vendor in vendorsData">{{vendor.principal_vendor}}</option>
                        </select>
                      </h4>
                  </div>
                  <div class="animate-show">
                    <div class="panel-bodyDashboard camp-menu-content">
                        <table class="table">
                            <tr ng-repeat="vendors in vendorsData">
                            {{vendors}}
                            </tr>
                        </table>
                    </div>
                  </div>

                  <div class="col-md-6">
                    <h4 class="panel-title">
                        <select class="form-control" name="supplierType" ng-model="selectedSupplierType.code" value="supplierType.value"   ng-change="setSupplierType()">
                            <option value="">Select Supplier Type</option>
                            <option value="{{supplierType.value}}" ng-selected="selectedSupplierType == supplierType.value" ng-repeat="supplierType in supplierTypeCode">{{supplierType.name}}</option>
                          </select>
                      </h4>
                    </div>

              </div><br /><br />
              <!-- <div class="viewLeadstable" ng-if="showCampaigns"> -->
                  <div class="viewLeadstable">
                <br /><br /><br /><br />
                <input type="text" class="form-control" ng-model="searchQuery" placeholder="search">
                  <div class="table-responsive">
                  <table class="table">
                <thead>
                    <tr>
                      <th>Index</th>
                      <th style="width:200px;" class="col-md-2">Campaign Name</th>
                      <th ng-click="Sort('start_date')">Start Date <a><i class="icon-sort" style="color:white;"></i></a></th>
                      <th>End Date</th>
                      <!-- <th>Phase</br>Completed</th> -->
                      <th>Campaign Status</th>
                      <th style="width:100px;" class="col-md-2" ng-click="Sort('supplier_count')">Supplier</br> Count <a><i class="icon-sort" style="color:white;"></i></a></th>
                      <th style="width:100px;" class="col-md-2" ng-click="Sort('flat_count')">Unit primary Count<a><i class="icon-sort" style="color:white;"></i></a></th>
                      <th style="width:120px;" class="col-md-2" ng-click="Sort('total_leads')">Purchased Survey <a><i class="icon-sort" style="color:white;"></i></a></th>
                      <!-- <th style="width:100px;" class="col-md-2" ng-click="Sort('hot_leads')">Hot Leads <a><i class="icon-sort" style="color:white;"></i></a></th> -->
                      <th>View Leads</th>
                      <th>Email Leads</th>
                      <th>Download Leads</th>

                    </tr>
                    <tr colspan="9">
                      <td></td>
                      <td><input ng-model="f.name" class="form-control" placeholder="Search"><hr></td>
                      <td></td>
                      <td></td>
                      <td><input ng-model="f.campaign_status" class="form-control" placeholder="Search"><hr></td>

                    </tr>
                  </thead>
                  <tbody>
                    <tr dir-paginate="campaign in leadsDataCampaigns|filter : searchQuery | filter : f | orderBy:sort:reversesort | itemsPerPage:10 track by $index ">
                      <td>{{$index + 1}}</td>
                      <td style="width:200px;" class="col-md-2">{{campaign.name}}</td>
                      <td>{{campaign.start_date|limitTo:10|date:mediumDate}}</td>
                      <td ng-if="campaign.campaign_status == 'completed'" style="text-transform:capitalize">{{campaign.end_date|limitTo:10|date:mediumDate}}</td>
                      <td ng-if="campaign.campaign_status != 'completed'">NA</td>
                      <!-- <td>{{campaign.phase_complete}}</td> -->
                      <td ng-if="campaign.campaign_status == 'on_hold'" style="text-transform:capitalize">OnHold</td>
                      <td ng-if="campaign.campaign_status != 'on_hold'" style="text-transform:capitalize">{{campaign.campaign_status}}</td>
                      <td style="width:100px;" class="col-md-2" >{{campaign.supplier_count}}</td>
                      <td style="width:100px;" class="col-md-2" >{{campaign.flat_count}}</td>
                      <td style="width:100px;" class="col-md-2" >{{campaign.purchased_survey}}</td>
                      <!-- <td style="width:100px;" class="col-md-2" >{{campaign.hot_leads}}</td> -->
                      <td>
                        <button class="btn btn-danger" ng-click="getPurchasedLead(campaign.campaign_id,campaign.name)">View Leads Purchased</button>
                        <button class="btn btn-danger" ng-click="getNotPurchasedLead(campaign.campaign_id,campaign.name)">View Leads Not Purchased</button>
                      </td>
                      <td>
                        <button class="btn btn-danger" ng-click="getFormDetails(campaign.campaign_id, 'email')" data-target="#sendEmailModal" data-toggle="modal">Email Leads</button>
                      </td>
                      <td>
                        <button class="btn btn-danger" ng-click="getFormDetails(campaign.campaign_id)" data-target="#sendEmailModal" data-toggle="modal">Download Leads</button>
                      </td>
                    </tr>

                  </tbody>
                </table>

              </div>
            </div>
              <div class="viewLeadstable">
                <!-- <button class="btn btn-danger" ng-click="backToCampaign()">Back To Campaigns</button> -->
              </br><br>
                <input type="text" class="form-control" ng-model="searchData" ng-if="purchasedTable" placeholder="search">
                <div class="table-responsive">
                  <div class="panel-heading content-title" ng-if="purchasedTable || notPurchasedTable"   style="height:70px">
                    <h3 style="background:'red'">Leads of {{CampaignNameofLeads}}</h3>
                    <div class="row">
                      <span class="pull-left"><label for="heading"><small>Campaign Owner :  </small><span><small>{{campaignOwner}}</small> </span></label></span>
                      <span class="pull-right"><label for="heading"><small>Principal Vendor :  </small><span><small>{{principalVendor}}</small></span></label></span>
                      </div>
                  </div>
                  <br />
                  <table class="table" ng-if="purchasedTable">
                    <thead>
                      <tr>
                        <th>Index</th>
                        <th>Client Name</th>
                        <th>Primary Count</th>
                        <th>City</th>
                        <th>Purchased on</th>
                        <th>Comments</th>
                        <th>Assigned To</th>
                        <th>Internal Comments</th>
                        <th>Meeting Date</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr ng-repeat="lead in purchasedLeadData | filter : searchData | filter : Code | itemsPerPage:20 track by $index">
                        <td  style="width:200px;" class="col-md-2">{{$index + 1}}</td>
                        <td  style="width:200px;" class="col-md-2">{{lead.leads_data[0].supplier_name}}</td>
                        <td  style="width:200px;" class="col-md-2">{{lead.leads_data[0].unit_primary_count}}</td>
                        <td  style="width:200px;" class="col-md-2">{{lead.leads_data[0].city}}</td>
                        <td  style="width:200px;" class="col-md-2">{{lead.leads_data[0].city}}</td>
                        <td  style="width:200px;" class="col-md-2">{{lead.contact_data.external_comments}}</td>
                        <td  style="width:200px;" class="col-md-2">{{lead.leads_data[0].city}}</td>
                        <td  style="width:200px;" class="col-md-2">{{lead.contact_data.internal_comments}}</td>
                        <td  style="width:200px;" class="col-md-2">{{lead.leads_data[0].city}}</td>
                        <!-- <td>{{lead.unit_primary_count}}</td>
                        <td>{{lead.city}}</td>
                        <td>{{lead.supplier_name}}</td> -->
                       

                        <!-- <td ng-repeat="alias in lead">{{alias.value}}</td> -->
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <br /><br />
              <div style="text-align:center">
              <dir-pagination-controls max-size="7" direction-links="true" boundary-links="true" ></dir-pagination-controls>
              </div>
              <br /> <br />


              <div class="viewLeadstable">
                <!-- <button class="btn btn-danger" ng-click="backToCampaign()">Back To Campaigns</button> -->
              </br><br>
                <input ng-if="notPurchasedTable" type="text" class="form-control" ng-model="searchData" placeholder="search">
                <div class="table-responsive">
                  <table class="table" ng-if="notPurchasedTable">
                    <thead>
                      <tr>
                        <th>Index</th>
                        <th>Client Name</th>
                        <th>Area</th>
                        <th>Price/Point</th>
                        <th>Comments</th>
                        <th>Primary Count (Ultra)</th>
                       
                      </tr>
                    </thead>
                    <tbody>
                      <tr ng-repeat="leaddata in notPurchasedLeadData | filter : searchData | filter : Code | itemsPerPage:20 track by $index">
                        <td  style="width:200px;" class="col-md-2">{{$index + 1}}</td>
                        <td  style="width:200px;" class="col-md-2">{{leaddata.leads_data[0].supplier_name}}</td>
                        <td  style="width:200px;" class="col-md-2">{{leaddata.leads_data[0].area}}</td>
                        <td  style="width:200px;" class="col-md-2">{{leaddata.leads_data.price}}</td>
                        <td  style="width:200px;" class="col-md-2">{{leaddata.internal_comments}}</td>
                        <td  style="width:200px;" class="col-md-2">{{leaddata.leads_data[0].unit_primary_count}}</td>
                        <!-- <td>{{lead.unit_primary_count}}</td>
                        <td>{{lead.city}}</td>
                        <td>{{lead.supplier_name}}</td> -->
                       

                        <!-- <td ng-repeat="alias in lead">{{alias.value}}</td> -->
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <br /><br />
              <div style="text-align:center">
              <dir-pagination-controls max-size="7" direction-links="true" boundary-links="true" ></dir-pagination-controls>
              </div>
              <br /> <br />


              
              <!-- <button ng-if="!showCampaigns" class="btn btn-danger" ng-click="getPrintLeadsInExcelData(campaignIdForLeads)" data-target="#printLeadsInExcelModal" data-toggle="modal">Print Leads In Excel</button> -->

            </div>
          </uib-tab>
          <!-- view leads end -->

           
              <!--START : Analysis -->
              <uib-tab  id="uib-tabs-width" ng-click="getCampaigns()" index="4" >
                <uib-tab-heading>
                  <h5 style="margin-left:-10px;"> Analysis</h5>

                </uib-tab-heading>

                <div class="container-fluid" print-section>
                  <div class="row">
                    <div class="panel panel-default" style="color:'0000ff'" >
                      <div class="col-md-12">
                        <!-- Filter -->
                        <div class="col-md-12" print-remove>
                          <div class="col-md-8" print-remove>
                            <label for="" style="color:#000000;">Select Date Range</label>
                            <div class="col-md-4">
                            <input type="text"  style="color:#000000;" class="field" uib-datepicker-popup="dd/MM/yyyy" placeholder="DD/MM/YYYY" ng-change="changeStartDate()" ng-model="dateRangeModel.start_dates" is-open="isDatepickerOpen" datepicker-options="datepickerOptions" ng-required="true" close-text="Close"  alt-input-formats="altInputFormats">
                            <button type="button" class="smallBtn calendar" ng-click="isDatepickerOpen = !isDatepickerOpen">
                              <i class="glyphicon glyphicon-calendar"></i>
                            </button>
                          </div>
                          <div class="col-md-4">
                            <input type="text" style="color:#000000;" class="field" uib-datepicker-popup="dd/MM/yyyy" placeholder="DD/MM/YYYY"  ng-change="changeEndDate()"  ng-model="dateRangeModel.end_dates" is-open="isEndDateOpen" datepicker-options="options" ng-required="true" close-text="Close"  alt-input-formats="altInputFormats">
                            <button type="button" class="smallBtn calendar" ng-disabled="!dateRangeModel.start_dates" ng-click="isEndDateOpen = !isEndDateOpen">
                              <i class="glyphicon glyphicon-calendar"></i>
                            </button>
                          </div>

                          <button class="btn btn-danger" ng-disabled="!dateRangeModel.start_dates && !dateRangeModel.end_dates" ng-click="getCampaignDateWiseSummary()">Submit</button>

                        </div>
                        <!-- /Filter -->
                        <br /><br /><br />
                        <br />

                        <!-- Campaign List -->
                        <div class="panel-group" print-remove>
                          <div class="col-md-12">
                            <div class="col-md-4">
                              <div class="panel panel-default" ng-click="getCampaignsMenu(campaignStatus.completed.status)">
                                <div class="button" type="button">
                                  <div class="panel-heading">
                                    Completed Campaigns  
                                  </div>
                                </div>

                                <div id="completed" class="animate-show" ng-show="campaignStatus.completed.value">
                                  <div class="panel-bodyDashboard camp-menu-content">
                                    <table class="table">
                                        <tr ng-repeat="campaign in campaignData.completed_campaigns | orderBy: 'name'">
                                        <td >
                                          <!-- <md-menu> -->
                                            <div class="" ng-click="getLeadsByCampaign(campaign)">
                                              {{campaign.name}}
                                            </div>
                                            
                                          </td>
                                        </tr>
                                    </table>
                                  </div>
                                </div>
                              </div>
                            </div>
                            
                            <div class="col-md-4">

                              <div class="panel panel-default" ng-click="getCampaignsMenu(campaignStatus.ongoing.status)">
                                <div class="button" type="button">
                                  <div class="panel-heading">
                                    Ongoing Campaigns
                                  </div>
                                </div>
                                <div id="ongoing" class="animate-show" ng-show="campaignStatus.ongoing.value">
                                  <div class="panel-bodyDashboard camp-menu-content">
                                    <table class="table">
                                      <tr ng-repeat="campaign in campaignData.ongoing_campaigns | orderBy: 'name'">
                                        <td>
                                          <div class="" ng-click="getLeadsByCampaign(campaign)">
                                            {{campaign.name}}
                                          </div>
                                        </td>
                                      </tr>
                                    </table>
                                  </div>
                                </div>
                              </div>
                            </div>

                            <div class="col-md-4">
                              <div class="panel panel-default" ng-click="getCampaignsMenu(campaignStatus.onhold.status)">
                                <div class="button" type="button">
                                  <div class="panel-heading">
                                        OnHold Campaigns
                                  </div>
                                </div>
                                
                                <div id="onhold" class="animate-show" ng-show="campaignStatus.onhold.value">
                                  <div class="panel-bodyDashboard camp-menu-content">
                                    <table class="table">
                                        <tr ng-repeat="campaign in campaignData.onhold_campaigns | orderBy: 'name'">
                                        <td >
                                            <div class="" ng-click="getLeadsByCampaign(campaign)">
                                              {{campaign.name}}
                                            </div>
                                          </td>
                                        </tr>
                                    </table>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <!-- /Campaign List -->

                        <br /><br /><br />
                        <div class="col-lg-12" ng-if="CampaignLeadsName" style="margin-top:30px;">
                          <br /> <br />
                          <div class="panel-heading content-title" style="height:70px">
                            <h3 for="heading">Leads of {{CampaignLeadsName}}</h3>
                          </div>
                        </div>
                        
                        <!-- Summary Report-->
                        <div class="col-lg-12" ng-if="CampaignLeadsName" style="margin-top:50px;">
                          <div class="col-lg-6">
                            <div class="panel panel-primary">
                              <div class="panel-heading content-title">
                                <label for="Flat">Summary Report</label>
                              </div>
                            </div>
                            <div class="campaigndetailtable">
                              <div class="table-responsive">
                                
                                <table class="table table-striped"  st-table="LeadsByCampaign" st-safe-src="Data">
                                  <thead>
                                    <tr>
                                      <th style="background:#8e1921 !important;color:#ffffff !important">Details</th>
                                      <th style="background:#8e1921 !important;color:#ffffff !important">Overall</th>
                                      <th style="background:#8e1921 !important;color:#ffffff !important">Last Week</th>
                                      <th style="background:#8e1921 !important;color:#ffffff !important">Last 2 Week</th>
                                      <th style="background:#8e1921 !important;color:#ffffff !important">Last 3 Week</th>
                                    </tr>
                                  </thead>
                                  <tbody style="text-align:center;">
                                    <tr>
                                    <td><small style="font-weight:bold">Flat count</small></td>
                                    <td>{{summary_report.overall_data.primary_count || 'NA'}}</td>
                                    <td>{{summary_report.last_week.primary_count || 'NA'}}</td>
                                    <td>{{summary_report.last_two_weeks.primary_count || 'NA'}}</td>
                                    <td>{{summary_report.last_three_weeks.primary_count || 'NA'}}</td>
                                    </tr>
                                  </tbody>

                                  <tbody style="text-align:center;">
                                    <tr>
                                    <td><small style="font-weight:bold">Total Lead</small></td>
                                    <td>{{summary_report.overall_data.total_lead || 'NA'}}</td>
                                    <td>{{summary_report.last_week.total_lead || 'NA'}}</td>
                                    <td>{{summary_report.last_two_weeks.total_lead || 'NA'}}</td>
                                    <td>{{summary_report.last_three_weeks.total_lead || 'NA'}}</td>
                                    </tr>
                                  </tbody>

                                  <tbody style="text-align:center;">
                                    <tr>
                                    <td><small style="font-weight:bold">{getHotLeadName}} (%)</small></td>
                                    <td>{{summary_report.overall_data.hot_lead_count || 'NA'}} {{getPercentBrackets(summary_report.overall_data.hot_lead_count, summary_report.overall_data.total_lead)}}</td>
                                    <td>{{summary_report.last_week.hot_lead_count || 'NA'}} {{getPercentBrackets(summary_report.last_week.hot_lead_count, summary_report.last_week.total_lead)}}</td>
                                    <td>{{summary_report.last_two_weeks.hot_lead_count || 'NA'}} {{getPercentBrackets(summary_report.last_two_weeks.hot_lead_count, summary_report.last_two_weeks.total_lead)}}</td>
                                    <td>{{summary_report.last_three_weeks.hot_lead_count || 'NA'}} {{getPercentBrackets(summary_report.last_three_weeks.hot_lead_count, summary_report.last_three_weeks.total_lead)}}</td>
                                    </tr>
                                  </tbody>

                                  <tbody style="text-align:center;">
                                    <tr>
                                    <td><small style="font-weight:bold">{{getDeepLeadName}} (%)</small></td>
                                    <td>{{summary_report.overall_data.total_deep_count || 'NA'}} {{getPercentBrackets(summary_report.overall_data.total_deep_count, summary_report.overall_data.total_lead)}}</td>
                                    <td>{{summary_report.last_week.total_deep_count || 'NA'}} {{getPercentBrackets(summary_report.last_week.total_deep_count, summary_report.last_week.total_lead)}}</td>
                                    <td>{{summary_report.last_two_weeks.total_deep_count || 'NA'}} {{getPercentBrackets(summary_report.last_two_weeks.total_deep_count, summary_report.last_two_weeks.total_lead)}}</td>
                                    <td>{{summary_report.last_three_weeks.total_deep_count || 'NA'}} {{getPercentBrackets(summary_report.last_three_weeks.total_deep_count, summary_report.last_three_weeks.total_lead)}}</td>
                                    </tr>
                                  </tbody>

                                </table>

                              </div>
                            </div>
                          </div>

                          <div class="col-lg-6">
                            <div class="panel panel-primary">
                              <div class="panel-heading content-title">
                                <label for="flat graph">Summary Report Graph</label>
                              </div>
                            </div>
                            <div class="row">
                           
                              <div class="outerFlat">
                                <div class="innerFlat">
                                  <nvd3 options="weekSummaryStackedBar" data="summary_report_graph_data"></nvd3>
                                </div>
                              </div>

                            </div>
                          </div>

                        </div>
                        <!-- Summary Report-->

                      </div>

                      <div class="col-sm-12" ng-if="CampaignLeadsName">
                        <br /><br /><br />


                        <!-- Flat summary Report -->
                        <div class="col-lg-6">
                          <div class="panel panel-primary">
                            <div class="panel-heading content-title">
                              <label for="Flat">Flat Summary Details</label>
                            </div>
                          </div>
                          <div class="campaigndetailtable">
                            <div class="table-responsive">
                              <table class="table table-striped" st-table="LeadsByCampaign" st-safe-src="Data">
                                <thead>
                                  <tr>
                                    <th style="background:#8e1921 !important;color:#ffffff !important;">Details</th>
                                    <th style="background:#8e1921 !important;color:#ffffff !important">Overall Campaign <br>Total</th>
                                    <th style="background:#8e1921 !important;color:#ffffff !important">Flat Count <br> <small style="color:#ffffff !important"> < 150 </small></th>
                                    <th style="background:#8e1921 !important;color:#ffffff !important">Flat Count <br><small style="color:#ffffff !important"> Between 151 to 400</small></th>
                                    <th style="background:#8e1921 !important;color:#ffffff !important">Flat Count <br> <small style="color:#ffffff !important"> > 401</small></th>
                                  </tr>
                                </thead>
                                <tbody style="text-align:center;">

                                  <tr>
                                    <td><small style="font-weight:bold">Lead Count</small></td>
                                    <td>{{summary_report.overall_data.total_lead}}</td>
                                    <td>{{flat_summary["<150"].lead_count}}</td>
                                    <td>{{flat_summary["150-400"].lead_count}}</td>
                                    <td>{{flat_summary[">400"].lead_count}}</td>
                                  </tr>

                                  <tr>
                                    <td><small style="font-weight:bold">Flat Count</small></td>
                                    <td>{{summary_report.overall_data.primary_count}}</td>
                                    <td>{{flat_summary["<150"].flat_count}}</td>
                                    <td>{{flat_summary["150-400"].flat_count}}</td>
                                    <td>{{flat_summary[">400"].flat_count}}</td>
                                  </tr>

                                  <tr>
                                    <td><small style="font-weight:bold">{{getHotLeadName}} (%)</small></td>
                                    <td>{{summary_report.overall_data.hot_lead_count}} {{getPercentBrackets(summary_report.overall_data.hot_lead_count, summary_report.overall_data.total_lead)}}</td>
                                    <td>{{flat_summary["<150"].hot_lead_count}} {{getPercentBrackets(flat_summary["<150"].hot_lead_count, flat_summary["<150"].lead_count)}}</td>
                                    <td>{{flat_summary["150-400"].hot_lead_count}} {{getPercentBrackets(flat_summary["150-400"].hot_lead_count, flat_summary["150-400"].lead_count)}}</td>
                                    <td>{{flat_summary[">400"].hot_lead_count}} {{getPercentBrackets(flat_summary[">400"].hot_lead_count, flat_summary[">400"].lead_count)}}</td>
                                  </tr>

                                  <tr>
                                    <td><small style="font-weight:bold">{{getDeepLeadName}} (%)</small></td>
                                    <td>{{summary_report.overall_data.total_deep_count}} {{getPercentBrackets(summary_report.overall_data.total_deep_count, summary_report.overall_data.total_lead)}}</td>
                                    <td>{{flat_summary["<150"].deep_lead_count}} {{getPercentBrackets(flat_summary["<150"].deep_lead_count, flat_summary["<150"].lead_count)}}</td>
                                    <td>{{flat_summary["150-400"].deep_lead_count}} {{getPercentBrackets(flat_summary["150-400"].deep_lead_count, flat_summary["150-400"].lead_count)}}</td>
                                    <td>{{flat_summary[">400"].deep_lead_count}} {{getPercentBrackets(flat_summary[">400"].deep_lead_count, flat_summary[">400"].lead_count)}}</td>
                                  </tr>

                                </tbody>
                              </table>
                            </div>
                          </div>
                        </div>

                        <div class="col-lg-6">
                          <div class="panel panel-primary">
                            <div class="panel-heading content-title">
                              <label for="flat graph">Flat Graph Summary</label>
                            </div>
                          </div>
                          <div class="row">

                            <select class="form-control" ng-change="sortData('flat_summary_graph_data',sortModel)"  ng-model="sortModel" print-remove>
                              <option value="" disabled>Select For Sorting</option>
                              <option ng-repeat="item in sortMenu" value="{{item.id}}" >{{item.name}}</option>
                            </select>

                            <div class="outerFlat">
                              <div class="innerFlat">
                                <nvd3 options="flatSummaryBarChart" data="flat_summary_graph_data" ng-if="!toggle_sort_data['flat_summary_graph_data']"></nvd3>
                                <nvd3 options="flatSummaryBarChart" data="toggle_sort_data['flat_summary_graph_data']" ng-if="toggle_sort_data['flat_summary_graph_data']"></nvd3>
                              </div>
                            </div>

                          </div>
                        </div>

                        <!-- /Flat summary Report -->
                      </div>

                      <br /><br />
                      <div class="col-lg-12"  ng-if="CampaignLeadsName" style="margin-top:50px;">

                        <div class="col-lg-6">
                          <div class="panel panel-primary">
                            <div class="panel-heading content-title">
                              <label for="Location">Location Summary Details</label>
                            </div>
                          </div>
                          <div class="campaigndetailtable">
                            <div class="table-responsive">
                              <table class="table table-striped" st-table="LeadsByCampaign.locality_data" st-safe-src="localityData">
                                <thead>
                                  <tr>
                                    <th style="background:#8e1921 !important;color:#ffffff !important">Supplier Area</th>
                                    <th style="background:#8e1921 !important;color:#ffffff !important">Total Leads</th>
                                    <th style="background:#8e1921 !important;color:#ffffff !important">Flat Count</th>
                                    <th style="background:#8e1921 !important;color:#ffffff !important">{{getHotLeadName}} <br>(%)</th>
                                    <th style="background:#8e1921 !important;color:#ffffff !important">{{getDeepLeadName}} <br>(%)</th>
                                  </tr>
                                </thead>
                                <tbody style="text-align:center;">
                                  <tr ng-repeat="(key,data) in location_summary">
                                    <td style="font-weight:bold">{{key}}</td>
                                    <td>{{data.lead_count}}</td>
                                    <td>{{data.flat_count}}</td>
                                    <td>{{data.hot_lead_count}} <br> <small style="font-weight:bold">{{ getPercentBrackets(data.hot_lead_count, data.lead_count)}}</small> </td>
                                    <td>{{data.deep_lead_count}} <br> <small style="font-weight:bold">{{getPercent(data.deep_lead_count, data.lead_count)}}</small></td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                          </div>
                          <br>
                        </div>
                            
                        <div class="col-lg-6" style="overflow:auto">
                          <div class="panel panel-primary">
                            <div class="panel-heading content-title">
                              <label for="flat graph">Location Graph Summary</label>
                            </div>
                          </div>
                          <div class="row">

                            <select class="form-control" ng-change="sortData('location_summary_graph_data',sortModel)"  ng-model="sortModel" print-remove>
                              <option value="" disabled>Select For Sorting</option>
                              <option ng-repeat="item in sortMenu" value="{{item.id}}" >{{item.name}}</option>
                            </select>

                            <div class="outerFlat">
                              <div class="innerFlat">
                                <nvd3 options="flatSummaryBarChart" data="location_summary_graph_data" ng-if="!toggle_sort_data['location_summary_graph_data']"></nvd3>
                                <nvd3 options="flatSummaryBarChart" data="toggle_sort_data['location_summary_graph_data']" ng-if="toggle_sort_data['location_summary_graph_data']"></nvd3>
                              </div>
                            </div>

                          </div>
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
              </uib-tab>
            
          </div>
          <!--END : Analysis  -->

          </uib-tabset>


          <!--content-top></content-top-->
          <div ui-view autoscroll="true" autoscroll-body-top></div>
        </div>
      </div>
      <back-top></back-top>


      <!--Start: Code for showing image Modal Window -->

    </div>

  



</div><!-- middle-section -->
</div><!-- wrapperBox -->
</main>
</div>




<!DOCTYPE html>
<html class="ng-cloak" lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <link href="css/main.css" rel="stylesheet" media="screen">
  <link href="css/preloader.css" rel="stylesheet" media="screen">
  <link href="css/blur_admin_theme.css" rel="stylesheet" media="screen">
  <link href="css/buttons.css" rel="stylesheet" media="screen">
  <link href="css/datepicker.css" rel="stylesheet" media="screen">
  <link href="css/icons.css" rel="stylesheet" media="screen">
  <link href="css/layout.css" rel="stylesheet" media="screen">
  <link href="css/socicon.css" rel="stylesheet" media="screen">
  <link href="css/table.css" rel="stylesheet" media="screen">
  <link href="css/pageTop.css" rel="stylesheet" media="screen">
  <link href="css/backTop.css" rel="stylesheet" media="screen">
  <link href="css/baWizard.css" rel="stylesheet" media="screen">
  <link href="css/contentTop.css" rel="stylesheet" media="screen">
  <link href="css/msgCenter.css" rel="stylesheet" media="screen">
  <link href="css/progressRound.css" rel="stylesheet" media="screen">
  <link href="css/sidebar.css" rel="stylesheet" media="screen">
  <link href="css/widgets.css" rel="stylesheet" media="screen">
  <link href="css/panel.css" rel="stylesheet">
  <link href="css/tabs.css" rel="stylesheet" media="screen">
  <link href="css/accordion.css" rel="stylesheet" media="screen">
  <link href="css/dashboard-theme.css" rel="stylesheet" media="screen">
  <link href="css/sass-app.css" rel="stylesheet" media="screen">
  <link href="css/sass-app-map.css" rel="stylesheet" media="screen">
  <link href="css/sidePanel.css" rel="stylesheet" media="screen">
  <link href="css/custom.css" rel="stylesheet" media="screen">
  <link rel="stylesheet" href="modules/common/loadingicon/loading-spinner.tmpl.css" />
  <link rel="stylesheet" type="text/css" href="modules/pages/dashboard/chat.css">
  <!-- <script data-require="jquery@*" data-semver="2.1.4" src="https://code.jquery.com/jquery-2.1.4.js"></script> -->
  <link rel="icon" type="image/png" sizes="16x16" href="assets/img/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="assets/img/favicon-96x96.png">
  <link rel="stylesheet" type="text/css" href="modules/pages/DashBoard/adminDashboard/percentage-circular-bar.css">
  <link href="https://netdna.bootstrapcdn.com/font-awesome/2.0/css/font-awesome.css" rel="stylesheet">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="css/smallscreen.css" rel="stylesheet" media="screen">
</head>

<body>

  <div class="body-bg"></div>

  <div ng-loading="loading"></div>
  <!--For displaying loading icon-->
  <div ng-show="isEmpty" style="text-align:center;">
    <h2>{{msg}}</h2>
  </div>

  <main ng-show="!isEmpty" ng-class="{ 'menu-collapsed': $baSidebarService.isMenuCollapsed() }" ng-if="loading">



  </main>
</body>

</html>