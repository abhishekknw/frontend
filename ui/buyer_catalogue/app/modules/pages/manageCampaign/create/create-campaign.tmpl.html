<link rel="stylesheet" href="modules/pages/manageCampaign/create/create-campaign.tmpl.css" />
  <div class="page-container">
    <div class="col-md-2"></div>
    <div class="col-md-6">
    	<form class="choices">
	    <div class="form-group">
	      <label for="existing">Select existing Business</label>
		    <input id="existing" type="radio" name="choice" ng-model="choice" value="existing" ng-click="getAllBusinesses()">

		  <span class = "" ng-show ="choice == 'existing'">
		   	<select name="bsSelect" id="bsSelect" ng-model="bsSelect" ng-change="getBusiness()">
		      <option  ng-repeat = "business in businesses"
           value="{{business.id}}">{{business.name}}</option>
	      </select><br>
	    </span>

		<!--    <span class = "dropdown" ng-show="choice == 'existing'">
          <a data-toggle = "dropdown" class="dropdown-toggle">Select Business <b class="caret"></b></a>
          <ul class = "dropdown-menu">
		        <li ng-repeat="business in businesses">
		        <a ng-click = "getBusiness(business.name)">{{business.name}}</a>
		        </li>
          </ul>
        </span>
      -->
      </div>
      <div class="form-group">
	      <label for="new">Create New Business</label>
	      <input id="new" type="radio" name="choice" ng-model="choice" value="new">
	    </div>
    </form>

      <form name="form" ng-show="choice == 'new' || choice_new == 'selected'" class="" ng-submit="create()" role="form">

      	<div class="panel panel-default business-panel">
        	<h3>Create Business</h3>
	         <div class="errorMessages">
	            <span ng-show="form.username.$dirty && form.username.$error.required" class="help-block">Username is required</span>
	            <span ng-show="form.password.$dirty && form.password.$error.required" class="help-block">Password is required</span>
	            <div ng-show="error" class="error">{{error}}</div>
	         </div>
	           <div class="form-group">
	              <label>Business Name</label>
	              <input type="text" name="name" id="name" class="form-control" ng-model="model.business.name" required />
	           </div>
	           <div class="form-group">
	              <label >Business Type</label>
	              <input type="text" name="type" id="type" class="form-control" ng-model="model.business.type" required />
	           </div>
	           <div class="form-group">
	              <label >Business Sub-Type</label>
	              <input type="text" name="type" id="type" class="form-control" ng-model="model.business.sub_type" />
	           </div>
	           <div class="form-group">
	              <label>Business Email</label>
	              <input type="email" name="email" id="email" class="form-control" ng-model="model.business.email" required />
	           </div>
	           <div class="form-group">
	              <label>Business Phone</label>
	              <input type="text" name="phone" id="phone" class="form-control" ng-pattern="phoneNumberPattern" ng-model="model.business.phone"/>
	           </div>
	           <div class="form-group">
	              <label>Business Address</label>
	              <input type="text" name="address" id="address" class="form-control" ng-model="model.business.address" />
	           </div>
	           <div class="form-group">
	              <label >Reference Contact Name</label>
	              <input type="text" name="reference_name" id="reference_name" class="form-control" ng-model="model.business.reference_name"/>
	           </div>
	           <div class="form-group">
	              <label >Reference Contact Phone</label>
	              <input type="text" name="reference_phn" id="reference_phn" class="form-control" ng-model="model.business.reference_phone"/>
	           </div>
	           <div class="form-group">
	              <label >Reference Contact Email</label>
	              <input type="text" name="reference_email" id="reference_email" class="form-control" ng-model="model.business.reference_email"/>
	           </div>
	           <div class="form-group">
	              <label>Comments</label>
	              <textarea name="comments" id="comments" class="form-control" ng-model="model.business.comments"></textarea>
	           </div>

	      </div>

       <div ng-repeat="contact in model.business.contacts track by $index">
	      <div class="panel panel-default business-panel">
        	<h3>Contact of Business</h3>

	           <div class="form-group">
	              <label>Name</label>
	              <input type="text" name="name" id="name" class="form-control" ng-model="contact.name" />
	           </div>
	           <div class="form-group">
	              <label >Designation</label>
	              <input type="text" name="designation" id="designation" class="form-control" ng-model="contact.designation"  />
	           </div>
	           <div class="form-group">
	              <label >Department</label>
	              <input type="text" name="department" id="department" class="form-control" ng-model="contact.department"  />
	           </div>
	           <div class="form-group">
	              <label>Email</label>
	              <input type="email" name="email" id="email" class="form-control" ng-model="contact.email"  />
	           </div>
	           <div class="form-group">
	              <label>Phone</label>
	              <input type="text" name="phone" id="phone" class="form-control" required ng-pattern="phoneNumberPattern" ng-model="contact.phone"/>
	           </div>
	           <div class="form-group">
	            <label>Single Point of Contact?</label>
	            </br>
	            <input id="spoc" type="radio" name="spoc" ng-model="contact.spoc" value=true>Yes &nbsp
	            <input id="spoc" type="radio" name="spoc" ng-model="contact.spoc" value=false>No

						</div>
						<div>
				    <button class="btn btn-primary" ng-click="remove($index)">Remove</button>
				  </div>
				</div>
	     </div>
	     <button class="btn btn-primary" ng-click="addNew()">Add New Contact</button>

	       <div class="panel panel-default business-panel">
        	<h3>Campaign Details</h3>
   				</br>

        	  <h4>Select Supplier Type and Count</h4>
        	  <div ng-repeat="type in supplier_types">
	            <label>{{type}}</label>
	        	  <input type="checkbox"  id="{{type}}" name="{{type}}" ng-model="supplier_type1"/>
							<span class = "" ng-show="supplier_type1">
						   	<input type="number" name="count" id="count" class="form-control" ng-model="model.supplier_type[type]"/>
		          </span>
	          </div>
	          <h4>Select Campaign Types</h4>
            <div ng-repeat="type in campaign_types">
	            <label>{{type}}</label>
	        	  <input type="checkbox"  id="{{type}}" name="{{type}}" ng-model="campaign_type1"/>
							<span class = "" ng-show="campaign_type1">
						   	<select ng-change="" ng-model="model.campaign_type[type]">
						      <option  ng-repeat="name in campaign_sub_types[type]"
				           value="{{name}}">{{name}}</option>
					      </select>
		          </span>
	          </div>
            </br>
            <div class="row form-group">
            	<span class="col-md-4">Start Date:</span>
              <span class="col-md-6">
              	<input type="text" ng-model="model.tentative.start_date" class="form-control" uib-datepicker-popup="{{format}}" is-open="popup1" min-date="today" datepicker-options="dateOptions" close-text="Close" alt-input-formats="altInputFormats" />
              </span>
	              <span class="input-group-btn">
	                <button type="button" class="btn btn-default" ng-click="popup1 = true"><i class="glyphicon glyphicon-calendar"></i></button>
	              </span>
            </div>
            <div class="row form-group">
            	<span class="col-md-4">End Date: </span>
              <span class="col-md-6">
              	<input type="text" ng-model="model.tentative.end_date" class="form-control" uib-datepicker-popup="{{format}}" is-open="popup2" min-date="key.start_date" datepicker-options="dateOptions" close-text="Close" /></span>
	              <span class="input-group-btn">
	                <button type="button" class="btn btn-default" ng-click="popup2 = true"><i class="glyphicon glyphicon-calendar"></i></button>
	              </span>
            </div>

			      <div class="row Cost" >
			        <span class="col-md-4">Tentative Campaign Cost: </span><span class="col-md-6"><input type="number" ng-model="model.tentative.campaign_cost"/>  </span>
		        </div>
	      </div>
	      </br>
	      <div>
	        <span class="create_button">
	           <button type="submit" class="btn btn-primary" class="UIbutton">Create & Continue</button>
	        </span>
        </div>
	    </form>
	  </div>
  </div>
