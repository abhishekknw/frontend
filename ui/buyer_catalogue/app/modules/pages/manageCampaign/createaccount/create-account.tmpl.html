<link rel="stylesheet" href="modules/pages/manageCampaign/createaccount/create-account.tmpl.css" />

<main ng-show="!isEmpty" ng-class="{ 'menu-collapsed': $baSidebarService.isMenuCollapsed() }" >
<div class="wrapperBox">
  <div style="text-align:center;"><h2>{{errorMsg}}</h2></div>
  <nav-bar></nav-bar>
  <div class="middle-section">
    <div class="breadcrumb" ncy-breadcrumb></div>
    <div class="accountSection">
      <div class="accountBox first">
        <h2 class="heading" ng-if="!editAccountField">Create Account <small>(* Fields are Mandatory)</small></h2>
        <h2 class="heading" ng-if="editAccountField">Edit Account <small>(* Fields are Mandatory)</small></h2>
        <form name="form">
          <label>Account Name <span>*</span></label>
          <input type="text" class="field" ng-pattern= "/^[a-zA-Z0-9\-\s]+$/" ng-model="model.account.name" ng-required="true">
          <label>Organisation Name </label>
          <input type="text" class="field" ng-model="organisationData.name" readonly="true">
          <label>Account Email</label>
          <input type="email" name="account_email" id="account_email" class="field" ng-pattern= "/^[\S+@\S+\.\S]+$/" ng-model="model.account.email">
          <span class="show-error" ng-show="form.account_email.$error.email">Please Enter Valid Email Id</span>
          <label>Account Phone</label>
          <input type="text" name="account_phone" id="account_phone" class="field" ng-pattern="/^(\d{8}|\d{10})$/" ng-model="model.account.phone">
          <span class="show-error" ng-show="form.account_phone.$error.pattern">Please Enter Valid Phone Number</span>
          <label>Account Address</label>
          <input type="text" name="address" id="address" class="field" ng-pattern= "/^[a-zA-Z0-9\-\,\.\s]+$/" ng-model="model.account.address">            
          <label >Reference Contact Name</label>
          <input type="text" name="reference_name" id="reference_name" class="field" ng-pattern= "/^[a-zA-Z\-\s]+$/" ng-model="model.account.reference_name">

          <label >Reference Contact Phone</label>
          <input type="text" name="reference_phn" id="reference_phn" class="field" ng-pattern="/^(\d{8}|\d{10})$/" ng-model="model.account.reference_phone">
          <span class="show-error" ng-show="form.reference_phn.$error.pattern">Please Enter Valid Phone Number</span>
          <label >Reference Contact Email</label>
          <input type="email" name="reference_email" id="reference_email" class="field" ng-pattern= "/^[\S+@\S+\.\S]+$/" ng-model="model.account.reference_email">
          <span class="show-error" ng-show="form.reference_email.$error.email">Please Enter Valid Email Id</span>
          <label>Comments</label>
          <textarea name="comments" id="comments" rows="6" class="field" ng-model="model.account.comments"></textarea>
        </form>
      </div>
      <div class="accountBox second">
        <h2 class="heading">Account Contact <small>(* Fields are Mandatory)</small></h2>
        <form name="form">
          <div class="repeater" ng-repeat="contact in model.account.contacts track by $index">
            <div>
              <label>Name <span>*</span></label>
              <input type="text" name="contact_name" id="contact_name" class="field" ng-pattern= "/^[a-zA-Z\-\s]+$/" ng-model="contact.name" required>
            </div>
            <div>
              <label >Designation</label>
              <input type="text" name="designation" id="designation" class="field" ng-pattern= "/^[a-zA-Z\s]+$/" ng-model="contact.designation">
            </div>
            <div>
              <label >Department</label>
              <input type="text" name="department" id="department" class="field" ng-pattern= "/^[a-zA-Z\s]+$/" ng-model="contact.department">
            </div>
            <div>
              <label>Email</label>
              <input type="email" name="contact_email" id="contact_email" class="field" ng-pattern= "/^[\S+@\S+\.\S]+$/" ng-model="contact.email">
              <span class="show-error" ng-show="form.contact_email.$error.email">Please Enter Valid Email</span>
            </div>
            <div>
              <label>Mobile</label>
              <input type="text" name="contact_phone" id="contact_phone" class="field" ng-pattern="/^(\d{8}|\d{10})$/" ng-model="contact.mobile">
              <span class="show-error" ng-show="form.contact_phone.$error.pattern">Please Enter Valid Mobile Number</span>
            </div>
            <div>
              <label>Single Point of Contact?</label>
              <input type="radio"  ng-model="contact.spoc" value="true">Yes &nbsp
              <input type="radio" ng-model="contact.spoc" value="false">No
            </div> 
            <button class="closeBtn" ng-click="remove($index)"><i class="fas fa-times-circle" aria-hidden="true"></i></button>
          </div>
          <div class="addNew">
            <button class="smallBtn" ng-click="addNew()">Add New Contact</button>
          </div>
        </form>
      </div>
    </div>
    <div class="accountBottomBtn">
      <button type="submit" class="smallBtn" ng-disabled="form.$invalid" ng-if="!editAccountField" ng-click="createAccount()">Save Details</button>
      <button  class="smallBtn" ng-disabled="form.$invalid" ng-click="editAccount()" ng-if="editAccountField">Update</button>
    </div>
  </div><!-- middle-section -->
  <div class="fixfooter"></div>
</div><!-- wrapperBox -->
<footer-bar></footer-bar>
</main>
